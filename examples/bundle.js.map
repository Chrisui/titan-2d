{"version":3,"sources":["webpack:///webpack/bootstrap d5f8a16c8fb9e18ec467","webpack:///d:/Projects/titan-2d/examples/index.js","webpack:///d:/Projects/titan-2d/examples/master/index.js","webpack:///d:/Projects/titan-2d/lib/Engine.js","webpack:///d:/Projects/titan-2d/lib/Entity.js","webpack:///d:/Projects/titan-2d/lib/Input.js","webpack:///./examples/style.css?ecdd","webpack:///./examples/style.css","webpack:///./~/style-loader/addStyles.js","webpack:///./~/matter-js/build/matter.js","webpack:///d:/Projects/titan-2d/lib/World.js","webpack:///d:/Projects/titan-2d/lib/Runner.js","webpack:///./~/css-loader/lib/css-base.js","webpack:///./~/lodash/object/values.js","webpack:///./~/lodash/object/assign.js","webpack:///d:/Projects/titan-2d/lib/Common.js","webpack:///./~/lodash/object/keys.js","webpack:///./~/lodash/internal/baseValues.js","webpack:///./~/lodash/internal/baseAssign.js","webpack:///./~/lodash/internal/createAssigner.js","webpack:///./~/lodash/internal/assignWith.js","webpack:///./~/lodash/internal/isLength.js","webpack:///./~/lodash/lang/isNative.js","webpack:///./~/lodash/lang/isObject.js","webpack:///./~/lodash/internal/shimKeys.js","webpack:///./~/lodash/internal/baseCopy.js","webpack:///./~/lodash/internal/getSymbols.js","webpack:///./~/lodash/lang/isArguments.js","webpack:///./~/lodash/object/keysIn.js","webpack:///./~/lodash/support.js","webpack:///./~/lodash/lang/isArray.js","webpack:///./~/lodash/internal/isIndex.js","webpack:///./~/lodash/internal/isObjectLike.js","webpack:///./~/lodash/string/escapeRegExp.js","webpack:///./~/lodash/internal/bindCallback.js","webpack:///./~/lodash/internal/isIterateeCall.js","webpack:///./~/lodash/utility/constant.js","webpack:///./~/lodash/function/restParam.js","webpack:///./~/lodash/internal/toObject.js","webpack:///./~/lodash/internal/baseToString.js","webpack:///./~/lodash/utility/identity.js","webpack:///./~/lodash/internal/getLength.js","webpack:///./~/lodash/internal/baseProperty.js"],"names":[],"mappings":"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;AAEA;AACA;;AAEA;AACA;AACA,iBAAgB,mBAAmB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB,sBAAsB;AACtC;AACA;AACA,mBAAkB,2BAA2B;AAC7C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAe,mBAAmB;AAClC;AACA;AACA;AACA;AACA,kBAAiB,2BAA2B;AAC5C;AACA;AACA,SAAQ,uBAAuB;AAC/B;AACA;AACA,IAAG;AACH;AACA,kBAAiB,uBAAuB;AACxC;AACA;AACA,4BAA2B;AAC3B;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,iBAAiB;AAChC;AACA;AACA;AACA;AACA;AACA,eAAc;AACd;AACA,iCAAgC,sBAAsB;AACtD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;;AAEA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,wDAAuD;AACvD;;AAEA,8BAA6B,mBAAmB;;AAEhD;;AAEA;;AAEA;AACA;AACA;;;;;;;ACzNA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAgB;AAChB,iBAAgB,KAAK;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,aAAa;AACpC,qBAAoB,aAAa;AACjC;AACA,+BAA8B,aAAa;AAC3C,iCAAgC,uBAAuB;AACvD;AACA;AACA,wBAAuB,aAAa;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,gBAAe,KAAK;AACpB,iBAAgB,OAAO;AACvB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAgB,OAAO;AACvB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAe,KAAK;AACpB,iBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;;AAET;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;;AAET;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAe,KAAK;AACpB,iBAAgB;AAChB,iBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,KAAK;AACpB,gBAAe,KAAK;AACpB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,KAAK;AACpB,gBAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,KAAK;AACpB,gBAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAe,KAAK;AACpB,gBAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe,KAAK;AACpB,gBAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,KAAK;AACpB,gBAAe,OAAO;AACtB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,KAAK;AACpB,gBAAe,OAAO;AACtB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,KAAK;AACpB,gBAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,KAAK;AACpB,gBAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,KAAK;AACpB,gBAAe,OAAO;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,KAAK;AACpB,gBAAe,OAAO;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,KAAK;AACpB,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,4CAA2C,2CAA2C;AACtF;AACA,4CAA2C,yCAAyC;;AAEpF;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,KAAK;AACpB,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,KAAK;AACpB,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB;AACA;AACA;AACA;AACA,uBAAsB;AACtB;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAa,aAAa,GAAG,eAAe,GAAG,cAAc;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;;AAEA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,EAAC;;;AAGD,EAAC;;;AAGD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,iBAAgB;AAChB,iBAAgB,UAAU;AAC1B;AACA;AACA,+B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA,gBAAe,UAAU;AACzB,gBAAe,QAAQ;AACvB,gBAAe,QAAQ;AACvB,gBAAe,QAAQ;AACvB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,2BAA0B,iCAAiC;AAC3D;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAe,UAAU;AACzB,iBAAgB;AAChB,iBAAgB,UAAU;AAC1B;AACA;AACA;;AAEA,iDAAgD,iBAAiB;;AAEjE,wBAAuB,oBAAoB;AAC3C;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,gDAA+C,iBAAiB;;AAEhE;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,gBAAe,UAAU;AACzB,iBAAgB;AAChB,gBAAe,QAAQ;AACvB,iBAAgB,UAAU;AAC1B;AACA;AACA;;AAEA,oDAAmD,iBAAiB;;AAEpE,wBAAuB,oBAAoB;AAC3C;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,mDAAkD,iBAAiB;;AAEnE;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAe,UAAU;AACzB,gBAAe,UAAU;AACzB,iBAAgB,UAAU;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAe,UAAU;AACzB,gBAAe,UAAU;AACzB,gBAAe,QAAQ;AACvB,iBAAgB,UAAU;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,4BAA2B,kCAAkC;AAC7D;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAe,UAAU;AACzB,gBAAe,OAAO;AACtB,iBAAgB,UAAU;AAC1B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAe,UAAU;AACzB,gBAAe,KAAK;AACpB,iBAAgB,UAAU;AAC1B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAe,UAAU;AACzB,gBAAe,KAAK;AACpB,gBAAe,QAAQ;AACvB,iBAAgB,UAAU;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,4BAA2B,iCAAiC;AAC5D;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAe,UAAU;AACzB,gBAAe,OAAO;AACtB,iBAAgB,UAAU;AAC1B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAe,UAAU;AACzB,gBAAe,WAAW;AAC1B,iBAAgB,UAAU;AAC1B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAe,UAAU;AACzB,gBAAe,WAAW;AAC1B,gBAAe,QAAQ;AACvB,iBAAgB,UAAU;AAC1B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,4BAA2B,iCAAiC;AAC5D;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAe,UAAU;AACzB,gBAAe,OAAO;AACtB,iBAAgB,UAAU;AAC1B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAe,MAAM;AACrB,gBAAe,QAAQ;AACvB,gBAAe,QAAQ;AACvB;AACA;AACA;AACA,4BAA2B,iCAAiC;AAC5D;AACA;AACA;;AAEA;AACA,wEAAuE,sBAAsB,EAAE;AAC/F,UAAS;AACT;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,UAAU;AACzB,iBAAgB,OAAO;AACvB;AACA;AACA;;AAEA,wBAAuB,iCAAiC;AACxD;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,UAAU;AACzB,iBAAgB,aAAa;AAC7B;AACA;AACA;;AAEA,wBAAuB,iCAAiC;AACxD;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,UAAU;AACzB,iBAAgB,YAAY;AAC5B;AACA;AACA;;AAEA,wBAAuB,iCAAiC;AACxD;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,UAAU;AACzB,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,iBAAgB,OAAO;AACvB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,mD;AACA,2D;AACA,UAAS;;AAET;AACA;;AAEA;AACA;AACA;AACA,gBAAe,WAAW;AAC1B,gBAAe,SAAS;AACxB,gBAAe,WAAW;AAC1B,iBAAgB,UAAU;AAC1B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,UAAU;AACzB,iBAAgB,UAAU;AAC1B;AACA;AACA;AACA;AACA;;AAEA,wBAAuB,oBAAoB;AAC3C;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAe,UAAU;AACzB,gBAAe,OAAO;AACtB,gBAAe,KAAK;AACpB;AACA;AACA;;AAEA,wBAAuB,mBAAmB;AAC1C;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,UAAU;AACzB,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,KAAK;AACpB;AACA;AACA;AACA;AACA;;AAEA,wBAAuB,mBAAmB;AAC1C;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAa;;AAEb;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,UAAU;AACzB,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,KAAK;AACpB;AACA;AACA;;AAEA,wBAAuB,mBAAmB;AAC1C;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAa;;AAEb;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAe;AACf,gBAAe;AACf,gBAAe;AACf,gBAAe;AACf;;AAEA;AACA;AACA;AACA;AACA,gBAAe;AACf,gBAAe;AACf,gBAAe;AACf,gBAAe;AACf;;AAEA;AACA;AACA;AACA;AACA,gBAAe;AACf,gBAAe;AACf,gBAAe;AACf,gBAAe;AACf;;AAEA;AACA;AACA;AACA;AACA,gBAAe;AACf,gBAAe;AACf,gBAAe;AACf,gBAAe;AACf;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,EAAC;;AAED,EAAC;;;AAGD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAgB;AAChB,iBAAgB,MAAM;AACtB;AACA;AACA;;AAEA;AACA;AACA,uBAAsB,aAAa;AACnC,sB;AACA,uBAAsB,aAAa;AACnC,uBAAsB,iB;AACtB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,MAAM;AACrB,gBAAe,QAAQ;AACvB;;AAEA;AACA;AACA;AACA,gBAAe,MAAM;AACrB,gBAAe,UAAU;AACzB,iBAAgB,MAAM;AACtB;;AAEA;AACA;AACA;AACA,iBAAgB,MAAM;AACtB,iBAAgB,KAAK;AACrB,kBAAiB,MAAM;AACvB;;AAEA;AACA;AACA;AACA,iBAAgB,MAAM;AACtB,iBAAgB,WAAW;AAC3B,kBAAiB,MAAM;AACvB;;AAEA,EAAC;;AAED,EAAC;;;AAGD;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,iBAAgB,QAAQ;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,iBAAgB,OAAO;AACvB;AACA;AACA;AACA;;AAEA,EAAC;;;AAGD,EAAC;;;AAGD;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,iBAAgB,MAAM;AACtB;AACA;AACA;AACA;AACA;;AAEA,wBAAuB,4BAA4B;AACnD;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,kBAAiB;AACjB;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,iBAAgB,MAAM;AACtB;AACA;AACA;AACA;AACA;;AAEA,wBAAuB,mBAAmB;AAC1C,gCAA+B,mBAAmB;AAClD;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,sBAAqB;AACrB;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAgB;AAChB,iBAAgB;AAChB,iBAAgB,KAAK;AACrB;AACA;AACA;AACA;;AAEA;AACA;;AAEA,EAAC;;;AAGD,EAAC;;;AAGD;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA,iBAAgB;AAChB,iBAAgB,KAAK;AACrB;AACA;AACA;AACA;AACA;AACA,wBAAuB;AACvB,sBAAqB;AACrB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,KAAK;AACpB,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,oBAAmB,mBAAmB;AACtC;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,2CAA0C,qBAAqB;AAC/D,+CAA8C,qBAAqB;AACnE;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,KAAK;AACpB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAgB;AAChB,iBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAgB;AAChB,iBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAgB;AAChB,iBAAgB;AAChB,iBAAgB;AAChB,iBAAgB;AAChB;AACA;AACA;AACA,iB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAgB;AAChB,iBAAgB;AAChB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAgB;AAChB,iBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAgB;AAChB,iBAAgB;AAChB,iBAAgB;AAChB;AACA;AACA;AACA,wBAAuB,mBAAmB;AAC1C;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,cAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAgB;AAChB,iBAAgB;AAChB,iBAAgB;AAChB;AACA;AACA;AACA;;AAEA;AACA,wBAAuB,mBAAmB;AAC1C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,wBAAuB,qBAAqB;AAC5C;;AAEA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;;AAEA;AACA;;AAEA,EAAC;;AAED,EAAC;;;AAGD;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA,gBAAe,UAAU;AACzB,iBAAgB,KAAK;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,yBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,KAAK;AACpB,gBAAe,UAAU;AACzB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,4BAA2B,qBAAqB;AAChD;AACA;AACA;;AAEA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;;AAEA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,KAAK;AACpB,gBAAe,KAAK;AACpB;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,KAAK;AACpB,gBAAe,KAAK;AACpB,iBAAgB,OAAO;AACvB;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;;AAEA,EAAC;;;AAGD,EAAC;;;AAGD;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,iBAAgB,MAAM;AACtB;AACA;AACA,+B;AACA,sBAAqB;AACrB;AACA;AACA;AACA;AACA,UAAS;AACT;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,YAAY;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,oBAAmB,uBAAuB;AAC1C;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA;;AAEA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,oBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,oBAAmB,sBAAsB;AACzC;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,oBAAmB,4BAA4B;AAC/C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,MAAM;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,EAAC;;AAED,EAAC;;;AAGD;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,iBAAgB,SAAS;AACzB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,sEAAqE,kBAAkB;AACvF;;AAEA,wBAAuB,mBAAmB;AAC1C;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,KAAK;AACpB,iBAAgB,OAAO;AACvB;AACA;AACA;;AAEA,wBAAuB,mBAAmB;AAC1C;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,EAAC;;AAED,EAAC;;;AAGD;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,oBAAmB,kBAAkB;AACrC;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,oBAAmB,kBAAkB;AACrC;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB;AACA;AACA,wBAAuB,mBAAmB;AAC1C;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB;AACA;AACA,yBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,oBAAmB,kBAAkB;AACrC;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,wBAAuB,qBAAqB;AAC5C;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB;AACA;AACA,yBAAwB;AACxB;;AAEA,wBAAuB,kBAAkB;AACzC;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,4BAA2B,qBAAqB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,EAAC;;AAED,EAAC;;;AAGD;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA,gBAAe,KAAK;AACpB,gBAAe,KAAK;AACpB,gBAAe,UAAU;AACzB,iBAAgB,UAAU;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,UAAS;AACT,0BAAyB;AACzB;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAS;AACT;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,kC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAgB;AAChB,iBAAgB;AAChB,iBAAgB;AAChB;AACA;AACA;AACA,6BAA4B;AAC5B,6BAA4B;AAC5B,uBAAsB,4BAA4B;AAClD;AACA;;AAEA,wBAAuB,iBAAiB;AACxC;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAgB;AAChB,iBAAgB;AAChB,iBAAgB;AAChB;AACA;AACA;AACA;;AAEA,wBAAuB,qBAAqB;AAC5C;;AAEA,6B;AACA,2B;AACA,cAAa,sB;AACb,2B;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAgB;AAChB,iBAAgB;AAChB,iBAAgB;AAChB;AACA;AACA;AACA;AACA,6BAA4B,aAAa;AACzC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,wBAAuB,qBAAqB;AAC5C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,EAAC;;;AAGD,EAAC;;;AAGD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAgB;AAChB,iBAAgB,WAAW;AAC3B;AACA;AACA;;AAEA;AACA;AACA,kCAAiC;AACjC;AACA,kCAAiC;;AAEjC;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAe,aAAa;AAC5B,gBAAe,OAAO;AACtB;AACA;AACA,wBAAuB,wBAAwB;AAC/C;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAe,WAAW;AAC1B,gBAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,wB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAS;AACT,+BAA8B;AAC9B;AACA;;AAEA;AACA;AACA,wB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAS;AACT,+BAA8B;AAC9B;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,gBAAe,OAAO;AACtB;AACA;AACA,wBAAuB,mBAAmB;AAC1C;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;;AAEA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,EAAC;;AAED,EAAC;;;AAGD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,iBAAgB;AAChB,iBAAgB,gBAAgB;AAChC;AACA;AACA;;AAEA;AACA;AACA,UAAS;AACT;AACA;AACA;;AAEA,6C;AACA;AACA;AACA,sBAAqB,aAAa;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,UAAS;;AAET;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAe,gBAAgB;AAC/B,gBAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,gCAA+B,mBAAmB;AAClD;AACA;AACA;AACA;;AAEA;AACA;AACA,8CAA6C;AAC7C;;AAEA;AACA,uEAAsE,2BAA2B;AACjG;AACA;AACA,cAAa;AACb;AACA;AACA;AACA,UAAS;AACT;AACA;;AAEA;AACA,6DAA4D,2BAA2B;AACvF;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAe,MAAM;AACrB;AACA;AACA;AACA;;AAEA;AACA,2DAA0D,eAAe;;AAEzE;AACA,2DAA0D,eAAe;;AAEzE;AACA,yDAAwD,eAAe;;AAEvE;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAe;AACf,eAAc,MAAM;AACpB,gBAAe;AACf,gBAAe;AACf;;AAEA;AACA;AACA;AACA;AACA,gBAAe;AACf,eAAc,MAAM;AACpB,gBAAe;AACf,gBAAe;AACf;;AAEA;AACA;AACA;AACA;AACA,gBAAe;AACf,eAAc,MAAM;AACpB,gBAAe;AACf,gBAAe;AACf;;AAEA;AACA;AACA;AACA;AACA,gBAAe;AACf,eAAc,MAAM;AACpB,eAAc,KAAK;AACnB,gBAAe;AACf,gBAAe;AACf;;AAEA;AACA;AACA;AACA;AACA,gBAAe;AACf,eAAc,MAAM;AACpB,eAAc,KAAK;AACnB,gBAAe;AACf,gBAAe;AACf;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,EAAC;;;AAGD,EAAC;;;AAGD;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,iBAAgB;AAChB,gBAAe,QAAQ;AACvB,kBAAiB;AACjB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;;AAEA;;AAEA,wBAAuB,iBAAiB;AACxC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,0BAAyB;AACzB;AACA;AACA,sBAAqB;AACrB;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,iBAAgB;AAChB,gBAAe,KAAK;AACpB,kBAAiB;AACjB;AACA;AACA,gCAA+B;AAC/B;;AAEA;AACA;AACA;AACA,iBAAgB;AAChB,iBAAgB,SAAS;AACzB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAgB;AAChB,iBAAgB,MAAM;AACtB;AACA;AACA;;AAEA;AACA;AACA,4BAA2B,iBAAiB;AAC5C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,iBAAgB,OAAO;AACvB;AACA,mD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,MAAM;AACrB,iBAAgB,MAAM;AACtB;AACA;AACA,uCAAsC,OAAO;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,MAAM;AACrB,iBAAgB,OAAO;AACvB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,iBAAgB,QAAQ;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,iBAAgB,OAAO;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,iBAAgB,OAAO;AACvB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAgB,OAAO;AACvB;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,iBAAgB,OAAO;AACvB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,iBAAgB,OAAO;AACvB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,iBAAgB,OAAO;AACvB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,MAAM;AACrB,gBAAe,OAAO;AACtB;AACA;AACA;AACA;;AAEA,wBAAuB,qBAAqB;AAC5C;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,EAAC;;AAED,EAAC;;;AAGD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,gBAAe,YAAY;AAC3B,gBAAe,OAAO;AACtB,iBAAgB,OAAO;AACvB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,oBAAmB,iCAAiC;AACpD;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAS;;AAET;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uDAAsD,8BAA8B;;AAEpF;AACA;AACA,oBAAmB,+BAA+B;AAClD;AACA;;AAEA;AACA,oBAAmB,+BAA+B;AAClD;AACA;AACA;;AAEA;AACA;AACA,wDAAuD,+BAA+B;;AAEtF;AACA,qDAAoD,4BAA4B;;AAEhF;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA,4BAA2B,mBAAmB;AAC9C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAe,OAAO;AACtB;AACA;AACA,wBAAuB,mBAAmB;AAC1C;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB;AACA;AACA,wBAAuB,mBAAmB;AAC1C;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB;AACA,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB;AACA,gBAAe,OAAO;AACtB;AACA;AACA,wBAAuB,mBAAmB;AAC1C;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAe;AACf,eAAc,oBAAoB;AAClC,gBAAe;AACf,gBAAe;AACf;;AAEA;AACA;AACA;AACA;AACA,gBAAe;AACf,eAAc,oBAAoB;AAClC,gBAAe;AACf,gBAAe;AACf;;AAEA;AACA;AACA;AACA;AACA,gBAAe;AACf,eAAc,oBAAoB;AAClC,gBAAe;AACf,gBAAe;AACf;;AAEA;AACA;AACA;AACA;AACA,gBAAe;AACf,eAAc,oBAAoB;AAClC,gBAAe;AACf,gBAAe;AACf;;AAEA;AACA;AACA;AACA;AACA,gBAAe;AACf,eAAc,oBAAoB;AAClC,gBAAe;AACf,gBAAe;AACf;;AAEA;AACA;AACA;AACA;AACA,gBAAe;AACf,eAAc,oBAAoB;AAClC,gBAAe;AACf,gBAAe;AACf;;AAEA;AACA;AACA;AACA;AACA,gBAAe;AACf,eAAc,oBAAoB;AAClC,gBAAe;AACf,gBAAe;AACf;;AAEA;AACA;AACA;AACA;AACA,gBAAe;AACf,gBAAe;AACf,eAAc,oBAAoB;AAClC,gBAAe;AACf,gBAAe;AACf;;AAEA;AACA;AACA;AACA;AACA,gBAAe;AACf,gBAAe;AACf,eAAc,oBAAoB;AAClC,gBAAe;AACf,gBAAe;AACf;;AAEA;AACA;AACA;AACA;AACA,gBAAe;AACf,gBAAe;AACf,eAAc,oBAAoB;AAClC,gBAAe;AACf,gBAAe;AACf;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,EAAC;;AAED,EAAC;;;AAGD;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA,iBAAgB;AAChB,gBAAe,OAAO;AACtB,gBAAe,SAAS;AACxB;AACA;AACA;AACA;;AAEA,wBAAuB,kBAAkB;AACzC;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,iBAAgB;AAChB,gBAAe,OAAO;AACtB,gBAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,wBAAuB,kBAAkB;AACzC;AACA;;AAEA;AACA,gCAA+B,sBAAsB;AACrD;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAgB;AAChB,gBAAe,OAAO;AACtB,iBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,4BAA2B,kBAAkB;AAC7C;AACA;;AAEA;AACA;AACA;AACA;;AAEA,oCAAmC,sBAAsB;AACzD;AACA;AACA;AACA;AACA;AACA;;AAEA,EAAC;;AAED,EAAC;;;AAGD;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA,iBAAgB,QAAQ;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,QAAQ;AACvB,gBAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,EAAC;;;AAGD,EAAC;;;AAGD;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA,gBAAe,YAAY;AAC3B,iBAAgB,MAAM;AACtB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,2BAA0B;AAC1B,2BAA0B;AAC1B,oCAAmC;AACnC,kCAAiC;AACjC,yBAAwB;AACxB,wBAAuB;AACvB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,4C;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,MAAM;AACrB,gBAAe,YAAY;AAC3B;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,MAAM;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,MAAM;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,MAAM;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAgB;AAChB,iBAAgB;AAChB,gBAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;;AAEA,iB;AACA;AACA;AACA;AACA;;AAEA,EAAC;;;AAGD,EAAC;;;AAGD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,6DAA4D,+BAA+B,wBAAwB,EAAE,UAAU;;AAE/H;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,UAAS;AACT;;AAEA;AACA;AACA;AACA;AACA,gBAAe,OAAO;AACtB;AACA;AACA;AACA;;AAEA,EAAC;;;AAGD,EAAC;;;AAGD;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB;AACA;AACA;;AAEA;AACA,wBAAuB,mBAAmB;AAC1C;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB;AACA;AACA;;AAEA;AACA,wBAAuB,kBAAkB;AACzC;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,KAAK;AACpB,gBAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;;AAEA,EAAC;;AAED,EAAC;;;AAGD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,iBAAgB,KAAK;AACrB;AACA;AACA;;AAEA,0B;AACA;AACA,wBAAuB,aAAa;AACpC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,4CAA2C;AAC3C;;AAEA;AACA;AACA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,iBAAgB,KAAK;AACrB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,0B;AACA;AACA,wBAAuB,aAAa;AACpC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,4CAA2C;AAC3C;;AAEA;AACA;AACA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,iBAAgB,KAAK;AACrB;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,iBAAgB,KAAK;AACrB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,wBAAuB,WAAW;AAClC;AACA;AACA;;AAEA;AACA;;AAEA,wB;AACA;AACA,wBAAuB,aAAa;AACpC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,4CAA2C;AAC3C;;AAEA,EAAC;;;AAGD,EAAC;;;AAGD;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,SAAS;AACxB,iBAAgB,UAAU;AAC1B;AACA;AACA,uCAAsC,iBAAiB;AACvD;AACA;AACA;AACA;;AAEA,0BAAyB,YAAY;AACrC;;AAEA,iCAAgC,kBAAkB;AAClD;;AAEA;AACA;AACA,2E;;AAEA;AACA;;AAEA,2CAA0C,0CAA0C;;AAEpF;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,UAAU;AACzB,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,iBAAgB,UAAU;AAC1B;AACA;AACA;;AAEA,wBAAuB,mBAAmB;AAC1C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,0BAAyB,sDAAsD;AAC/E;AACA,0BAAyB;AACzB;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,UAAU;AACzB,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,QAAQ;AACvB,gBAAe,OAAO;AACtB,iBAAgB,UAAU;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,sBAAqB,YAAY;AACjC,0BAAyB,eAAe;AACxC;AACA;AACA;AACA,yFAAwF,6BAA6B;AACrH;AACA;;AAEA,0BAAyB,eAAe;AACxC;AACA;AACA;AACA,yFAAwF,6BAA6B;;AAErH;AACA;AACA,6FAA4F,6BAA6B;AACzH;;AAEA;AACA;AACA,6FAA4F,6BAA6B;AACzH;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,SAAS;AACxB,iBAAgB,UAAU;AAC1B;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,2CAA0C,mEAAmE;AAC7G;;AAEA;;AAEA;AACA,UAAS;AACT;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,iBAAgB,UAAU;AAC1B;AACA;AACA,+CAA8C,0BAA0B;;AAExE,wBAAuB,YAAY;AACnC;AACA;AACA,8BAA6B,+EAA+E;AAC5G,iDAAgD,UAAU,yCAAyC,iBAAiB;;AAEpH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,iBAAgB,UAAU;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,qCAAoC,eAAe;AACnD,kE;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA,cAAa;;AAEb,sF;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA,UAAS;;AAET,sF;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA,UAAS;;AAET;AACA;AACA,sBAAqB,mCAAmC;AACxD;AACA;AACA,UAAS;;AAET;AACA;AACA,sBAAqB,mCAAmC;AACxD;AACA;AACA,UAAS;;AAET;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,QAAQ;AACvB,gBAAe,OAAO;AACtB,iBAAgB;AAChB,iBAAgB;AAChB,iBAAgB,UAAU;AAC1B;AACA;AACA,0CAAyC,oBAAoB;AAC7D,4CAA2C,iBAAiB;;AAE5D;AACA;AACA,UAAS;;AAET;;AAEA;;AAEA;AACA;;AAEA,EAAC;;;AAGD,EAAC;;;AAGD;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA,gBAAe,SAAS;AACxB,iBAAgB,KAAK;AACrB;AACA;AACA;;AAEA;AACA,wBAAuB,qBAAqB;AAC5C;AACA,4C;AACA;AACA;AACA,kBAAiB;AACjB;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,KAAK;AACpB,gBAAe,OAAO;AACtB;AACA;AACA;AACA;;AAEA;AACA;;AAEA,wBAAuB,iBAAiB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,EAAC;;AAED,EAAC;;;AAGD;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA,gBAAe,SAAS;AACxB,iBAAgB,OAAO;AACvB;AACA;AACA,uB;AACA,mBAAkB,aAAa;AAC/B,mBAAkB;AAClB;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,SAAS;AACxB,gBAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;;AAEA,wBAAuB,qBAAqB;AAC5C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAa;AACb;AACA;;AAEA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,iBAAgB,QAAQ;AACxB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,iBAAgB,QAAQ;AACxB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,EAAC;;AAED,EAAC;;;AAGD;;AAEA;AACA;AACA;AACA,6CAA4C,aAAa;AACzD;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,iBAAgB,OAAO;AACvB;AACA;AACA,iBAAgB;AAChB;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,iBAAgB,OAAO;AACvB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,iBAAgB,OAAO;AACvB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,iBAAgB,OAAO;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,iBAAgB,OAAO;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,iBAAgB,OAAO;AACvB;AACA;AACA;AACA;AACA,qBAAoB;AACpB,iBAAgB;AAChB;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,iBAAgB,OAAO;AACvB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,iBAAgB,OAAO;AACvB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,iBAAgB,OAAO;AACvB;AACA;AACA,iBAAgB;AAChB;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,iBAAgB,OAAO;AACvB;AACA;AACA,iBAAgB;AAChB;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,iBAAgB,OAAO;AACvB;AACA;AACA,iBAAgB;AAChB;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,iBAAgB,OAAO;AACvB;AACA;AACA,iBAAgB;AAChB;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,KAAK;AACpB,iBAAgB,OAAO;AACvB;AACA;AACA;AACA,iBAAgB;AAChB;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,iBAAgB,OAAO;AACvB;AACA;AACA,iBAAgB;AAChB;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,iBAAgB,OAAO;AACvB;AACA;AACA;AACA;;AAEA,EAAC;;AAED,EAAC;;;AAGD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,cAAa,aAAa,GAAG,eAAe,GAAG,cAAc;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe,SAAS;AACxB,gBAAe,KAAK;AACpB;AACA;AACA;;AAEA,wBAAuB,mBAAmB;AAC1C;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,KAAK;AACpB,iBAAgB,SAAS;AACzB;AACA;AACA;AACA;;AAEA;AACA,0BAAyB,qCAAqC;AAC9D,UAAS;;AAET;AACA;;AAEA;AACA;AACA;AACA,gBAAe,SAAS;AACxB,iBAAgB,OAAO;AACvB;AACA;AACA;AACA,uBAAsB,aAAa;AACnC;AACA;AACA;;AAEA,wBAAuB,qBAAqB;AAC5C;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,SAAS;AACxB,gBAAe,KAAK;AACpB,iBAAgB,OAAO;AACvB;AACA;AACA;AACA;;AAEA,wBAAuB,qBAAqB;AAC5C;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,SAAS;AACxB,gBAAe,OAAO;AACtB,iBAAgB,OAAO;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,wBAAuB,cAAc;AACrC;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,SAAS;AACxB,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB;AACA;AACA;AACA;AACA,wBAAuB,qBAAqB;AAC5C;AACA;AACA;AACA,UAAS;AACT,wBAAuB,qBAAqB;AAC5C;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,SAAS;AACxB,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB;AACA;AACA;AACA;;AAEA;AACA;;AAEA,wBAAuB,qBAAqB;AAC5C;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,SAAS;AACxB,gBAAe,OAAO;AACtB,iBAAgB,QAAQ;AACxB;AACA;AACA,wBAAuB,qBAAqB;AAC5C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,SAAS;AACxB,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA,wBAAuB,qBAAqB;AAC5C;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAe,SAAS;AACxB,gBAAe,SAAS;AACxB,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,wBAAuB,qBAAqB;AAC5C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,gD;AACA;AACA;AACA,cAAa;;AAEb,gD;AACA;AACA;AACA,cAAa;;AAEb;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,4BAA2B,eAAe;AAC1C;AACA;AACA;;AAEA;AACA;;AAEA,EAAC;;;AAGD,EAAC;;;AAGD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,iBAAgB,OAAO;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA,2C;AACA,mB;AACA;AACA;AACA,cAAa;AACb,mB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,UAAS;AACT;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,wBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;;AAEA;AACA,wBAAuB,2BAA2B;AAClD;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,iBAAiB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,c;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,cAAa;AACb;AACA;;AAEA;;AAEA,4BAA2B,kBAAkB;AAC7C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAe,aAAa;AAC5B,gBAAe,iBAAiB;AAChC;AACA;AACA;;AAEA,wBAAuB,wBAAwB;AAC/C;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;;AAEA;AACA;AACA,cAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,iBAAiB;AAChC;AACA;AACA;AACA;;AAEA,wBAAuB,mBAAmB;AAC1C;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA,gCAA+B,0BAA0B;AACzD;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,iBAAiB;AAChC;AACA;AACA;AACA;AACA;AACA;;AAEA,oBAAmB,mBAAmB;AACtC;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,+D;AACA;;AAEA;AACA;;AAEA;AACA;AACA,iE;;AAEA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA,oCAAmC,0BAA0B;AAC7D;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,sBAAqB;AACrB;AACA;;AAEA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,iBAAiB;AAChC;AACA;AACA;AACA;AACA;;AAEA;;AAEA,oBAAmB,mBAAmB;AACtC;;AAEA;AACA;;AAEA;;AAEA,wBAAuB,0BAA0B;AACjD;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,iBAAiB;AAChC;AACA;AACA;AACA;AACA;;AAEA;;AAEA,wBAAuB,mBAAmB;AAC1C;;AAEA;AACA;AACA;;AAEA;AACA;AACA,UAAS;AACT;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,iBAAiB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,oBAAmB,mBAAmB;AACtC;;AAEA;AACA;;AAEA;AACA;AACA,4BAA2B,sBAAsB;AACjD;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAS;AACT;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,iBAAiB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,oBAAmB,mBAAmB;AACtC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAS;AACT;AACA;AACA;;AAEA;;AAEA;AACA,oBAAmB,mBAAmB;AACtC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,iBAAiB;AAChC;AACA;AACA;;AAEA;;AAEA,wBAAuB,mBAAmB;AAC1C;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,iBAAiB;AAChC;AACA;AACA;;AAEA,wBAAuB,mBAAmB;AAC1C;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,iBAAiB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,oBAAmB,kBAAkB;AACrC;AACA;AACA,wBAAuB,gCAAgC;AACvD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAS;AACT;AACA;AACA;;AAEA;;AAEA;AACA,oBAAmB,kBAAkB;AACrC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAS;AACT;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,KAAK;AACpB,gBAAe,iBAAiB;AAChC;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAS;AACT;AACA;;AAEA;;AAEA;;AAEA,wBAAuB,uBAAuB;AAC9C;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAe,UAAU;AACzB,gBAAe,iBAAiB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,wBAAuB,qBAAqB;AAC5C;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAgB;AAChB,iBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA,4CAA2C,cAAc;AACzD,4CAA2C,cAAc;AACzD;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAe,YAAY;AAC3B,iBAAgB,OAAO;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,iBAAgB,MAAM;AACtB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,EAAC;;;AAGD,EAAC;;;AAGD;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,iBAAgB,WAAW;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,2C;AACA,mB;AACA;AACA;AACA,cAAa;AACb,mB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAS;AACT;AACA;;AAEA;AACA,mDAAkD,cAAc;AAChE,mDAAkD,cAAc;;AAEhE;AACA;;AAEA;AACA;AACA;AACA,gBAAe,WAAW;AAC1B;AACA;AACA;AACA;;AAEA;AACA,wC;AACA,0D;AACA;;AAEA;AACA,0C;AACA,8D;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,WAAW;AAC1B,gBAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,8D;AACA,cAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,wBAAuB,mBAAmB;AAC1C;AACA;AACA;;AAEA;AACA,wBAAuB,2BAA2B;AAClD;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAS;AACT;AACA;;AAEA,oBAAmB,mBAAmB;AACtC;;AAEA,oBAAmB,wBAAwB;AAC3C;;AAEA;AACA;;;AAGA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,WAAW;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAS;AACT;AACA;;AAEA;AACA;AACA,UAAS;AACT;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,KAAK;AACpB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAe,WAAW;AAC1B,gBAAe,KAAK;AACpB,iBAAgB,YAAY;AAC5B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAe,WAAW;AAC1B,gBAAe,KAAK;AACpB,iBAAgB,cAAc;AAC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CA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAgB,iBAAiB;AACjC;AACA;AACA,yCAAwC,gBAAgB;AACxD,KAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAgB,iBAAiB;AACjC;AACA;AACA;AACA;AACA,aAAY,oBAAoB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACjDA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AChCA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,UAAU;AACrB,YAAW,SAAS;AACpB,YAAW,EAAE;AACb,cAAa,OAAO;AACpB;AACA;AACA,cAAa,mBAAmB,GAAG,YAAY,GAAG,iBAAiB;AACnE,WAAU;AACV;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA,cAAa,mBAAmB,GAAG,YAAY,GAAG,iBAAiB;AACnE,WAAU;AACV;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;;;;;;;;;AC3CA,KAAM,MAAM,GAAG,EAAE,CAAC;;AAElB,OAAM,CAAC,GAAG,GAAG,YAAW;;;AAGpB,SAAM,IAAI,GAAG,MAAM,CAAC,WAAW,CAAC;;AAEhC,SAAI,IAAI,EAAE;AACN,aAAI,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG,IAAI,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,MAAM,CAAC;AAChF,gBAAO,CAAE,IAAI,CAAC,GAAG,EAAG,CAAC;MACxB;;AAED,YAAO,CAAE,IAAI,IAAI,EAAG,CAAC;EACxB;;AAED,OAAM,CAAC,gBAAgB,GAAG,MAAM,CAAC,qBAAqB,IAAI,MAAM,CAAC,2BAA2B,IACrF,MAAM,CAAC,wBAAwB,IAAI,MAAM,CAAC,uBAAuB,IACjE,UAAS,EAAE,EAAE;AAAE,WAAM,CAAC,UAAU,CAAC;gBAAM,EAAE,CAAC,GAAG,EAAE,CAAC;MAAA,EAAE,KAAK,CAAC,CAAC;EAAE,CAAC;;AAEnE,OAAM,CAAC,eAAe,GAAG,MAAM,CAAC,oBAAoB,IAAI,MAAM,CAAC,uBAAuB,IAC/E,MAAM,CAAC,0BAA0B,IAAI,MAAM,CAAC,sBAAsB,CAAC;;kBAE3D,MAAM,C;;;;;;ACtBrB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AC/CA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,MAAM;AACjB,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACrBA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB,SAAS;AACzB;;AAEA,QAAO,uCAAuC,EAAE;AAChD;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACvCA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,SAAS;AACpB,cAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;;;;;;;AC3CA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,YAAW,SAAS;AACpB,cAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACxCA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,EAAE;AACb,cAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;;;;;;;ACnBA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,EAAE;AACb,cAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,EAAE;AACb,cAAa,QAAQ;AACrB;AACA;AACA,iBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AC3BA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACzCA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,MAAM;AACjB,YAAW,OAAO,WAAW;AAC7B,cAAa,OAAO;AACpB;AACA;AACA,yBAAwB;;AAExB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACtBA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,MAAM;AACnB;AACA;AACA;AACA;;AAEA;;;;;;;AClBA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,EAAE;AACb,cAAa,QAAQ;AACrB;AACA;AACA,8BAA6B,kBAAkB,EAAE;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACpCA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AChEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,0BAAyB,YAAY,EAAE;AACvC,iBAAgB,sBAAsB;AACtC;;AAEA,qBAAoB;AACpB,8BAA6B,iBAAiB;;AAE9C;AACA;AACA;AACA,wBAAuB;AACvB;AACA;AACA;AACA;AACA,oDAAmD,aAAa,EAAE;;AAElE;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,EAAC;;AAED;;;;;;;;AC3EA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,EAAE;AACb,cAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA,0BAAyB,kBAAkB,EAAE;AAC7C;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACvCA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAW,EAAE;AACb,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACpBA;AACA;AACA;AACA;AACA,YAAW,EAAE;AACb,cAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;;;;;;;ACXA;;AAEA;AACA;AACA;AACA;AACA;AACA,+BAA8B;AAC9B;;AAEA;AACA;AACA,oCAAmC,QAAQ;AAC3C;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AC/BA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAW,SAAS;AACpB,YAAW,EAAE;AACb,YAAW,OAAO;AAClB,cAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACtCA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAW,EAAE;AACb,YAAW,EAAE;AACb,YAAW,EAAE;AACb,cAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AChCA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,EAAE;AACb,cAAa,SAAS;AACtB;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACtBA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,SAAS;AACpB,YAAW,OAAO;AAClB,cAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACzDA;;AAEA;AACA;AACA;AACA;AACA,YAAW,EAAE;AACb,cAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;;;;;;;ACbA;AACA;AACA;AACA;AACA;AACA,YAAW,EAAE;AACb,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,EAAE;AACb,cAAa,EAAE;AACf;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACnBA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,EAAE;AACf;AACA;;AAEA;;;;;;;ACdA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap d5f8a16c8fb9e18ec467\n **/","import * as Master from './master/index';\r\n\r\nMaster.render(document.getElementById('container'));\r\n\r\nrequire('style!css!autoprefixer!./style.css');\n\n\n/** WEBPACK FOOTER **\n ** d:/Projects/titan-2d/examples/index.js\n **/"," import Engine from '../../lib/Engine';\r\n import Entity from '../../lib/Entity';\r\n import Input from '../../lib/Input';\r\n\r\n import {World, Bodies, Body, Vector} from 'matter';\r\n\r\n import values from 'lodash/object/values';\r\n\r\n export function render(renderTo) {\r\n\r\n  const engine = Engine.create({\r\n    render: {\r\n      element: renderTo\r\n    }\r\n  });\r\n\r\n  const player = Bodies.circle(100, 100, 30, {restitution: 0.6, friction: 0.1});\r\n\r\n  var offset = 5;\r\n  World.add(engine.world, [\r\n      Bodies.rectangle ( 400, -offset, 800.5 + 2 * offset, 50.5, { isStatic: true }),\r\n      Bodies.rectangle(400, 600 + offset, 800.5 + 2 * offset, 50.5, { isStatic: true }),\r\n      Bodies.rectangle(800 + offset, 300, 50.5, 600.5 + 2 * offset, { isStatic: true }),\r\n      Bodies.rectangle(-offset, 300, 50.5, 600.5 + 2 * offset, { isStatic: true })\r\n  ]);\r\n\r\n  World.add(engine.world, [player]);\r\n\r\n  const jump = Input.create(null, [Input.KEYBOARD_UP, Input.GAMEPAD_A]);\r\n  const runRight = Input.create(null, [Input.KEYBOARD_RIGHT, Input.GAMEPAD_L_RIGHT]);\r\n  const runLeft = Input.create(null, [Input.KEYBOARD_LEFT, Input.GAMEPAD_L_LEFT]);\r\n\r\n  Engine.run(engine, function() {\r\n\r\n    if (jump.value && player.velocity.y < 10) {\r\n      Body.applyForce(player,\r\n        Vector.sub(player.position, {x: player.position.y, y: player.position.y + 15}), {x: 0, y: -0.02});\r\n    }\r\n\r\n    if (runRight.value && player.velocity.x < 10) {\r\n      Body.applyForce(player,\r\n        Vector.sub(player.position, {x: player.position.x - 15, y: player.position.y}), {x: 0.01, y: 0});\r\n    }\r\n\r\n    if (runLeft.value && player.velocity.x > -10) {\r\n      Body.applyForce(player,\r\n        Vector.sub(player.position, {x: player.position.x + 15, y: player.position.y}), {x: -0.01, y: 0});\r\n    }\r\n\r\n    if (engine.runner.frameCount % 20 === 0) {\r\n\r\n      const gamepads = navigator.getGamepads();\r\n      values(gamepads).filter(pad => pad && pad.axes).forEach((pad, i) => console.log(i, pad.axes[0], pad.axes[1], pad.axes[2], pad.axes[3]));\r\n      //values(gamepads).filter(pad => pad && pad.buttons).forEach((pad, padI) => pad.buttons.forEach((but, butI) => console.log(padI, butI, but.pressed, but.value)));\r\n    }\r\n\r\n  });\r\n\r\n  // debug\r\n  window.engine = engine;\r\n  window.world = engine.world;\r\n  window.player = player;\r\n\r\n}\r\n\r\nexport function cleanup(cleanFrom) {\r\n\r\n}\n\n\n/** WEBPACK FOOTER **\n ** d:/Projects/titan-2d/examples/master/index.js\n **/","import assign from 'lodash/object/assign';\r\nimport {Engine, RenderPixi} from 'matter';\r\nimport World from './World';\r\nimport Entity from './Entity';\r\nimport Runner from './Runner';\r\nimport {observe as observeInput, update as updateInput} from './Input';\r\n\r\nconst GameEngine = {};\r\n\r\nGameEngine.create = function(state = {}) {\r\n  const engine = assign({\r\n    timeScale: 1,\r\n    inputs: {}\r\n  }, state);\r\n\r\n  engine.world = World.create(engine.world);\r\n\r\n  engine.physics = Engine.create(engine.physics)\r\n  engine.physics.world = engine.world;\r\n\r\n  engine.render = RenderPixi.create(engine.render);\r\n\r\n  return engine;\r\n};\r\n\r\nGameEngine.update = function(engine, deltaTime, correction) {\r\n  const entities = World.allEntities(engine.world);\r\n  const numEntities = entities.length;\r\n\r\n  updateInput();\r\n\r\n  for (let i = 0; i < numEntities; i++) {\r\n    Entity.update(entities[i], deltaTime, engine.timeScale, correction);\r\n  }\r\n\r\n  Engine.update(engine.physics, deltaTime, correction);\r\n};\r\n\r\nGameEngine.run = function(engine, tick) {\r\n  engine.runner = Runner.create(null, function(delta, correction) {\r\n    if (tick) {\r\n      tick(delta, correction);\r\n    }\r\n\r\n    GameEngine.update(engine, delta, correction);\r\n\r\n    RenderPixi.world(engine);\r\n  });\r\n\r\n  observeInput();\r\n};\r\n\r\nGameEngine.stop = function(engine) {\r\n  Runner.destroy(engine.runner);\r\n};\r\n\r\nexport default GameEngine;\n\n\n/** WEBPACK FOOTER **\n ** d:/Projects/titan-2d/lib/Engine.js\n **/","import assign from 'lodash/object/assign';\r\nimport {Composite} from 'matter';\r\n\r\nconst Entity = {};\r\n\r\nEntity.create = function(state = {}) {\r\n  const entity = Composite.create(assign({\r\n    label: 'TIEntity'\r\n  }, state));\r\n\r\n  return entity;\r\n}\r\n\r\nEntity.update = function(entity, deltaTime, timeScale, correction) {\r\n  // Note: This is pre physics update\r\n}\r\n\r\nexport default Entity; \n\n\n/** WEBPACK FOOTER **\n ** d:/Projects/titan-2d/lib/Entity.js\n **/","import assign from 'lodash/object/assign';\r\n\r\n/**\r\n * This is a quick drop in file which may have to be changed later to fit our needs.\r\n * it is basically just taken from http://gamedevelopment.tutsplus.com/tutorials/game-input-simplified--cms-19759\r\n * with a few modifications to fit the rest of the engine public api\r\n * Note: the state within this file is contained as a global singleton so would only really work with one engine\r\n *       which with blind foresight seems fine?\r\n * Usage: var jump = Input.create(null, [Input.KEYBOARD_UP, GAMEPAD_A]);\r\n *        update() { if (jump.value) {} }\r\n * \r\n * TODO: Not sure this currently has great support for action/state differentiation\r\n *   SEE: http://www.gamedev.net/blog/355/entry-2250186-designing-a-robust-input-handling-system-for-games/\r\n */\r\nvar KEYBOARD = 1;\r\nvar POINTER  = 2;\r\nvar GAMEPAD  = 3;\r\nvar DEVICE   = 16;\r\nvar CODE     = 8;\r\n\r\nvar __pointer = {\r\n  currentX   : 0,\r\n  currentY   : 0,\r\n  previousX  : 0,\r\n  previousY  : 0,\r\n  distanceX  : 0,\r\n  distanceY  : 0,\r\n  identifier : -1,\r\n  moved      : false,\r\n  pressed    : false\r\n};\r\n\r\nvar __keyboard = {};\r\nvar __inputs   = [];\r\nvar __channels = [];\r\n\r\nvar __mouseDetected = false;\r\nvar __touchDetected = false;\r\n\r\n// Updates a GameInput instance.\r\nfunction updateInput( input, channels ) {\r\n  var i         = channels.length;\r\n  var channel   = 0;\r\n  var device    = 0;\r\n  var code      = 0;\r\n  var threshold = 0;\r\n  var gamepad   = null;\r\n\r\n  input.value = 0;\r\n\r\n  while( i -- > 0 ) {\r\n    channel = channels[ i ];\r\n    device  = channel >>> DEVICE & 255;\r\n    code    = channel >>> CODE   & 255;\r\n\r\n    if( device === KEYBOARD ) {\r\n      if( __keyboard[ code ] === true ) {\r\n        updateValue( input, 1 );\r\n      }\r\n      continue;\r\n    }\r\n\r\n    if( device === POINTER ) {\r\n      if( code === 0 ) {\r\n        if( __pointer.distanceY < 0 ) {\r\n          updateValue( input, -__pointer.distanceY );\r\n        }\r\n        continue;\r\n      }\r\n\r\n      if( code === 1 ) {\r\n        if( __pointer.distanceY > 0 ) {\r\n          updateValue( input, __pointer.distanceY );\r\n        }\r\n        continue;\r\n      }\r\n\r\n      if( code === 2 ) {\r\n        if( __pointer.distanceX < 0 ) {\r\n          updateValue( input, -__pointer.distanceX );\r\n        }\r\n        continue;\r\n      }\r\n\r\n      if( code === 3 ) {\r\n        if( __pointer.distanceX > 0 ) {\r\n          updateValue( input, __pointer.distanceX );\r\n        }\r\n        continue;\r\n      }\r\n\r\n      if( code === 4 ) {\r\n        if( __pointer.pressed ) {\r\n          updateValue( input, 1 );\r\n        }\r\n        continue;\r\n      }\r\n\r\n      continue;\r\n    }\r\n\r\n    if( device === GAMEPAD ) {\r\n      if( gamepad === null ) {\r\n        // W3C\r\n        if( navigator.getGamepads !== undefined ) {\r\n          gamepad = navigator.getGamepads()[ 0 ];\r\n        }\r\n        // Webkit (non-standard)\r\n        else if( navigator.webkitGetGamepads !== undefined ) {\r\n          gamepad = navigator.webkitGetGamepads()[ 0 ];\r\n        }\r\n        else {\r\n          gamepad = undefined;\r\n        }\r\n      }\r\n\r\n      if( gamepad === undefined || gamepad.connected === false ) {\r\n        continue;\r\n      }\r\n\r\n      // Set the threshold for analog buttons.\r\n      threshold = 0.05;\r\n\r\n      if( code < 16 ) {\r\n        if( gamepad.buttons[ code ] !== undefined ) {\r\n          // W3C\r\n          if( gamepad.buttons[ code ].value !== undefined ) {\r\n            updateValue( input, gamepad.buttons[ code ].value, threshold );\r\n          }\r\n          // Webkit (non-standard)\r\n          else {\r\n            updateValue( input, gamepad.buttons[ code ], threshold );\r\n          }\r\n        }\r\n        continue;\r\n      }\r\n\r\n      // Set the threshold for analog sticks.\r\n      threshold = 0.18;\r\n\r\n      if( code === 16 ) {\r\n        if( gamepad.axes[ 1 ] < 0 ) {\r\n          updateValue( input, -gamepad.axes[ 1 ], threshold );\r\n        }\r\n        continue;\r\n      }\r\n\r\n      if( code === 17 ) {\r\n        if( gamepad.axes[ 1 ] > 0 ) {\r\n          updateValue( input, gamepad.axes[ 1 ], threshold );\r\n        }\r\n        continue;\r\n      }\r\n\r\n      if( code === 18 ) {\r\n        if( gamepad.axes[ 0 ] < 0 ) {\r\n          updateValue( input, -gamepad.axes[ 0 ], threshold );\r\n        }\r\n        continue;\r\n      }\r\n\r\n      if( code === 19 ) {\r\n        if( gamepad.axes[ 0 ] > 0 ) {\r\n          updateValue( input, gamepad.axes[ 0 ], threshold );\r\n        }\r\n        continue;\r\n      }\r\n\r\n      if( code === 20 ) {\r\n        if( gamepad.axes[ 3 ] < 0 ) {\r\n          updateValue( input, -gamepad.axes[ 3 ], threshold );\r\n        }\r\n        continue;\r\n      }\r\n\r\n      if( code === 21 ) {\r\n        if( gamepad.axes[ 3 ] > 0 ) {\r\n          updateValue( input, gamepad.axes[ 3 ], threshold );\r\n        }\r\n        continue;\r\n      }\r\n\r\n      if( code === 22 ) {\r\n        if( gamepad.axes[ 2 ] < 0 ) {\r\n          updateValue( input, -gamepad.axes[ 2 ], threshold );\r\n        }\r\n        continue;\r\n      }\r\n\r\n      if( code === 23 ) {\r\n        if( gamepad.axes[ 2 ] > 0 ) {\r\n          updateValue( input, gamepad.axes[ 2 ], threshold );\r\n        }\r\n        continue;\r\n      }\r\n\r\n      continue;\r\n    }\r\n\r\n    // If we are here the device is unknown.\r\n  }\r\n}\r\n\r\n// Updates the value of a GameInput instance.\r\nfunction updateValue( input, value, threshold ) {\r\n  if( threshold !== undefined ) {\r\n    if( value < threshold ) {\r\n      value = 0;\r\n    }\r\n  }\r\n\r\n  // The highest value has priority.\r\n  if( input.value < value ) {\r\n    input.value = value;\r\n  }\r\n}\r\n\r\n// Updates the pointer values.\r\nfunction updatePointer() {\r\n  // Clamp the pointer's horizontal position.\r\n  if( __pointer.currentX < 0 ) {\r\n    __pointer.currentX = 0;\r\n  }\r\n  else if( __pointer.currentX >= window.innerWidth ) {\r\n    __pointer.currentX = window.innerWidth - 1;\r\n  }\r\n\r\n  // Clamp the pointer's vertical position.\r\n  if( __pointer.currentY < 0 ) {\r\n    __pointer.currentY = 0;\r\n  }\r\n  else if( __pointer.currentY >= window.innerHeight ) {\r\n    __pointer.currentY = window.innerHeight - 1;\r\n  }\r\n\r\n  // Make sure the pointer speed is in range.\r\n  if( GameInput.pointerSpeed < 1 ) {\r\n    GameInput.pointerSpeed = 1;\r\n  }\r\n\r\n  __pointer.distanceX = ( __pointer.currentX - __pointer.previousX ) / GameInput.pointerSpeed;\r\n  __pointer.distanceY = ( __pointer.currentY - __pointer.previousY ) / GameInput.pointerSpeed;\r\n\r\n  __pointer.previousX = __pointer.currentX;\r\n  __pointer.previousY = __pointer.currentY;\r\n\r\n  // Clamp the pointer's horizontal distance.\r\n  if( __pointer.distanceX > 1 ) {\r\n    __pointer.distanceX = 1;\r\n  }\r\n  else if( __pointer.distanceX < -1 ) {\r\n    __pointer.distanceX = -1;\r\n  }\r\n\r\n  // Clamp the pointer's vertical distance.\r\n  if( __pointer.distanceY > 1 ) {\r\n    __pointer.distanceY = 1;\r\n  }\r\n  else if( __pointer.distanceY < -1 ) {\r\n    __pointer.distanceY = -1;\r\n  }\r\n\r\n  GameInput.pointerX = __pointer.currentX;\r\n  GameInput.pointerY = __pointer.currentY;\r\n}\r\n\r\n// Called when a mouse input device is detected.\r\nfunction mouseDetected() {\r\n  if( __mouseDetected === false ) {\r\n    __mouseDetected = true;\r\n\r\n    // Ignore touch events if a mouse is being used.\r\n    removeTouchListeners();\r\n  }\r\n}\r\n\r\n// Called when a touch-screen input device is detected.\r\nfunction touchDetected() {\r\n  if( __touchDetected === false ) {\r\n    __touchDetected = true;\r\n\r\n    // Ignore mouse events if a touch-screen is being used.\r\n    removeMouseListeners();\r\n  }\r\n}\r\n\r\n// Called when a pointer-like input device is pressed.\r\nfunction pointerPressed( x, y, identifier ) {\r\n  __pointer.identifier = identifier;\r\n  __pointer.pressed    = true;\r\n\r\n  pointerMoved( x, y );\r\n}\r\n\r\n// Called when a pointer-like input device is released.\r\nfunction pointerReleased() {\r\n  __pointer.identifier = 0;\r\n  __pointer.pressed    = false;\r\n}\r\n\r\n// Called when a pointer-like input device is moved.\r\nfunction pointerMoved( x, y ) {\r\n  __pointer.currentX = x >>> 0;\r\n  __pointer.currentY = y >>> 0;\r\n\r\n  if( __pointer.moved === false ) {\r\n    __pointer.moved = true;\r\n    __pointer.previousX = __pointer.currentX;\r\n    __pointer.previousY = __pointer.currentY;\r\n  }\r\n}\r\n\r\n// Kills an event.\r\nfunction killEvent( event ) {\r\n  event.preventDefault();\r\n  event.stopImmediatePropagation();\r\n}\r\n\r\n// Called when a mouse button is pressed.\r\nfunction onMouseDown( event ) {\r\n  mouseDetected();\r\n\r\n  if( event.button === 0 ) {\r\n    pointerPressed( event.clientX, event.clientY, 0 );\r\n  }\r\n\r\n  killEvent( event );\r\n}\r\n\r\n// Called when a mouse button is released.\r\nfunction onMouseUp( event ) {\r\n  mouseDetected();\r\n\r\n  if( event.button === 0 ) {\r\n    pointerReleased();\r\n  }\r\n\r\n  killEvent( event );\r\n}\r\n\r\n// Called when a mouse is moused.\r\nfunction onMouseMove( event ) {\r\n  mouseDetected();\r\n\r\n  pointerMoved( event.clientX, event.clientY );\r\n\r\n  killEvent( event );\r\n}\r\n\r\n// Called when a touch-screen is pressed.\r\nfunction onTouchStart( event ) {\r\n  touchDetected();\r\n\r\n  var touch = event.touches[ 0 ];\r\n\r\n  if( __pointer.pressed === false ) {\r\n    pointerPressed( touch.clientX, touch.clientY, touch.identifier );\r\n  }\r\n\r\n  killEvent( event );\r\n}\r\n\r\n// Called when a touch-screen is released.\r\nfunction onTouchEnd( event ) {\r\n  touchDetected();\r\n\r\n  var list  = event.changedTouches;\r\n  var touch = list[ 0 ];\r\n\r\n  if( touch.identifier === __pointer.identifier ) {\r\n    pointerReleased();\r\n  }\r\n  else {\r\n    var i = 1;\r\n    var n = list.length;\r\n\r\n    while( i < n ) {\r\n      touch = list[ i ];\r\n\r\n      if( touch.identifier === __pointer.identifier ) {\r\n        pointerReleased();\r\n        break;\r\n      }\r\n\r\n      i ++;\r\n    }\r\n  }\r\n\r\n  killEvent( event );\r\n}\r\n\r\n// Called when a touch-point is moved.\r\nfunction onTouchMove( event ) {\r\n  touchDetected();\r\n\r\n  var list  = event.touches;\r\n  var touch = list[ 0 ];\r\n\r\n  if( touch.identifier === __pointer.identifier ) {\r\n    pointerMoved( touch.clientX, touch.clientY );\r\n  }\r\n  else {\r\n    var i = 1;\r\n    var n = list.length;\r\n\r\n    while( i < n ) {\r\n      touch = list[ i ];\r\n\r\n      if( touch.identifier === __pointer.identifier ) {\r\n        pointerMoved( touch.clientX, touch.clientY );\r\n        break;\r\n      }\r\n\r\n      i ++;\r\n    }\r\n  }\r\n\r\n  killEvent( event );\r\n}\r\n\r\n// Called when a keyboard key is pressed.\r\nfunction onKeyDown( event ) {\r\n  __keyboard[ event.keyCode ] = true;\r\n\r\n  killEvent( event );\r\n}\r\n\r\n// Called when a keyboard key is released.\r\nfunction onKeyUp( event ) {\r\n  __keyboard[ event.keyCode ] = false;\r\n\r\n  killEvent( event );\r\n}\r\n\r\n// Mouse listeners.\r\nfunction addMouseListeners() {\r\n  window.addEventListener( \"mousedown\", onMouseDown, true );\r\n  window.addEventListener( \"mouseup\",   onMouseUp,   true );\r\n  window.addEventListener( \"mousemove\", onMouseMove, true );\r\n}\r\n\r\n// Mouse listeners.\r\nfunction removeMouseListeners() {\r\n  window.removeEventListener( \"mousedown\", onMouseDown, true );\r\n  window.removeEventListener( \"mouseup\",   onMouseUp,   true );\r\n  window.removeEventListener( \"mousemove\", onMouseMove, true );\r\n}\r\n\r\n// Touch-screen listeners.\r\nfunction addTouchListeners() {\r\n  window.addEventListener( \"touchstart\", onTouchStart, true );\r\n  window.addEventListener( \"touchend\",   onTouchEnd,   true );\r\n  window.addEventListener( \"touchmove\",  onTouchMove,  true );\r\n}\r\n\r\n// Touch-screen listeners.\r\nfunction removeTouchListeners() {\r\n  window.removeEventListener( \"touchstart\", onTouchStart, true );\r\n  window.removeEventListener( \"touchend\",   onTouchEnd,   true );\r\n  window.removeEventListener( \"touchmove\",  onTouchMove,  true );\r\n}\r\n\r\n// Touch-screen listeners.\r\nfunction addKeyboardListeners() {\r\n  window.addEventListener( \"keydown\", onKeyDown, true );\r\n  window.addEventListener( \"keyup\",   onKeyUp,   true );\r\n}\r\n\r\n// Touch-screen listeners.\r\nfunction removeKeyboardListeners() {\r\n  window.removeEventListener( \"keydown\", onKeyDown, true );\r\n  window.removeEventListener( \"keyup\",   onKeyUp,   true );\r\n}\r\n\r\n// Exported GameInput domain\r\n// Note: GameInput actions will peer into a singleton input state\r\n// - See exported observe and update functions for usage\r\nconst GameInput = {};\r\n\r\nGameInput.create = function(state, channels) {\r\n  const input = assign({\r\n    value: 0,\r\n    enabled: true\r\n  }, state);\r\n\r\n  for (let i = 0; i < channels.length; ++i) {\r\n    GameInput.add(input, channels[i]);\r\n  }\r\n\r\n  return input;\r\n};\r\n\r\nGameInput.add = function(input, channel) {\r\n  var i = __inputs.indexOf( input );\r\n\r\n  if( i === -1 ) {\r\n    __inputs.push( input );\r\n    __channels.push( [ channel ] );\r\n    return;\r\n  }\r\n\r\n  var ca = __channels[ i ];\r\n  var ci = ca.indexOf( channel );\r\n\r\n  if( ci === -1 ) {\r\n    ca.push( channel );\r\n  }\r\n};\r\n\r\nGameInput.remove = function(input, channel) {\r\n  var i = __inputs.indexOf( input );\r\n\r\n  if( i === -1 ) {\r\n    return;\r\n  }\r\n\r\n  var ca = __channels[ i ];\r\n  var ci = ca.indexOf( channel );\r\n\r\n  if( ci !== -1 ) {\r\n    ca.splice( ci, 1 );\r\n\r\n    if( ca.length === 0 ) {\r\n      __inputs.splice( i, 1 );\r\n      __channels.splice( i, 1 );\r\n    }\r\n  }\r\n};\r\n\r\nGameInput.reset = function(input) {\r\n  var i = __inputs.indexOf( input );\r\n\r\n  if( i !== -1 ) {\r\n    __inputs.splice( i, 1 );\r\n    __channels.splice( i, 1 );\r\n  }\r\n\r\n  input.value   = 0;\r\n  input.enabled = true;\r\n};\r\n\r\n// The X position of the pointer, in pixels, within the window viewport.\r\nGameInput.pointerX = 0;\r\n\r\n// The Y position of the pointer, in pixels, within the window viewport.\r\nGameInput.pointerY = 0;\r\n\r\n// The distance the pointer has to move, in pixels per frame, to\r\n// cause the value of a GameInput instance to equal 1.0.\r\nGameInput.pointerSpeed = 10;\r\n\r\n\r\nGameInput.KEYBOARD_A = KEYBOARD << DEVICE | 65 << CODE;\r\nGameInput.KEYBOARD_B = KEYBOARD << DEVICE | 66 << CODE;\r\nGameInput.KEYBOARD_C = KEYBOARD << DEVICE | 67 << CODE;\r\nGameInput.KEYBOARD_D = KEYBOARD << DEVICE | 68 << CODE;\r\nGameInput.KEYBOARD_E = KEYBOARD << DEVICE | 69 << CODE;\r\nGameInput.KEYBOARD_F = KEYBOARD << DEVICE | 70 << CODE;\r\nGameInput.KEYBOARD_G = KEYBOARD << DEVICE | 71 << CODE;\r\nGameInput.KEYBOARD_H = KEYBOARD << DEVICE | 72 << CODE;\r\nGameInput.KEYBOARD_I = KEYBOARD << DEVICE | 73 << CODE;\r\nGameInput.KEYBOARD_J = KEYBOARD << DEVICE | 74 << CODE;\r\nGameInput.KEYBOARD_K = KEYBOARD << DEVICE | 75 << CODE;\r\nGameInput.KEYBOARD_L = KEYBOARD << DEVICE | 76 << CODE;\r\nGameInput.KEYBOARD_M = KEYBOARD << DEVICE | 77 << CODE;\r\nGameInput.KEYBOARD_N = KEYBOARD << DEVICE | 78 << CODE;\r\nGameInput.KEYBOARD_O = KEYBOARD << DEVICE | 79 << CODE;\r\nGameInput.KEYBOARD_P = KEYBOARD << DEVICE | 80 << CODE;\r\nGameInput.KEYBOARD_Q = KEYBOARD << DEVICE | 81 << CODE;\r\nGameInput.KEYBOARD_R = KEYBOARD << DEVICE | 82 << CODE;\r\nGameInput.KEYBOARD_S = KEYBOARD << DEVICE | 83 << CODE;\r\nGameInput.KEYBOARD_T = KEYBOARD << DEVICE | 84 << CODE;\r\nGameInput.KEYBOARD_U = KEYBOARD << DEVICE | 85 << CODE;\r\nGameInput.KEYBOARD_V = KEYBOARD << DEVICE | 86 << CODE;\r\nGameInput.KEYBOARD_W = KEYBOARD << DEVICE | 87 << CODE;\r\nGameInput.KEYBOARD_X = KEYBOARD << DEVICE | 88 << CODE;\r\nGameInput.KEYBOARD_Y = KEYBOARD << DEVICE | 89 << CODE;\r\nGameInput.KEYBOARD_Z = KEYBOARD << DEVICE | 90 << CODE;\r\n\r\nGameInput.KEYBOARD_0 = KEYBOARD << DEVICE | 48 << CODE;\r\nGameInput.KEYBOARD_1 = KEYBOARD << DEVICE | 49 << CODE;\r\nGameInput.KEYBOARD_2 = KEYBOARD << DEVICE | 50 << CODE;\r\nGameInput.KEYBOARD_3 = KEYBOARD << DEVICE | 51 << CODE;\r\nGameInput.KEYBOARD_4 = KEYBOARD << DEVICE | 52 << CODE;\r\nGameInput.KEYBOARD_5 = KEYBOARD << DEVICE | 53 << CODE;\r\nGameInput.KEYBOARD_6 = KEYBOARD << DEVICE | 54 << CODE;\r\nGameInput.KEYBOARD_7 = KEYBOARD << DEVICE | 55 << CODE;\r\nGameInput.KEYBOARD_8 = KEYBOARD << DEVICE | 56 << CODE;\r\nGameInput.KEYBOARD_9 = KEYBOARD << DEVICE | 57 << CODE;\r\n\r\nGameInput.KEYBOARD_UP    = KEYBOARD << DEVICE | 38 << CODE;\r\nGameInput.KEYBOARD_DOWN  = KEYBOARD << DEVICE | 40 << CODE;\r\nGameInput.KEYBOARD_LEFT  = KEYBOARD << DEVICE | 37 << CODE;\r\nGameInput.KEYBOARD_RIGHT = KEYBOARD << DEVICE | 39 << CODE;\r\nGameInput.KEYBOARD_SPACE = KEYBOARD << DEVICE | 32 << CODE;\r\nGameInput.KEYBOARD_SHIFT = KEYBOARD << DEVICE | 16 << CODE;\r\n\r\nGameInput.POINTER_UP    = POINTER << DEVICE | 0 << CODE;\r\nGameInput.POINTER_DOWN  = POINTER << DEVICE | 1 << CODE;\r\nGameInput.POINTER_LEFT  = POINTER << DEVICE | 2 << CODE;\r\nGameInput.POINTER_RIGHT = POINTER << DEVICE | 3 << CODE;\r\nGameInput.POINTER_PRESS = POINTER << DEVICE | 4 << CODE;\r\n\r\nGameInput.GAMEPAD_A       = GAMEPAD << DEVICE | 0  << CODE;\r\nGameInput.GAMEPAD_B       = GAMEPAD << DEVICE | 1  << CODE;\r\nGameInput.GAMEPAD_X       = GAMEPAD << DEVICE | 2  << CODE;\r\nGameInput.GAMEPAD_Y       = GAMEPAD << DEVICE | 3  << CODE;\r\nGameInput.GAMEPAD_LB      = GAMEPAD << DEVICE | 4  << CODE;\r\nGameInput.GAMEPAD_RB      = GAMEPAD << DEVICE | 5  << CODE;\r\nGameInput.GAMEPAD_LT      = GAMEPAD << DEVICE | 6  << CODE;\r\nGameInput.GAMEPAD_RT      = GAMEPAD << DEVICE | 7  << CODE;\r\nGameInput.GAMEPAD_START   = GAMEPAD << DEVICE | 8  << CODE;\r\nGameInput.GAMEPAD_SELECT  = GAMEPAD << DEVICE | 9  << CODE;\r\nGameInput.GAMEPAD_L       = GAMEPAD << DEVICE | 10 << CODE;\r\nGameInput.GAMEPAD_R       = GAMEPAD << DEVICE | 11 << CODE;\r\nGameInput.GAMEPAD_UP      = GAMEPAD << DEVICE | 12 << CODE;\r\nGameInput.GAMEPAD_DOWN    = GAMEPAD << DEVICE | 13 << CODE;\r\nGameInput.GAMEPAD_LEFT    = GAMEPAD << DEVICE | 14 << CODE;\r\nGameInput.GAMEPAD_RIGHT   = GAMEPAD << DEVICE | 15 << CODE;\r\nGameInput.GAMEPAD_L_UP    = GAMEPAD << DEVICE | 16 << CODE;\r\nGameInput.GAMEPAD_L_DOWN  = GAMEPAD << DEVICE | 17 << CODE;\r\nGameInput.GAMEPAD_L_LEFT  = GAMEPAD << DEVICE | 18 << CODE;\r\nGameInput.GAMEPAD_L_RIGHT = GAMEPAD << DEVICE | 19 << CODE;\r\nGameInput.GAMEPAD_R_UP    = GAMEPAD << DEVICE | 20 << CODE;\r\nGameInput.GAMEPAD_R_DOWN  = GAMEPAD << DEVICE | 21 << CODE;\r\nGameInput.GAMEPAD_R_LEFT  = GAMEPAD << DEVICE | 22 << CODE;\r\nGameInput.GAMEPAD_R_RIGHT = GAMEPAD << DEVICE | 23 << CODE;\r\n\r\nexport default GameInput;\r\n\r\n// Kick off input tracking\r\nexport function observe() {\r\n  // Add the event listeners.\r\n  addMouseListeners();\r\n  addTouchListeners();\r\n  addKeyboardListeners();\r\n\r\n  // Some UI actions we should prevent.\r\n  //window.addEventListener( \"contextmenu\", killEvent, true );\r\n  //window.addEventListener( \"selectstart\", killEvent, true );\r\n}\r\n\r\n// Update next tick - after this, checking inputs will be accurate within this frame\r\nexport function update() {\r\n  updatePointer();\r\n\r\n  var i        = __inputs.length;\r\n  var input    = null;\r\n  var channels = null;\r\n\r\n  while( i -- > 0 ) {\r\n    input    = __inputs[ i ];\r\n    channels = __channels[ i ];\r\n\r\n    if( input.enabled === true ) {\r\n      updateInput( input, channels );\r\n    }\r\n    else {\r\n      input.value = 0;\r\n    }\r\n  }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** d:/Projects/titan-2d/lib/Input.js\n **/","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../node_modules/css-loader/index.js!./../node_modules/autoprefixer-loader/index.js!./style.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../node_modules/css-loader/index.js!./../node_modules/autoprefixer-loader/index.js!./style.css\", function() {\n\t\t\tvar newContent = require(\"!!./../node_modules/css-loader/index.js!./../node_modules/autoprefixer-loader/index.js!./style.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/style-loader!./~/css-loader!./~/autoprefixer-loader!./examples/style.css\n ** module id = 5\n ** module chunks = 0\n **/","exports = module.exports = require(\"./../node_modules/css-loader/lib/css-base.js\")();\nexports.push([module.id, \"* {\\r\\n  box-sizing: border-box;\\r\\n}\\r\\n\\r\\nbody {\\r\\n  font-family: \\\"Helvetica Neue\\\", Arial, sans-serif;\\r\\n  margin: 0;\\r\\n}\\r\\n\\r\\ncanvas {\\r\\n  position: absolute;\\r\\n}\", \"\"]);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/css-loader!./~/autoprefixer-loader!./examples/style.css\n ** module id = 6\n ** module chunks = 0\n **/","/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\nvar stylesInDom = {},\r\n\tmemoize = function(fn) {\r\n\t\tvar memo;\r\n\t\treturn function () {\r\n\t\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\r\n\t\t\treturn memo;\r\n\t\t};\r\n\t},\r\n\tisOldIE = memoize(function() {\r\n\t\treturn /msie [6-9]\\b/.test(window.navigator.userAgent.toLowerCase());\r\n\t}),\r\n\tgetHeadElement = memoize(function () {\r\n\t\treturn document.head || document.getElementsByTagName(\"head\")[0];\r\n\t}),\r\n\tsingletonElement = null,\r\n\tsingletonCounter = 0;\r\n\r\nmodule.exports = function(list, options) {\r\n\tif(typeof DEBUG !== \"undefined\" && DEBUG) {\r\n\t\tif(typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\r\n\t}\r\n\r\n\toptions = options || {};\r\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\r\n\t// tags it will allow on a page\r\n\tif (typeof options.singleton === \"undefined\") options.singleton = isOldIE();\r\n\r\n\tvar styles = listToStyles(list);\r\n\taddStylesToDom(styles, options);\r\n\r\n\treturn function update(newList) {\r\n\t\tvar mayRemove = [];\r\n\t\tfor(var i = 0; i < styles.length; i++) {\r\n\t\t\tvar item = styles[i];\r\n\t\t\tvar domStyle = stylesInDom[item.id];\r\n\t\t\tdomStyle.refs--;\r\n\t\t\tmayRemove.push(domStyle);\r\n\t\t}\r\n\t\tif(newList) {\r\n\t\t\tvar newStyles = listToStyles(newList);\r\n\t\t\taddStylesToDom(newStyles, options);\r\n\t\t}\r\n\t\tfor(var i = 0; i < mayRemove.length; i++) {\r\n\t\t\tvar domStyle = mayRemove[i];\r\n\t\t\tif(domStyle.refs === 0) {\r\n\t\t\t\tfor(var j = 0; j < domStyle.parts.length; j++)\r\n\t\t\t\t\tdomStyle.parts[j]();\r\n\t\t\t\tdelete stylesInDom[domStyle.id];\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nfunction addStylesToDom(styles, options) {\r\n\tfor(var i = 0; i < styles.length; i++) {\r\n\t\tvar item = styles[i];\r\n\t\tvar domStyle = stylesInDom[item.id];\r\n\t\tif(domStyle) {\r\n\t\t\tdomStyle.refs++;\r\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\r\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\r\n\t\t\t}\r\n\t\t\tfor(; j < item.parts.length; j++) {\r\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tvar parts = [];\r\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\r\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\r\n\t\t\t}\r\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction listToStyles(list) {\r\n\tvar styles = [];\r\n\tvar newStyles = {};\r\n\tfor(var i = 0; i < list.length; i++) {\r\n\t\tvar item = list[i];\r\n\t\tvar id = item[0];\r\n\t\tvar css = item[1];\r\n\t\tvar media = item[2];\r\n\t\tvar sourceMap = item[3];\r\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\r\n\t\tif(!newStyles[id])\r\n\t\t\tstyles.push(newStyles[id] = {id: id, parts: [part]});\r\n\t\telse\r\n\t\t\tnewStyles[id].parts.push(part);\r\n\t}\r\n\treturn styles;\r\n}\r\n\r\nfunction createStyleElement() {\r\n\tvar styleElement = document.createElement(\"style\");\r\n\tvar head = getHeadElement();\r\n\tstyleElement.type = \"text/css\";\r\n\thead.appendChild(styleElement);\r\n\treturn styleElement;\r\n}\r\n\r\nfunction createLinkElement() {\r\n\tvar linkElement = document.createElement(\"link\");\r\n\tvar head = getHeadElement();\r\n\tlinkElement.rel = \"stylesheet\";\r\n\thead.appendChild(linkElement);\r\n\treturn linkElement;\r\n}\r\n\r\nfunction addStyle(obj, options) {\r\n\tvar styleElement, update, remove;\r\n\r\n\tif (options.singleton) {\r\n\t\tvar styleIndex = singletonCounter++;\r\n\t\tstyleElement = singletonElement || (singletonElement = createStyleElement());\r\n\t\tupdate = applyToSingletonTag.bind(null, styleElement, styleIndex, false);\r\n\t\tremove = applyToSingletonTag.bind(null, styleElement, styleIndex, true);\r\n\t} else if(obj.sourceMap &&\r\n\t\ttypeof URL === \"function\" &&\r\n\t\ttypeof URL.createObjectURL === \"function\" &&\r\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\r\n\t\ttypeof Blob === \"function\" &&\r\n\t\ttypeof btoa === \"function\") {\r\n\t\tstyleElement = createLinkElement();\r\n\t\tupdate = updateLink.bind(null, styleElement);\r\n\t\tremove = function() {\r\n\t\t\tstyleElement.parentNode.removeChild(styleElement);\r\n\t\t\tif(styleElement.href)\r\n\t\t\t\tURL.revokeObjectURL(styleElement.href);\r\n\t\t};\r\n\t} else {\r\n\t\tstyleElement = createStyleElement();\r\n\t\tupdate = applyToTag.bind(null, styleElement);\r\n\t\tremove = function() {\r\n\t\t\tstyleElement.parentNode.removeChild(styleElement);\r\n\t\t};\r\n\t}\r\n\r\n\tupdate(obj);\r\n\r\n\treturn function updateStyle(newObj) {\r\n\t\tif(newObj) {\r\n\t\t\tif(newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap)\r\n\t\t\t\treturn;\r\n\t\t\tupdate(obj = newObj);\r\n\t\t} else {\r\n\t\t\tremove();\r\n\t\t}\r\n\t};\r\n}\r\n\r\nvar replaceText = (function () {\r\n\tvar textStore = [];\r\n\r\n\treturn function (index, replacement) {\r\n\t\ttextStore[index] = replacement;\r\n\t\treturn textStore.filter(Boolean).join('\\n');\r\n\t};\r\n})();\r\n\r\nfunction applyToSingletonTag(styleElement, index, remove, obj) {\r\n\tvar css = remove ? \"\" : obj.css;\r\n\r\n\tif (styleElement.styleSheet) {\r\n\t\tstyleElement.styleSheet.cssText = replaceText(index, css);\r\n\t} else {\r\n\t\tvar cssNode = document.createTextNode(css);\r\n\t\tvar childNodes = styleElement.childNodes;\r\n\t\tif (childNodes[index]) styleElement.removeChild(childNodes[index]);\r\n\t\tif (childNodes.length) {\r\n\t\t\tstyleElement.insertBefore(cssNode, childNodes[index]);\r\n\t\t} else {\r\n\t\t\tstyleElement.appendChild(cssNode);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction applyToTag(styleElement, obj) {\r\n\tvar css = obj.css;\r\n\tvar media = obj.media;\r\n\tvar sourceMap = obj.sourceMap;\r\n\r\n\tif(media) {\r\n\t\tstyleElement.setAttribute(\"media\", media)\r\n\t}\r\n\r\n\tif(styleElement.styleSheet) {\r\n\t\tstyleElement.styleSheet.cssText = css;\r\n\t} else {\r\n\t\twhile(styleElement.firstChild) {\r\n\t\t\tstyleElement.removeChild(styleElement.firstChild);\r\n\t\t}\r\n\t\tstyleElement.appendChild(document.createTextNode(css));\r\n\t}\r\n}\r\n\r\nfunction updateLink(linkElement, obj) {\r\n\tvar css = obj.css;\r\n\tvar media = obj.media;\r\n\tvar sourceMap = obj.sourceMap;\r\n\r\n\tif(sourceMap) {\r\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(JSON.stringify(sourceMap)) + \" */\";\r\n\t}\r\n\r\n\tvar blob = new Blob([css], { type: \"text/css\" });\r\n\r\n\tvar oldSrc = linkElement.href;\r\n\r\n\tlinkElement.href = URL.createObjectURL(blob);\r\n\r\n\tif(oldSrc)\r\n\t\tURL.revokeObjectURL(oldSrc);\r\n}\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/style-loader/addStyles.js\n ** module id = 7\n ** module chunks = 0\n **/","/**\r\n* matter.js 0.8.0-edge 2015-01-21\r\n* http://brm.io/matter-js/\r\n* License: MIT\r\n*/\r\n\r\n/**\r\n * The MIT License (MIT)\r\n * \r\n * Copyright (c) 2014 Liam Brummitt\r\n * \r\n * Permission is hereby granted, free of charge, to any person obtaining a copy\r\n * of this software and associated documentation files (the \"Software\"), to deal\r\n * in the Software without restriction, including without limitation the rights\r\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n * copies of the Software, and to permit persons to whom the Software is\r\n * furnished to do so, subject to the following conditions:\r\n * \r\n * The above copyright notice and this permission notice shall be included in\r\n * all copies or substantial portions of the Software.\r\n * \r\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n * THE SOFTWARE.\r\n */\r\n\r\n(function() {\r\n\r\nvar Matter = {};\r\n\r\n// Begin Matter namespace closure\r\n\r\n// All Matter modules are included below during build\r\n// Outro.js then closes at the end of the file\r\n\r\n\r\n// Begin src/body/Body.js\r\n\r\n/**\r\n* The `Matter.Body` module contains methods for creating and manipulating body models.\r\n* A `Matter.Body` is a rigid body that can be simulated by a `Matter.Engine`.\r\n* Factories for commonly used body configurations (such as rectangles, circles and other polygons) can be found in the module `Matter.Bodies`.\r\n*\r\n* See [Demo.js](https://github.com/liabru/matter-js/blob/master/demo/js/Demo.js) \r\n* and [DemoMobile.js](https://github.com/liabru/matter-js/blob/master/demo/js/DemoMobile.js) for usage examples.\r\n\r\n* @class Body\r\n*/\r\n\r\nvar Body = {};\r\n\r\n(function() {\r\n\r\n    Body._inertiaScale = 4;\r\n\r\n    var _nextCollidingGroupId = 1,\r\n        _nextNonCollidingGroupId = -1,\r\n        _nextCategory = 0x0001;\r\n\r\n    /**\r\n     * Creates a new rigid body model. The options parameter is an object that specifies any properties you wish to override the defaults.\r\n     * All properties have default values, and many are pre-calculated automatically based on other properties.\r\n     * See the properites section below for detailed information on what you can pass via the `options` object.\r\n     * @method create\r\n     * @param {} options\r\n     * @return {body} body\r\n     */\r\n    Body.create = function(options) {\r\n        var defaults = {\r\n            id: Common.nextId(),\r\n            type: 'body',\r\n            label: 'Body',\r\n            angle: 0,\r\n            vertices: Vertices.fromPath('L 0 0 L 40 0 L 40 40 L 0 40'),\r\n            position: { x: 0, y: 0 },\r\n            force: { x: 0, y: 0 },\r\n            torque: 0,\r\n            positionImpulse: { x: 0, y: 0 },\r\n            constraintImpulse: { x: 0, y: 0, angle: 0 },\r\n            speed: 0,\r\n            angularSpeed: 0,\r\n            velocity: { x: 0, y: 0 },\r\n            angularVelocity: 0,\r\n            isStatic: false,\r\n            isSleeping: false,\r\n            motion: 0,\r\n            sleepThreshold: 60,\r\n            density: 0.001,\r\n            restitution: 0,\r\n            friction: 0.1,\r\n            frictionAir: 0.01,\r\n            collisionFilter: {\r\n                category: 0x0001,\r\n                mask: 0xFFFFFFFF,\r\n                group: 0\r\n            },\r\n            slop: 0.05,\r\n            timeScale: 1,\r\n            render: {\r\n                visible: true,\r\n                sprite: {\r\n                    xScale: 1,\r\n                    yScale: 1\r\n                },\r\n                lineWidth: 1.5\r\n            }\r\n        };\r\n\r\n        var body = Common.extend(defaults, options);\r\n\r\n        _initProperties(body, options);\r\n\r\n        return body;\r\n    };\r\n\r\n    /**\r\n     * Returns the next unique group index for which bodies will collide.\r\n     * If `isNonColliding` is `true`, returns the next unique group index for which bodies will _not_ collide.\r\n     * See `body.collisionFilter` for more information.\r\n     * @method nextGroup\r\n     * @param {bool} [isNonColliding=false]\r\n     * @return {Number} Unique group index\r\n     */\r\n    Body.nextGroup = function(isNonColliding) {\r\n        if (isNonColliding)\r\n            return _nextNonCollidingGroupId--;\r\n\r\n        return _nextCollidingGroupId++;\r\n    };\r\n\r\n    /**\r\n     * Returns the next unique category bitfield (starting after the initial default category `0x0001`).\r\n     * There are 32 available. See `body.collisionFilter` for more information.\r\n     * @method nextCategory\r\n     * @return {Number} Unique category bitfield\r\n     */\r\n    Body.nextCategory = function() {\r\n        _nextCategory = _nextCategory << 1;\r\n        return _nextCategory;\r\n    };\r\n\r\n    /**\r\n     * Initialises body properties.\r\n     * @method _initProperties\r\n     * @private\r\n     * @param {body} body\r\n     * @param {} options\r\n     */\r\n    var _initProperties = function(body, options) {\r\n        // init required properties\r\n        Body.set(body, {\r\n            bounds: body.bounds || Bounds.create(body.vertices),\r\n            positionPrev: body.positionPrev || Vector.clone(body.position),\r\n            anglePrev: body.anglePrev || body.angle,\r\n            vertices: body.vertices,\r\n            isStatic: body.isStatic,\r\n            isSleeping: body.isSleeping\r\n        });\r\n\r\n        Vertices.rotate(body.vertices, body.angle, body.position);\r\n        Axes.rotate(body.axes, body.angle);\r\n        Bounds.update(body.bounds, body.vertices, body.velocity);\r\n\r\n        // allow options to override the automatically calculated properties\r\n        Body.set(body, {\r\n            axes: options.axes || body.axes,\r\n            area: options.area || body.area,\r\n            mass: options.mass || body.mass,\r\n            inertia: options.inertia || body.inertia\r\n        });\r\n\r\n        // render properties\r\n        var defaultFillStyle = (body.isStatic ? '#eeeeee' : Common.choose(['#556270', '#4ECDC4', '#C7F464', '#FF6B6B', '#C44D58'])),\r\n            defaultStrokeStyle = Common.shadeColor(defaultFillStyle, -20);\r\n        body.render.fillStyle = body.render.fillStyle || defaultFillStyle;\r\n        body.render.strokeStyle = body.render.strokeStyle || defaultStrokeStyle;\r\n    };\r\n\r\n    /**\r\n     * Given a property and a value (or map of), sets the property(s) on the body, using the appropriate setter functions if they exist.\r\n     * Prefer to use the actual setter functions in performance critical situations.\r\n     * @method set\r\n     * @param {body} body\r\n     * @param {} settings A property name (or map of properties and values) to set on the body.\r\n     * @param {} value The value to set if `settings` is a single property name.\r\n     */\r\n    Body.set = function(body, settings, value) {\r\n        var property;\r\n\r\n        if (typeof settings === 'string') {\r\n            property = settings;\r\n            settings = {};\r\n            settings[property] = value;\r\n        }\r\n\r\n        for (property in settings) {\r\n            value = settings[property];\r\n\r\n            if (!settings.hasOwnProperty(property))\r\n                continue;\r\n\r\n            switch (property) {\r\n\r\n            case 'isStatic':\r\n                Body.setStatic(body, value);\r\n                break;\r\n            case 'isSleeping':\r\n                Sleeping.set(body, value);\r\n                break;\r\n            case 'mass':\r\n                Body.setMass(body, value);\r\n                break;\r\n            case 'density':\r\n                Body.setDensity(body, value);\r\n                break;\r\n            case 'inertia':\r\n                Body.setInertia(body, value);\r\n                break;\r\n            case 'vertices':\r\n                Body.setVertices(body, value);\r\n                break;\r\n            case 'position':\r\n                Body.setPosition(body, value);\r\n                break;\r\n            case 'angle':\r\n                Body.setAngle(body, value);\r\n                break;\r\n            case 'velocity':\r\n                Body.setVelocity(body, value);\r\n                break;\r\n            case 'angularVelocity':\r\n                Body.setAngularVelocity(body, value);\r\n                break;\r\n            default:\r\n                body[property] = value;\r\n\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Sets the body as static, including isStatic flag and setting mass and inertia to Infinity.\r\n     * @method setStatic\r\n     * @param {body} body\r\n     * @param {bool} isStatic\r\n     */\r\n    Body.setStatic = function(body, isStatic) {\r\n        body.isStatic = isStatic;\r\n\r\n        if (isStatic) {\r\n            body.restitution = 0;\r\n            body.friction = 1;\r\n            body.mass = body.inertia = body.density = Infinity;\r\n            body.inverseMass = body.inverseInertia = 0;\r\n\r\n            body.positionPrev.x = body.position.x;\r\n            body.positionPrev.y = body.position.y;\r\n            body.anglePrev = body.angle;\r\n            body.angularVelocity = 0;\r\n            body.speed = 0;\r\n            body.angularSpeed = 0;\r\n            body.motion = 0;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Sets the mass of the body. Inverse mass and density are automatically updated to reflect the change.\r\n     * @method setMass\r\n     * @param {body} body\r\n     * @param {number} mass\r\n     */\r\n    Body.setMass = function(body, mass) {\r\n        body.mass = mass;\r\n        body.inverseMass = 1 / body.mass;\r\n        body.density = body.mass / body.area;\r\n    };\r\n\r\n    /**\r\n     * Sets the density of the body. Mass is automatically updated to reflect the change.\r\n     * @method setDensity\r\n     * @param {body} body\r\n     * @param {number} density\r\n     */\r\n    Body.setDensity = function(body, density) {\r\n        Body.setMass(body, density * body.area);\r\n        body.density = density;\r\n    };\r\n\r\n    /**\r\n     * Sets the moment of inertia (i.e. second moment of area) of the body of the body. \r\n     * Inverse inertia is automatically updated to reflect the change. Mass is not changed.\r\n     * @method setInertia\r\n     * @param {body} body\r\n     * @param {number} inertia\r\n     */\r\n    Body.setInertia = function(body, inertia) {\r\n        body.inertia = inertia;\r\n        body.inverseInertia = 1 / body.inertia;\r\n    };\r\n\r\n    /**\r\n     * Sets the body's vertices and updates body properties accordingly, including inertia, area and mass (with respect to `body.density`).\r\n     * Vertices will be automatically transformed to be orientated around their centre of mass as the origin.\r\n     * They are then automatically translated to world space based on `body.position`.\r\n     *\r\n     * The `vertices` argument should be passed as an array of `Matter.Vector` points (or a `Matter.Vertices` array).\r\n     * Vertices must form a convex hull, concave hulls are not supported.\r\n     *\r\n     * @method setVertices\r\n     * @param {body} body\r\n     * @param {vector[]} vertices\r\n     */\r\n    Body.setVertices = function(body, vertices) {\r\n        // change vertices\r\n        if (vertices[0].body === body) {\r\n            body.vertices = vertices;\r\n        } else {\r\n            body.vertices = Vertices.create(vertices, body);\r\n        }\r\n\r\n        // update properties\r\n        body.axes = Axes.fromVertices(body.vertices);\r\n        body.area = Vertices.area(body.vertices);\r\n        Body.setMass(body, body.density * body.area);\r\n\r\n        // orient vertices around the centre of mass at origin (0, 0)\r\n        var centre = Vertices.centre(body.vertices);\r\n        Vertices.translate(body.vertices, centre, -1);\r\n\r\n        // update inertia while vertices are at origin (0, 0)\r\n        Body.setInertia(body, Body._inertiaScale * Vertices.inertia(body.vertices, body.mass));\r\n\r\n        // update geometry\r\n        Vertices.translate(body.vertices, body.position);\r\n        Bounds.update(body.bounds, body.vertices, body.velocity);\r\n    };\r\n\r\n    /**\r\n     * Sets the position of the body instantly. Velocity, angle, force etc. are unchanged.\r\n     * @method setPosition\r\n     * @param {body} body\r\n     * @param {vector} position\r\n     */\r\n    Body.setPosition = function(body, position) {\r\n        var delta = Vector.sub(position, body.position);\r\n\r\n        body.position.x = position.x;\r\n        body.position.y = position.y;\r\n        body.positionPrev.x += delta.x;\r\n        body.positionPrev.y += delta.y;\r\n\r\n        Vertices.translate(body.vertices, delta);\r\n        Bounds.update(body.bounds, body.vertices, body.velocity);\r\n    };\r\n\r\n    /**\r\n     * Sets the angle of the body instantly. Angular velocity, position, force etc. are unchanged.\r\n     * @method setAngle\r\n     * @param {body} body\r\n     * @param {number} angle\r\n     */\r\n    Body.setAngle = function(body, angle) {\r\n        var delta = angle - body.angle;\r\n\r\n        body.angle = angle;\r\n        body.anglePrev += delta;\r\n\r\n        Vertices.rotate(body.vertices, delta, body.position);\r\n        Axes.rotate(body.axes, delta);\r\n        Bounds.update(body.bounds, body.vertices, body.velocity);\r\n    };\r\n\r\n    /**\r\n     * Sets the linear velocity of the body instantly. Position, angle, force etc. are unchanged. See also `Body.applyForce`.\r\n     * @method setVelocity\r\n     * @param {body} body\r\n     * @param {vector} velocity\r\n     */\r\n    Body.setVelocity = function(body, velocity) {\r\n        body.positionPrev.x = body.position.x - velocity.x;\r\n        body.positionPrev.y = body.position.y - velocity.y;\r\n        body.velocity.x = velocity.x;\r\n        body.velocity.y = velocity.y;\r\n        body.speed = Vector.magnitude(body.velocity);\r\n    };\r\n\r\n    /**\r\n     * Sets the angular velocity of the body instantly. Position, angle, force etc. are unchanged. See also `Body.applyForce`.\r\n     * @method setAngularVelocity\r\n     * @param {body} body\r\n     * @param {number} velocity\r\n     */\r\n    Body.setAngularVelocity = function(body, velocity) {\r\n        body.anglePrev = body.angle - velocity;\r\n        body.angularVelocity = velocity;\r\n        body.angularSpeed = Math.abs(body.angularVelocity);\r\n    };\r\n\r\n    /**\r\n     * Moves a body by a given vector relative to its current position, without imparting any velocity.\r\n     * @method translate\r\n     * @param {body} body\r\n     * @param {vector} translation\r\n     */\r\n    Body.translate = function(body, translation) {\r\n        Body.setPosition(body, Vector.add(body.position, translation));\r\n    };\r\n\r\n    /**\r\n     * Rotates a body by a given angle relative to its current angle, without imparting any angular velocity.\r\n     * @method rotate\r\n     * @param {body} body\r\n     * @param {number} rotation\r\n     */\r\n    Body.rotate = function(body, rotation) {\r\n        Body.setAngle(body, body.angle + rotation);\r\n    };\r\n\r\n    /**\r\n     * Scales the body, including updating physical properties (mass, area, axes, inertia), from a world-space point (default is body centre).\r\n     * @method scale\r\n     * @param {body} body\r\n     * @param {number} scaleX\r\n     * @param {number} scaleY\r\n     * @param {vector} [point]\r\n     */\r\n    Body.scale = function(body, scaleX, scaleY, point) {\r\n        // scale vertices\r\n        Vertices.scale(body.vertices, scaleX, scaleY, point);\r\n\r\n        // update properties\r\n        body.axes = Axes.fromVertices(body.vertices);\r\n        body.area = Vertices.area(body.vertices);\r\n        Body.setMass(body, body.density * body.area);\r\n\r\n        // update inertia (requires vertices to be at origin)\r\n        Vertices.translate(body.vertices, { x: -body.position.x, y: -body.position.y });\r\n        Body.setInertia(body, Vertices.inertia(body.vertices, body.mass));\r\n        Vertices.translate(body.vertices, { x: body.position.x, y: body.position.y });\r\n\r\n        // update bounds\r\n        Bounds.update(body.bounds, body.vertices, body.velocity);\r\n    };\r\n\r\n    /**\r\n     * Performs a simulation step for the given `body`, including updating position and angle using Verlet integration.\r\n     * @method update\r\n     * @param {body} body\r\n     * @param {number} deltaTime\r\n     * @param {number} timeScale\r\n     * @param {number} correction\r\n     */\r\n    Body.update = function(body, deltaTime, timeScale, correction) {\r\n        var deltaTimeSquared = Math.pow(deltaTime * timeScale * body.timeScale, 2);\r\n\r\n        // from the previous step\r\n        var frictionAir = 1 - body.frictionAir * timeScale * body.timeScale,\r\n            velocityPrevX = body.position.x - body.positionPrev.x,\r\n            velocityPrevY = body.position.y - body.positionPrev.y;\r\n\r\n        // update velocity with verlet integration\r\n        body.velocity.x = (velocityPrevX * frictionAir * correction) + (body.force.x / body.mass) * deltaTimeSquared;\r\n        body.velocity.y = (velocityPrevY * frictionAir * correction) + (body.force.y / body.mass) * deltaTimeSquared;\r\n\r\n        body.positionPrev.x = body.position.x;\r\n        body.positionPrev.y = body.position.y;\r\n        body.position.x += body.velocity.x;\r\n        body.position.y += body.velocity.y;\r\n\r\n        // update angular velocity with verlet integration\r\n        body.angularVelocity = ((body.angle - body.anglePrev) * frictionAir * correction) + (body.torque / body.inertia) * deltaTimeSquared;\r\n        body.anglePrev = body.angle;\r\n        body.angle += body.angularVelocity;\r\n\r\n        // track speed and acceleration\r\n        body.speed = Vector.magnitude(body.velocity);\r\n        body.angularSpeed = Math.abs(body.angularVelocity);\r\n\r\n        // transform the body geometry\r\n        Vertices.translate(body.vertices, body.velocity);\r\n        if (body.angularVelocity !== 0) {\r\n            Vertices.rotate(body.vertices, body.angularVelocity, body.position);\r\n            Axes.rotate(body.axes, body.angularVelocity);\r\n        }\r\n        Bounds.update(body.bounds, body.vertices, body.velocity);\r\n    };\r\n\r\n    /**\r\n     * Applies a force to a body from a given world-space position, including resulting torque.\r\n     * @method applyForce\r\n     * @param {body} body\r\n     * @param {vector} position\r\n     * @param {vector} force\r\n     */\r\n    Body.applyForce = function(body, position, force) {\r\n        body.force.x += force.x;\r\n        body.force.y += force.y;\r\n        var offset = { x: position.x - body.position.x, y: position.y - body.position.y };\r\n        body.torque += (offset.x * force.y - offset.y * force.x) * body.inverseInertia;\r\n    };\r\n\r\n    /*\r\n    *\r\n    *  Properties Documentation\r\n    *\r\n    */\r\n\r\n    /**\r\n     * An integer `Number` uniquely identifying number generated in `Body.create` by `Common.nextId`.\r\n     *\r\n     * @property id\r\n     * @type number\r\n     */\r\n\r\n    /**\r\n     * A `String` denoting the type of object.\r\n     *\r\n     * @property type\r\n     * @type string\r\n     * @default \"body\"\r\n     */\r\n\r\n    /**\r\n     * An arbitrary `String` name to help the user identify and manage bodies.\r\n     *\r\n     * @property label\r\n     * @type string\r\n     * @default \"Body\"\r\n     */\r\n\r\n    /**\r\n     * A `Number` specifying the angle of the body, in radians.\r\n     *\r\n     * @property angle\r\n     * @type number\r\n     * @default 0\r\n     */\r\n\r\n    /**\r\n     * An array of `Vector` objects that specify the convex hull of the rigid body.\r\n     * These should be provided about the origin `(0, 0)`. E.g.\r\n     *\r\n     *     [{ x: 0, y: 0 }, { x: 25, y: 50 }, { x: 50, y: 0 }]\r\n     *\r\n     * When passed via `Body.create`, the verticies are translated relative to `body.position` (i.e. world-space, and constantly updated by `Body.update` during simulation).\r\n     * The `Vector` objects are also augmented with additional properties required for efficient collision detection. \r\n     *\r\n     * Other properties such as `inertia` and `bounds` are automatically calculated from the passed vertices (unless provided via `options`).\r\n     * Concave hulls are not currently supported. The module `Matter.Vertices` contains useful methods for working with vertices.\r\n     *\r\n     * @property vertices\r\n     * @type vector[]\r\n     */\r\n\r\n    /**\r\n     * A `Vector` that specifies the current world-space position of the body.\r\n     *\r\n     * @property position\r\n     * @type vector\r\n     * @default { x: 0, y: 0 }\r\n     */\r\n\r\n    /**\r\n     * A `Vector` that specifies the force to apply in the current step. It is zeroed after every `Body.update`. See also `Body.applyForce`.\r\n     *\r\n     * @property force\r\n     * @type vector\r\n     * @default { x: 0, y: 0 }\r\n     */\r\n\r\n    /**\r\n     * A `Number` that specifies the torque (turning force) to apply in the current step. It is zeroed after every `Body.update`.\r\n     *\r\n     * @property torque\r\n     * @type number\r\n     * @default 0\r\n     */\r\n\r\n    /**\r\n     * A `Number` that _measures_ the current speed of the body after the last `Body.update`. It is read-only and always positive (it's the magnitude of `body.velocity`).\r\n     *\r\n     * @readOnly\r\n     * @property speed\r\n     * @type number\r\n     * @default 0\r\n     */\r\n\r\n    /**\r\n     * A `Number` that _measures_ the current angular speed of the body after the last `Body.update`. It is read-only and always positive (it's the magnitude of `body.angularVelocity`).\r\n     *\r\n     * @readOnly\r\n     * @property angularSpeed\r\n     * @type number\r\n     * @default 0\r\n     */\r\n\r\n    /**\r\n     * A `Vector` that _measures_ the current velocity of the body after the last `Body.update`. It is read-only. \r\n     * If you need to modify a body's velocity directly, you should either apply a force or simply change the body's `position` (as the engine uses position-Verlet integration).\r\n     *\r\n     * @readOnly\r\n     * @property velocity\r\n     * @type vector\r\n     * @default { x: 0, y: 0 }\r\n     */\r\n\r\n    /**\r\n     * A `Number` that _measures_ the current angular velocity of the body after the last `Body.update`. It is read-only. \r\n     * If you need to modify a body's angular velocity directly, you should apply a torque or simply change the body's `angle` (as the engine uses position-Verlet integration).\r\n     *\r\n     * @readOnly\r\n     * @property angularVelocity\r\n     * @type number\r\n     * @default 0\r\n     */\r\n\r\n    /**\r\n     * A flag that indicates whether a body is considered static. A static body can never change position or angle and is completely fixed.\r\n     * If you need to set a body as static after its creation, you should use `Body.setStatic` as this requires more than just setting this flag.\r\n     *\r\n     * @property isStatic\r\n     * @type boolean\r\n     * @default false\r\n     */\r\n\r\n    /**\r\n     * A flag that indicates whether the body is considered sleeping. A sleeping body acts similar to a static body, except it is only temporary and can be awoken.\r\n     * If you need to set a body as sleeping, you should use `Sleeping.set` as this requires more than just setting this flag.\r\n     *\r\n     * @property isSleeping\r\n     * @type boolean\r\n     * @default false\r\n     */\r\n\r\n    /**\r\n     * A `Number` that _measures_ the amount of movement a body currently has (a combination of `speed` and `angularSpeed`). It is read-only and always positive.\r\n     * It is used and updated by the `Matter.Sleeping` module during simulation to decide if a body has come to rest.\r\n     *\r\n     * @readOnly\r\n     * @property motion\r\n     * @type number\r\n     * @default 0\r\n     */\r\n\r\n    /**\r\n     * A `Number` that defines the number of updates in which this body must have near-zero velocity before it is set as sleeping by the `Matter.Sleeping` module (if sleeping is enabled by the engine).\r\n     *\r\n     * @property sleepThreshold\r\n     * @type number\r\n     * @default 60\r\n     */\r\n\r\n    /**\r\n     * A `Number` that defines the density of the body, that is its mass per unit area.\r\n     * If you pass the density via `Body.create` the `mass` property is automatically calculated for you based on the size (area) of the object.\r\n     * This is generally preferable to simply setting mass and allows for more intuitive definition of materials (e.g. rock has a higher density than wood).\r\n     *\r\n     * @property density\r\n     * @type number\r\n     * @default 0.001\r\n     */\r\n\r\n    /**\r\n     * A `Number` that defines the mass of the body, although it may be more appropriate to specify the `density` property instead.\r\n     * If you modify this value, you must also modify the `body.inverseMass` property (`1 / mass`).\r\n     *\r\n     * @property mass\r\n     * @type number\r\n     */\r\n\r\n    /**\r\n     * A `Number` that defines the inverse mass of the body (`1 / mass`).\r\n     * If you modify this value, you must also modify the `body.mass` property.\r\n     *\r\n     * @property inverseMass\r\n     * @type number\r\n     */\r\n\r\n    /**\r\n     * A `Number` that defines the moment of inertia (i.e. second moment of area) of the body.\r\n     * It is automatically calculated from the given convex hull (`vertices` array) and density in `Body.create`.\r\n     * If you modify this value, you must also modify the `body.inverseInertia` property (`1 / inertia`).\r\n     *\r\n     * @property inertia\r\n     * @type number\r\n     */\r\n\r\n    /**\r\n     * A `Number` that defines the inverse moment of inertia of the body (`1 / inertia`).\r\n     * If you modify this value, you must also modify the `body.inertia` property.\r\n     *\r\n     * @property inverseInertia\r\n     * @type number\r\n     */\r\n\r\n    /**\r\n     * A `Number` that defines the restitution (elasticity) of the body. The value is always positive and is in the range `(0, 1)`.\r\n     * A value of `0` means collisions may be perfectly inelastic and no bouncing may occur. \r\n     * A value of `0.8` means the body may bounce back with approximately 80% of its kinetic energy.\r\n     * Note that collision response is based on _pairs_ of bodies, and that `restitution` values are _combined_ with the following formula:\r\n     *\r\n     *     Math.max(bodyA.restitution, bodyB.restitution)\r\n     *\r\n     * @property restitution\r\n     * @type number\r\n     * @default 0\r\n     */\r\n\r\n    /**\r\n     * A `Number` that defines the friction of the body. The value is always positive and is in the range `(0, 1)`.\r\n     * A value of `0` means that the body may slide indefinitely.\r\n     * A value of `1` means the body may come to a stop almost instantly after a force is applied.\r\n     *\r\n     * The effects of the value may be non-linear. \r\n     * High values may be unstable depending on the body.\r\n     * The engine uses a Coulomb friction model including static and kinetic friction.\r\n     * Note that collision response is based on _pairs_ of bodies, and that `friction` values are _combined_ with the following formula:\r\n     *\r\n     *     Math.min(bodyA.friction, bodyB.friction)\r\n     *\r\n     * @property friction\r\n     * @type number\r\n     * @default 0.1\r\n     */\r\n\r\n    /**\r\n     * A `Number` that defines the air friction of the body (air resistance). \r\n     * A value of `0` means the body will never slow as it moves through space.\r\n     * The higher the value, the faster a body slows when moving through space.\r\n     * The effects of the value are non-linear. \r\n     *\r\n     * @property frictionAir\r\n     * @type number\r\n     * @default 0.01\r\n     */\r\n\r\n    /**\r\n     * An `Object` that specifies the collision filtering properties of this body.\r\n     *\r\n     * Collisions between two bodies will obey the following rules:\r\n     * - If the two bodies have the same non-zero value of `collisionFilter.group`,\r\n     *   they will always collide if the value is positive, and they will never collide\r\n     *   if the value is negative.\r\n     * - If the two bodies have different values of `collisionFilter.group` or if one\r\n     *   (or both) of the bodies has a value of 0, then the category/mask rules apply as follows:\r\n     *\r\n     * Each body belongs to a collision category, given by `collisionFilter.category`. This\r\n     * value is used as a bit field and the category should have only one bit set, meaning that\r\n     * the value of this property is a power of two in the range [1, 2^31]. Thus, there are 32\r\n     * different collision categories available.\r\n     *\r\n     * Each body also defines a collision bitmask, given by `collisionFilter.mask` which specifies\r\n     * the categories it collides with (the value is the bitwise AND value of all these categories).\r\n     *\r\n     * Using the category/mask rules, two bodies `A` and `B` collide if each includes the other's\r\n     * category in its mask, i.e. `(categoryA & maskB) !== 0` and `(categoryB & maskA) !== 0`\r\n     * are both true.\r\n     *\r\n     * @property collisionFilter\r\n     * @type object\r\n     */\r\n\r\n    /**\r\n     * An Integer `Number`, that specifies the collision group this body belongs to.\r\n     * See `body.collisionFilter` for more information.\r\n     *\r\n     * @property collisionFilter.group\r\n     * @type object\r\n     * @default 0\r\n     */\r\n\r\n    /**\r\n     * A bit field that specifies the collision category this body belongs to.\r\n     * The category value should have only one bit set, for example `0x0001`.\r\n     * This means there are up to 32 unique collision categories available.\r\n     * See `body.collisionFilter` for more information.\r\n     *\r\n     * @property collisionFilter.category\r\n     * @type object\r\n     * @default 1\r\n     */\r\n\r\n    /**\r\n     * A bit mask that specifies the collision categories this body may collide with.\r\n     * See `body.collisionFilter` for more information.\r\n     *\r\n     * @property collisionFilter.mask\r\n     * @type object\r\n     * @default -1\r\n     */\r\n\r\n    /**\r\n     * A `Number` that specifies a tolerance on how far a body is allowed to 'sink' or rotate into other bodies.\r\n     * Avoid changing this value unless you understand the purpose of `slop` in physics engines.\r\n     * The default should generally suffice, although very large bodies may require larger values for stable stacking.\r\n     *\r\n     * @property slop\r\n     * @type number\r\n     * @default 0.05\r\n     */\r\n\r\n    /**\r\n     * A `Number` that allows per-body time scaling, e.g. a force-field where bodies inside are in slow-motion, while others are at full speed.\r\n     *\r\n     * @property timeScale\r\n     * @type number\r\n     * @default 1\r\n     */\r\n\r\n    /**\r\n     * An `Object` that defines the rendering properties to be consumed by the module `Matter.Render`.\r\n     *\r\n     * @property render\r\n     * @type object\r\n     */\r\n\r\n    /**\r\n     * A flag that indicates if the body should be rendered.\r\n     *\r\n     * @property render.visible\r\n     * @type boolean\r\n     * @default true\r\n     */\r\n\r\n    /**\r\n     * An `Object` that defines the sprite properties to use when rendering, if any.\r\n     *\r\n     * @property render.sprite\r\n     * @type object\r\n     */\r\n\r\n    /**\r\n     * An `String` that defines the path to the image to use as the sprite texture, if any.\r\n     *\r\n     * @property render.sprite.texture\r\n     * @type string\r\n     */\r\n     \r\n    /**\r\n     * A `Number` that defines the scaling in the x-axis for the sprite, if any.\r\n     *\r\n     * @property render.sprite.xScale\r\n     * @type number\r\n     * @default 1\r\n     */\r\n\r\n    /**\r\n     * A `Number` that defines the scaling in the y-axis for the sprite, if any.\r\n     *\r\n     * @property render.sprite.yScale\r\n     * @type number\r\n     * @default 1\r\n     */\r\n\r\n    /**\r\n     * A `Number` that defines the line width to use when rendering the body outline (if a sprite is not defined).\r\n     * A value of `0` means no outline will be rendered.\r\n     *\r\n     * @property render.lineWidth\r\n     * @type number\r\n     * @default 1.5\r\n     */\r\n\r\n    /**\r\n     * A `String` that defines the fill style to use when rendering the body (if a sprite is not defined).\r\n     * It is the same as when using a canvas, so it accepts CSS style property values.\r\n     *\r\n     * @property render.fillStyle\r\n     * @type string\r\n     * @default a random colour\r\n     */\r\n\r\n    /**\r\n     * A `String` that defines the stroke style to use when rendering the body outline (if a sprite is not defined).\r\n     * It is the same as when using a canvas, so it accepts CSS style property values.\r\n     *\r\n     * @property render.strokeStyle\r\n     * @type string\r\n     * @default a random colour\r\n     */\r\n\r\n    /**\r\n     * An array of unique axis vectors (edge normals) used for collision detection.\r\n     * These are automatically calculated from the given convex hull (`vertices` array) in `Body.create`.\r\n     * They are constantly updated by `Body.update` during the simulation.\r\n     *\r\n     * @property axes\r\n     * @type vector[]\r\n     */\r\n     \r\n    /**\r\n     * A `Number` that _measures_ the area of the body's convex hull, calculated at creation by `Body.create`.\r\n     *\r\n     * @property area\r\n     * @type string\r\n     * @default \r\n     */\r\n\r\n    /**\r\n     * A `Bounds` object that defines the AABB region for the body.\r\n     * It is automatically calculated from the given convex hull (`vertices` array) in `Body.create` and constantly updated by `Body.update` during simulation.\r\n     *\r\n     * @property bounds\r\n     * @type bounds\r\n     */\r\n\r\n})();\r\n\r\n\r\n;   // End src/body/Body.js\r\n\r\n\r\n// Begin src/body/Composite.js\r\n\r\n/**\r\n* The `Matter.Composite` module contains methods for creating and manipulating composite bodies.\r\n* A composite body is a collection of `Matter.Body`, `Matter.Constraint` and other `Matter.Composite`, therefore composites form a tree structure.\r\n* It is important to use the functions in this module to modify composites, rather than directly modifying their properties.\r\n* Note that the `Matter.World` object is also a type of `Matter.Composite` and as such all composite methods here can also operate on a `Matter.World`.\r\n*\r\n* See [Demo.js](https://github.com/liabru/matter-js/blob/master/demo/js/Demo.js) \r\n* and [DemoMobile.js](https://github.com/liabru/matter-js/blob/master/demo/js/DemoMobile.js) for usage examples.\r\n*\r\n* @class Composite\r\n*/\r\n\r\nvar Composite = {};\r\n\r\n(function() {\r\n\r\n    /**\r\n     * Creates a new composite. The options parameter is an object that specifies any properties you wish to override the defaults.\r\n     * See the properites section below for detailed information on what you can pass via the `options` object.\r\n     * @method create\r\n     * @param {} [options]\r\n     * @return {composite} A new composite\r\n     */\r\n    Composite.create = function(options) {\r\n        return Common.extend({ \r\n            id: Common.nextId(),\r\n            type: 'composite',\r\n            parent: null,\r\n            isModified: false,\r\n            bodies: [], \r\n            constraints: [], \r\n            composites: [],\r\n            label: 'Composite'\r\n        }, options);\r\n    };\r\n\r\n    /**\r\n     * Sets the composite's `isModified` flag. \r\n     * If `updateParents` is true, all parents will be set (default: false).\r\n     * If `updateChildren` is true, all children will be set (default: false).\r\n     * @method setModified\r\n     * @param {composite} composite\r\n     * @param {boolean} isModified\r\n     * @param {boolean} [updateParents=false]\r\n     * @param {boolean} [updateChildren=false]\r\n     */\r\n    Composite.setModified = function(composite, isModified, updateParents, updateChildren) {\r\n        composite.isModified = isModified;\r\n\r\n        if (updateParents && composite.parent) {\r\n            Composite.setModified(composite.parent, isModified, updateParents, updateChildren);\r\n        }\r\n\r\n        if (updateChildren) {\r\n            for(var i = 0; i < composite.composites.length; i++) {\r\n                var childComposite = composite.composites[i];\r\n                Composite.setModified(childComposite, isModified, updateParents, updateChildren);\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Generic add function. Adds one or many body(s), constraint(s) or a composite(s) to the given composite.\r\n     * Triggers `beforeAdd` and `afterAdd` events on the `composite`.\r\n     * @method add\r\n     * @param {composite} composite\r\n     * @param {} object\r\n     * @return {composite} The original composite with the objects added\r\n     */\r\n    Composite.add = function(composite, object) {\r\n        var objects = [].concat(object);\r\n\r\n        Events.trigger(composite, 'beforeAdd', { object: object });\r\n\r\n        for (var i = 0; i < objects.length; i++) {\r\n            var obj = objects[i];\r\n\r\n            switch (obj.type) {\r\n\r\n            case 'body':\r\n                Composite.addBody(composite, obj);\r\n                break;\r\n            case 'constraint':\r\n                Composite.addConstraint(composite, obj);\r\n                break;\r\n            case 'composite':\r\n                Composite.addComposite(composite, obj);\r\n                break;\r\n            case 'mouseConstraint':\r\n                Composite.addConstraint(composite, obj.constraint);\r\n                break;\r\n\r\n            }\r\n        }\r\n\r\n        Events.trigger(composite, 'afterAdd', { object: object });\r\n\r\n        return composite;\r\n    };\r\n\r\n    /**\r\n     * Generic remove function. Removes one or many body(s), constraint(s) or a composite(s) to the given composite.\r\n     * Optionally searching its children recursively.\r\n     * Triggers `beforeRemove` and `afterRemove` events on the `composite`.\r\n     * @method remove\r\n     * @param {composite} composite\r\n     * @param {} object\r\n     * @param {boolean} [deep=false]\r\n     * @return {composite} The original composite with the objects removed\r\n     */\r\n    Composite.remove = function(composite, object, deep) {\r\n        var objects = [].concat(object);\r\n\r\n        Events.trigger(composite, 'beforeRemove', { object: object });\r\n\r\n        for (var i = 0; i < objects.length; i++) {\r\n            var obj = objects[i];\r\n\r\n            switch (obj.type) {\r\n\r\n            case 'body':\r\n                Composite.removeBody(composite, obj, deep);\r\n                break;\r\n            case 'constraint':\r\n                Composite.removeConstraint(composite, obj, deep);\r\n                break;\r\n            case 'composite':\r\n                Composite.removeComposite(composite, obj, deep);\r\n                break;\r\n            case 'mouseConstraint':\r\n                Composite.removeConstraint(composite, obj.constraint);\r\n                break;\r\n\r\n            }\r\n        }\r\n\r\n        Events.trigger(composite, 'afterRemove', { object: object });\r\n\r\n        return composite;\r\n    };\r\n\r\n    /**\r\n     * Adds a composite to the given composite\r\n     * @private\r\n     * @method addComposite\r\n     * @param {composite} compositeA\r\n     * @param {composite} compositeB\r\n     * @return {composite} The original compositeA with the objects from compositeB added\r\n     */\r\n    Composite.addComposite = function(compositeA, compositeB) {\r\n        compositeA.composites.push(compositeB);\r\n        compositeB.parent = compositeA;\r\n        Composite.setModified(compositeA, true, true, false);\r\n        return compositeA;\r\n    };\r\n\r\n    /**\r\n     * Removes a composite from the given composite, and optionally searching its children recursively\r\n     * @private\r\n     * @method removeComposite\r\n     * @param {composite} compositeA\r\n     * @param {composite} compositeB\r\n     * @param {boolean} [deep=false]\r\n     * @return {composite} The original compositeA with the composite removed\r\n     */\r\n    Composite.removeComposite = function(compositeA, compositeB, deep) {\r\n        var position = Common.indexOf(compositeA.composites, compositeB);\r\n        if (position !== -1) {\r\n            Composite.removeCompositeAt(compositeA, position);\r\n            Composite.setModified(compositeA, true, true, false);\r\n        }\r\n\r\n        if (deep) {\r\n            for (var i = 0; i < compositeA.composites.length; i++){\r\n                Composite.removeComposite(compositeA.composites[i], compositeB, true);\r\n            }\r\n        }\r\n\r\n        return compositeA;\r\n    };\r\n\r\n    /**\r\n     * Removes a composite from the given composite\r\n     * @private\r\n     * @method removeCompositeAt\r\n     * @param {composite} composite\r\n     * @param {number} position\r\n     * @return {composite} The original composite with the composite removed\r\n     */\r\n    Composite.removeCompositeAt = function(composite, position) {\r\n        composite.composites.splice(position, 1);\r\n        Composite.setModified(composite, true, true, false);\r\n        return composite;\r\n    };\r\n\r\n    /**\r\n     * Adds a body to the given composite\r\n     * @private\r\n     * @method addBody\r\n     * @param {composite} composite\r\n     * @param {body} body\r\n     * @return {composite} The original composite with the body added\r\n     */\r\n    Composite.addBody = function(composite, body) {\r\n        composite.bodies.push(body);\r\n        Composite.setModified(composite, true, true, false);\r\n        return composite;\r\n    };\r\n\r\n    /**\r\n     * Removes a body from the given composite, and optionally searching its children recursively\r\n     * @private\r\n     * @method removeBody\r\n     * @param {composite} composite\r\n     * @param {body} body\r\n     * @param {boolean} [deep=false]\r\n     * @return {composite} The original composite with the body removed\r\n     */\r\n    Composite.removeBody = function(composite, body, deep) {\r\n        var position = Common.indexOf(composite.bodies, body);\r\n        if (position !== -1) {\r\n            Composite.removeBodyAt(composite, position);\r\n            Composite.setModified(composite, true, true, false);\r\n        }\r\n\r\n        if (deep) {\r\n            for (var i = 0; i < composite.composites.length; i++){\r\n                Composite.removeBody(composite.composites[i], body, true);\r\n            }\r\n        }\r\n\r\n        return composite;\r\n    };\r\n\r\n    /**\r\n     * Removes a body from the given composite\r\n     * @private\r\n     * @method removeBodyAt\r\n     * @param {composite} composite\r\n     * @param {number} position\r\n     * @return {composite} The original composite with the body removed\r\n     */\r\n    Composite.removeBodyAt = function(composite, position) {\r\n        composite.bodies.splice(position, 1);\r\n        Composite.setModified(composite, true, true, false);\r\n        return composite;\r\n    };\r\n\r\n    /**\r\n     * Adds a constraint to the given composite\r\n     * @private\r\n     * @method addConstraint\r\n     * @param {composite} composite\r\n     * @param {constraint} constraint\r\n     * @return {composite} The original composite with the constraint added\r\n     */\r\n    Composite.addConstraint = function(composite, constraint) {\r\n        composite.constraints.push(constraint);\r\n        Composite.setModified(composite, true, true, false);\r\n        return composite;\r\n    };\r\n\r\n    /**\r\n     * Removes a constraint from the given composite, and optionally searching its children recursively\r\n     * @private\r\n     * @method removeConstraint\r\n     * @param {composite} composite\r\n     * @param {constraint} constraint\r\n     * @param {boolean} [deep=false]\r\n     * @return {composite} The original composite with the constraint removed\r\n     */\r\n    Composite.removeConstraint = function(composite, constraint, deep) {\r\n        var position = Common.indexOf(composite.constraints, constraint);\r\n        if (position !== -1) {\r\n            Composite.removeConstraintAt(composite, position);\r\n        }\r\n\r\n        if (deep) {\r\n            for (var i = 0; i < composite.composites.length; i++){\r\n                Composite.removeConstraint(composite.composites[i], constraint, true);\r\n            }\r\n        }\r\n\r\n        return composite;\r\n    };\r\n\r\n    /**\r\n     * Removes a body from the given composite\r\n     * @private\r\n     * @method removeConstraintAt\r\n     * @param {composite} composite\r\n     * @param {number} position\r\n     * @return {composite} The original composite with the constraint removed\r\n     */\r\n    Composite.removeConstraintAt = function(composite, position) {\r\n        composite.constraints.splice(position, 1);\r\n        Composite.setModified(composite, true, true, false);\r\n        return composite;\r\n    };\r\n\r\n    /**\r\n     * Removes all bodies, constraints and composites from the given composite\r\n     * Optionally clearing its children recursively\r\n     * @method clear\r\n     * @param {world} world\r\n     * @param {boolean} keepStatic\r\n     * @param {boolean} [deep=false]\r\n     */\r\n    Composite.clear = function(composite, keepStatic, deep) {\r\n        if (deep) {\r\n            for (var i = 0; i < composite.composites.length; i++){\r\n                Composite.clear(composite.composites[i], keepStatic, true);\r\n            }\r\n        }\r\n        \r\n        if (keepStatic) {\r\n            composite.bodies = composite.bodies.filter(function(body) { return body.isStatic; });\r\n        } else {\r\n            composite.bodies.length = 0;\r\n        }\r\n\r\n        composite.constraints.length = 0;\r\n        composite.composites.length = 0;\r\n        Composite.setModified(composite, true, true, false);\r\n\r\n        return composite;\r\n    };\r\n\r\n    /**\r\n     * Returns all bodies in the given composite, including all bodies in its children, recursively\r\n     * @method allBodies\r\n     * @param {composite} composite\r\n     * @return {body[]} All the bodies\r\n     */\r\n    Composite.allBodies = function(composite) {\r\n        var bodies = [].concat(composite.bodies);\r\n\r\n        for (var i = 0; i < composite.composites.length; i++)\r\n            bodies = bodies.concat(Composite.allBodies(composite.composites[i]));\r\n\r\n        return bodies;\r\n    };\r\n\r\n    /**\r\n     * Returns all constraints in the given composite, including all constraints in its children, recursively\r\n     * @method allConstraints\r\n     * @param {composite} composite\r\n     * @return {constraint[]} All the constraints\r\n     */\r\n    Composite.allConstraints = function(composite) {\r\n        var constraints = [].concat(composite.constraints);\r\n\r\n        for (var i = 0; i < composite.composites.length; i++)\r\n            constraints = constraints.concat(Composite.allConstraints(composite.composites[i]));\r\n\r\n        return constraints;\r\n    };\r\n\r\n    /**\r\n     * Returns all composites in the given composite, including all composites in its children, recursively\r\n     * @method allComposites\r\n     * @param {composite} composite\r\n     * @return {composite[]} All the composites\r\n     */\r\n    Composite.allComposites = function(composite) {\r\n        var composites = [].concat(composite.composites);\r\n\r\n        for (var i = 0; i < composite.composites.length; i++)\r\n            composites = composites.concat(Composite.allComposites(composite.composites[i]));\r\n\r\n        return composites;\r\n    };\r\n\r\n    /**\r\n     * Searches the composite recursively for an object matching the type and id supplied, null if not found\r\n     * @method get\r\n     * @param {composite} composite\r\n     * @param {number} id\r\n     * @param {string} type\r\n     * @return {object} The requested object, if found\r\n     */\r\n    Composite.get = function(composite, id, type) {\r\n        var objects,\r\n            object;\r\n\r\n        switch (type) {\r\n        case 'body':\r\n            objects = Composite.allBodies(composite);\r\n            break;\r\n        case 'constraint':\r\n            objects = Composite.allConstraints(composite);\r\n            break;\r\n        case 'composite':\r\n            objects = Composite.allComposites(composite).concat(composite);\r\n            break;\r\n        }\r\n\r\n        if (!objects)\r\n            return null;\r\n\r\n        object = objects.filter(function(object) { \r\n            return object.id.toString() === id.toString(); \r\n        });\r\n\r\n        return object.length === 0 ? null : object[0];\r\n    };\r\n\r\n    /**\r\n     * Moves the given object(s) from compositeA to compositeB (equal to a remove followed by an add)\r\n     * @method move\r\n     * @param {compositeA} compositeA\r\n     * @param {object[]} objects\r\n     * @param {compositeB} compositeB\r\n     * @return {composite} Returns compositeA\r\n     */\r\n    Composite.move = function(compositeA, objects, compositeB) {\r\n        Composite.remove(compositeA, objects);\r\n        Composite.add(compositeB, objects);\r\n        return compositeA;\r\n    };\r\n\r\n    /**\r\n     * Assigns new ids for all objects in the composite, recursively\r\n     * @method rebase\r\n     * @param {composite} composite\r\n     * @return {composite} Returns composite\r\n     */\r\n    Composite.rebase = function(composite) {\r\n        var objects = Composite.allBodies(composite)\r\n                        .concat(Composite.allConstraints(composite))\r\n                        .concat(Composite.allComposites(composite));\r\n\r\n        for (var i = 0; i < objects.length; i++) {\r\n            objects[i].id = Common.nextId();\r\n        }\r\n\r\n        Composite.setModified(composite, true, true, false);\r\n\r\n        return composite;\r\n    };\r\n\r\n    /**\r\n     * Translates all children in the composite by a given vector relative to their current positions, \r\n     * without imparting any velocity.\r\n     * @method translate\r\n     * @param {composite} composite\r\n     * @param {vector} translation\r\n     * @param {bool} [recursive=true]\r\n     */\r\n    Composite.translate = function(composite, translation, recursive) {\r\n        var bodies = recursive ? Composite.allBodies(composite) : composite.bodies;\r\n\r\n        for (var i = 0; i < bodies.length; i++) {\r\n            Body.translate(bodies[i], translation);\r\n        }\r\n\r\n        Composite.setModified(composite, true, true, false);\r\n\r\n        return composite;\r\n    };\r\n\r\n    /**\r\n     * Rotates all children in the composite by a given angle about the given point, without imparting any angular velocity.\r\n     * @method rotate\r\n     * @param {composite} composite\r\n     * @param {number} rotation\r\n     * @param {vector} point\r\n     * @param {bool} [recursive=true]\r\n     */\r\n    Composite.rotate = function(composite, rotation, point, recursive) {\r\n        var cos = Math.cos(rotation),\r\n            sin = Math.sin(rotation),\r\n            bodies = recursive ? Composite.allBodies(composite) : composite.bodies;\r\n\r\n        for (var i = 0; i < bodies.length; i++) {\r\n            var body = bodies[i],\r\n                dx = body.position.x - point.x,\r\n                dy = body.position.y - point.y;\r\n                \r\n            Body.setPosition(body, {\r\n                x: point.x + (dx * cos - dy * sin),\r\n                y: point.y + (dx * sin + dy * cos)\r\n            });\r\n\r\n            Body.rotate(body, rotation);\r\n        }\r\n\r\n        Composite.setModified(composite, true, true, false);\r\n\r\n        return composite;\r\n    };\r\n\r\n    /**\r\n     * Scales all children in the composite, including updating physical properties (mass, area, axes, inertia), from a world-space point.\r\n     * @method scale\r\n     * @param {composite} composite\r\n     * @param {number} scaleX\r\n     * @param {number} scaleY\r\n     * @param {vector} point\r\n     * @param {bool} [recursive=true]\r\n     */\r\n    Composite.scale = function(composite, scaleX, scaleY, point, recursive) {\r\n        var bodies = recursive ? Composite.allBodies(composite) : composite.bodies;\r\n\r\n        for (var i = 0; i < bodies.length; i++) {\r\n            var body = bodies[i],\r\n                dx = body.position.x - point.x,\r\n                dy = body.position.y - point.y;\r\n                \r\n            Body.setPosition(body, {\r\n                x: point.x + dx * scaleX,\r\n                y: point.y + dy * scaleY\r\n            });\r\n\r\n            Body.scale(body, scaleX, scaleY);\r\n        }\r\n\r\n        Composite.setModified(composite, true, true, false);\r\n\r\n        return composite;\r\n    };\r\n\r\n    /*\r\n    *\r\n    *  Events Documentation\r\n    *\r\n    */\r\n\r\n    /**\r\n    * Fired when a call to `Composite.add` is made, before objects have been added.\r\n    *\r\n    * @event beforeAdd\r\n    * @param {} event An event object\r\n    * @param {} event.object The object(s) to be added (may be a single body, constraint, composite or a mixed array of these)\r\n    * @param {} event.source The source object of the event\r\n    * @param {} event.name The name of the event\r\n    */\r\n\r\n    /**\r\n    * Fired when a call to `Composite.add` is made, after objects have been added.\r\n    *\r\n    * @event afterAdd\r\n    * @param {} event An event object\r\n    * @param {} event.object The object(s) that have been added (may be a single body, constraint, composite or a mixed array of these)\r\n    * @param {} event.source The source object of the event\r\n    * @param {} event.name The name of the event\r\n    */\r\n\r\n    /**\r\n    * Fired when a call to `Composite.remove` is made, before objects have been removed.\r\n    *\r\n    * @event beforeRemove\r\n    * @param {} event An event object\r\n    * @param {} event.object The object(s) to be removed (may be a single body, constraint, composite or a mixed array of these)\r\n    * @param {} event.source The source object of the event\r\n    * @param {} event.name The name of the event\r\n    */\r\n\r\n    /**\r\n    * Fired when a call to `Composite.remove` is made, after objects have been removed.\r\n    *\r\n    * @event afterRemove\r\n    * @param {} event An event object\r\n    * @param {} event.object The object(s) that have been removed (may be a single body, constraint, composite or a mixed array of these)\r\n    * @param {} event.source The source object of the event\r\n    * @param {} event.name The name of the event\r\n    */\r\n\r\n    /*\r\n    *\r\n    *  Properties Documentation\r\n    *\r\n    */\r\n\r\n    /**\r\n     * An integer `Number` uniquely identifying number generated in `Composite.create` by `Common.nextId`.\r\n     *\r\n     * @property id\r\n     * @type number\r\n     */\r\n\r\n    /**\r\n     * A `String` denoting the type of object.\r\n     *\r\n     * @property type\r\n     * @type string\r\n     * @default \"composite\"\r\n     */\r\n\r\n    /**\r\n     * An arbitrary `String` name to help the user identify and manage composites.\r\n     *\r\n     * @property label\r\n     * @type string\r\n     * @default \"Composite\"\r\n     */\r\n\r\n    /**\r\n     * A flag that specifies whether the composite has been modified during the current step.\r\n     * Most `Matter.Composite` methods will automatically set this flag to `true` to inform the engine of changes to be handled.\r\n     * If you need to change it manually, you should use the `Composite.setModified` method.\r\n     *\r\n     * @property isModified\r\n     * @type boolean\r\n     * @default false\r\n     */\r\n\r\n    /**\r\n     * The `Composite` that is the parent of this composite. It is automatically managed by the `Matter.Composite` methods.\r\n     *\r\n     * @property parent\r\n     * @type composite\r\n     * @default null\r\n     */\r\n\r\n    /**\r\n     * An array of `Body` that are _direct_ children of this composite.\r\n     * To add or remove bodies you should use `Composite.add` and `Composite.remove` methods rather than directly modifying this property.\r\n     * If you wish to recursively find all descendants, you should use the `Composite.allBodies` method.\r\n     *\r\n     * @property bodies\r\n     * @type body[]\r\n     * @default []\r\n     */\r\n\r\n    /**\r\n     * An array of `Constraint` that are _direct_ children of this composite.\r\n     * To add or remove constraints you should use `Composite.add` and `Composite.remove` methods rather than directly modifying this property.\r\n     * If you wish to recursively find all descendants, you should use the `Composite.allConstraints` method.\r\n     *\r\n     * @property constraints\r\n     * @type constraint[]\r\n     * @default []\r\n     */\r\n\r\n    /**\r\n     * An array of `Composite` that are _direct_ children of this composite.\r\n     * To add or remove composites you should use `Composite.add` and `Composite.remove` methods rather than directly modifying this property.\r\n     * If you wish to recursively find all descendants, you should use the `Composite.allComposites` method.\r\n     *\r\n     * @property composites\r\n     * @type composite[]\r\n     * @default []\r\n     */\r\n\r\n})();\r\n\r\n;   // End src/body/Composite.js\r\n\r\n\r\n// Begin src/body/World.js\r\n\r\n/**\r\n* The `Matter.World` module contains methods for creating and manipulating the world composite.\r\n* A `Matter.World` is a `Matter.Composite` body, which is a collection of `Matter.Body`, `Matter.Constraint` and other `Matter.Composite`.\r\n* A `Matter.World` has a few additional properties including `gravity` and `bounds`.\r\n* It is important to use the functions in the `Matter.Composite` module to modify the world composite, rather than directly modifying its properties.\r\n* There are also a few methods here that alias those in `Matter.Composite` for easier readability.\r\n*\r\n* See [Demo.js](https://github.com/liabru/matter-js/blob/master/demo/js/Demo.js) \r\n* and [DemoMobile.js](https://github.com/liabru/matter-js/blob/master/demo/js/DemoMobile.js) for usage examples.\r\n*\r\n* @class World\r\n*/\r\n\r\nvar World = {};\r\n\r\n(function() {\r\n\r\n    /**\r\n     * Creates a new world composite. The options parameter is an object that specifies any properties you wish to override the defaults.\r\n     * See the properites section below for detailed information on what you can pass via the `options` object.\r\n     * @method create\r\n     * @constructor\r\n     * @param {} options\r\n     * @return {world} A new world\r\n     */\r\n    World.create = function(options) {\r\n        var composite = Composite.create();\r\n\r\n        var defaults = {\r\n            label: 'World',\r\n            gravity: { x: 0, y: 1 },\r\n            bounds: { \r\n                min: { x: 0, y: 0 }, \r\n                max: { x: 800, y: 600 } \r\n            }\r\n        };\r\n        \r\n        return Common.extend(composite, defaults, options);\r\n    };\r\n\r\n    // World is a Composite body\r\n    // see src/module/Outro.js for these aliases:\r\n    \r\n    /**\r\n     * An alias for Composite.clear since World is also a Composite\r\n     * @method clear\r\n     * @param {world} world\r\n     * @param {boolean} keepStatic\r\n     */\r\n\r\n    /**\r\n     * An alias for Composite.add since World is also a Composite\r\n     * @method addComposite\r\n     * @param {world} world\r\n     * @param {composite} composite\r\n     * @return {world} The original world with the objects from composite added\r\n     */\r\n    \r\n     /**\r\n      * An alias for Composite.addBody since World is also a Composite\r\n      * @method addBody\r\n      * @param {world} world\r\n      * @param {body} body\r\n      * @return {world} The original world with the body added\r\n      */\r\n\r\n     /**\r\n      * An alias for Composite.addConstraint since World is also a Composite\r\n      * @method addConstraint\r\n      * @param {world} world\r\n      * @param {constraint} constraint\r\n      * @return {world} The original world with the constraint added\r\n      */\r\n\r\n})();\r\n\r\n;   // End src/body/World.js\r\n\r\n\r\n// Begin src/collision/Contact.js\r\n\r\n/**\r\n* _Internal Class_, not generally used outside of the engine's internals.\r\n*\r\n* @class Contact\r\n*/\r\n\r\nvar Contact = {};\r\n\r\n(function() {\r\n\r\n    /**\r\n     * Description\r\n     * @method create\r\n     * @param {vertex} vertex\r\n     * @return {contact} A new contact\r\n     */\r\n    Contact.create = function(vertex) {\r\n        return {\r\n            id: Contact.id(vertex),\r\n            vertex: vertex,\r\n            normalImpulse: 0,\r\n            tangentImpulse: 0\r\n        };\r\n    };\r\n    \r\n    /**\r\n     * Description\r\n     * @method id\r\n     * @param {vertex} vertex\r\n     * @return {string} Unique contactID\r\n     */\r\n    Contact.id = function(vertex) {\r\n        return vertex.body.id + '_' + vertex.index;\r\n    };\r\n\r\n})();\r\n\r\n\r\n;   // End src/collision/Contact.js\r\n\r\n\r\n// Begin src/collision/Detector.js\r\n\r\n/**\r\n* _Internal Class_, not generally used outside of the engine's internals.\r\n*\r\n* @class Detector\r\n*/\r\n\r\n// TODO: speculative contacts\r\n\r\nvar Detector = {};\r\n\r\n(function() {\r\n\r\n    /**\r\n     * Description\r\n     * @method collisions\r\n     * @param {pair[]} broadphasePairs\r\n     * @param {engine} engine\r\n     * @return {array} collisions\r\n     */\r\n    Detector.collisions = function(broadphasePairs, engine) {\r\n        var collisions = [],\r\n            metrics = engine.metrics,\r\n            pairsTable = engine.pairs.table;\r\n\r\n        for (var i = 0; i < broadphasePairs.length; i++) {\r\n            var bodyA = broadphasePairs[i][0], \r\n                bodyB = broadphasePairs[i][1];\r\n\r\n            if ((bodyA.isStatic || bodyA.isSleeping) && (bodyB.isStatic || bodyB.isSleeping))\r\n                continue;\r\n            \r\n            if (!Detector.canCollide(bodyA.collisionFilter, bodyB.collisionFilter))\r\n                continue;\r\n\r\n            metrics.midphaseTests += 1;\r\n\r\n            // mid phase\r\n            if (Bounds.overlaps(bodyA.bounds, bodyB.bounds)) {\r\n\r\n                // find a previous collision we could reuse\r\n                var pairId = Pair.id(bodyA, bodyB),\r\n                    pair = pairsTable[pairId],\r\n                    previousCollision;\r\n\r\n                if (pair && pair.isActive) {\r\n                    previousCollision = pair.collision;\r\n                } else {\r\n                    previousCollision = null;\r\n                }\r\n\r\n                // narrow phase\r\n                var collision = SAT.collides(bodyA, bodyB, previousCollision);\r\n\r\n                metrics.narrowphaseTests += 1;\r\n\r\n                if (collision.reused)\r\n                    metrics.narrowReuseCount += 1;\r\n\r\n                if (collision.collided) {\r\n                    collisions.push(collision);\r\n                    metrics.narrowDetections += 1;\r\n                }\r\n            }\r\n        }\r\n\r\n        return collisions;\r\n    };\r\n\r\n    /**\r\n     * Description\r\n     * @method bruteForce\r\n     * @param {body[]} bodies\r\n     * @param {engine} engine\r\n     * @return {array} collisions\r\n     */\r\n    Detector.bruteForce = function(bodies, engine) {\r\n        var collisions = [],\r\n            metrics = engine.metrics,\r\n            pairsTable = engine.pairs.table;\r\n\r\n        for (var i = 0; i < bodies.length; i++) {\r\n            for (var j = i + 1; j < bodies.length; j++) {\r\n                var bodyA = bodies[i], \r\n                    bodyB = bodies[j];\r\n\r\n                // NOTE: could share a function for the below, but may drop performance?\r\n\r\n                if ((bodyA.isStatic || bodyA.isSleeping) && (bodyB.isStatic || bodyB.isSleeping))\r\n                    continue;\r\n                \r\n                if (!Detector.canCollide(bodyA.collisionFilter, bodyB.collisionFilter))\r\n                    continue;\r\n\r\n                metrics.midphaseTests += 1;\r\n\r\n                // mid phase\r\n                if (Bounds.overlaps(bodyA.bounds, bodyB.bounds)) {\r\n\r\n                    // find a previous collision we could reuse\r\n                    var pairId = Pair.id(bodyA, bodyB),\r\n                        pair = pairsTable[pairId],\r\n                        previousCollision;\r\n\r\n                    if (pair && pair.isActive) {\r\n                        previousCollision = pair.collision;\r\n                    } else {\r\n                        previousCollision = null;\r\n                    }\r\n\r\n                    // narrow phase\r\n                    var collision = SAT.collides(bodyA, bodyB, previousCollision);\r\n\r\n                    metrics.narrowphaseTests += 1;\r\n\r\n                    if (collision.reused)\r\n                        metrics.narrowReuseCount += 1;\r\n\r\n                    if (collision.collided) {\r\n                        collisions.push(collision);\r\n                        metrics.narrowDetections += 1;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return collisions;\r\n    };\r\n\r\n    /**\r\n     * Returns `true` if both supplied collision filters will allow a collision to occur.\r\n     * See `body.collisionFilter` for more information.\r\n     * @method canCollide\r\n     * @param {} filterA\r\n     * @param {} filterB\r\n     * @return {bool} `true` if collision can occur\r\n     */\r\n    Detector.canCollide = function(filterA, filterB) {\r\n        if (filterA.group === filterB.group && filterA.group !== 0)\r\n            return filterA.group > 0;\r\n\r\n        return (filterA.mask & filterB.category) !== 0 && (filterB.mask & filterA.category) !== 0;\r\n    };\r\n\r\n})();\r\n\r\n\r\n;   // End src/collision/Detector.js\r\n\r\n\r\n// Begin src/collision/Grid.js\r\n\r\n/**\r\n* See [Demo.js](https://github.com/liabru/matter-js/blob/master/demo/js/Demo.js) \r\n* and [DemoMobile.js](https://github.com/liabru/matter-js/blob/master/demo/js/DemoMobile.js) for usage examples.\r\n*\r\n* @class Grid\r\n*/\r\n\r\nvar Grid = {};\r\n\r\n(function() {\r\n\r\n    /**\r\n     * Description\r\n     * @method create\r\n     * @param {} options\r\n     * @return {grid} A new grid\r\n     */\r\n    Grid.create = function(options) {\r\n        var defaults = {\r\n            controller: Grid,\r\n            detector: Detector.collisions,\r\n            buckets: {},\r\n            pairs: {},\r\n            pairsList: [],\r\n            bucketWidth: 48,\r\n            bucketHeight: 48\r\n        };\r\n\r\n        return Common.extend(defaults, options);\r\n    };\r\n\r\n    /**\r\n     * Description\r\n     * @method update\r\n     * @param {grid} grid\r\n     * @param {body[]} bodies\r\n     * @param {engine} engine\r\n     * @param {boolean} forceUpdate\r\n     */\r\n    Grid.update = function(grid, bodies, engine, forceUpdate) {\r\n        var i, col, row,\r\n            world = engine.world,\r\n            buckets = grid.buckets,\r\n            bucket,\r\n            bucketId,\r\n            metrics = engine.metrics,\r\n            gridChanged = false;\r\n\r\n        metrics.broadphaseTests = 0;\r\n\r\n        for (i = 0; i < bodies.length; i++) {\r\n            var body = bodies[i];\r\n\r\n            if (body.isSleeping && !forceUpdate)\r\n                continue;\r\n\r\n            // don't update out of world bodies\r\n            if (body.bounds.max.x < 0 || body.bounds.min.x > world.bounds.width\r\n                || body.bounds.max.y < 0 || body.bounds.min.y > world.bounds.height)\r\n                continue;\r\n\r\n            var newRegion = _getRegion(grid, body);\r\n\r\n            // if the body has changed grid region\r\n            if (!body.region || newRegion.id !== body.region.id || forceUpdate) {\r\n\r\n                metrics.broadphaseTests += 1;\r\n\r\n                if (!body.region || forceUpdate)\r\n                    body.region = newRegion;\r\n\r\n                var union = _regionUnion(newRegion, body.region);\r\n\r\n                // update grid buckets affected by region change\r\n                // iterate over the union of both regions\r\n                for (col = union.startCol; col <= union.endCol; col++) {\r\n                    for (row = union.startRow; row <= union.endRow; row++) {\r\n                        bucketId = _getBucketId(col, row);\r\n                        bucket = buckets[bucketId];\r\n\r\n                        var isInsideNewRegion = (col >= newRegion.startCol && col <= newRegion.endCol\r\n                                                && row >= newRegion.startRow && row <= newRegion.endRow);\r\n\r\n                        var isInsideOldRegion = (col >= body.region.startCol && col <= body.region.endCol\r\n                                                && row >= body.region.startRow && row <= body.region.endRow);\r\n\r\n                        // remove from old region buckets\r\n                        if (!isInsideNewRegion && isInsideOldRegion) {\r\n                            if (isInsideOldRegion) {\r\n                                if (bucket)\r\n                                    _bucketRemoveBody(grid, bucket, body);\r\n                            }\r\n                        }\r\n\r\n                        // add to new region buckets\r\n                        if (body.region === newRegion || (isInsideNewRegion && !isInsideOldRegion) || forceUpdate) {\r\n                            if (!bucket)\r\n                                bucket = _createBucket(buckets, bucketId);\r\n                            _bucketAddBody(grid, bucket, body);\r\n                        }\r\n                    }\r\n                }\r\n\r\n                // set the new region\r\n                body.region = newRegion;\r\n\r\n                // flag changes so we can update pairs\r\n                gridChanged = true;\r\n            }\r\n        }\r\n\r\n        // update pairs list only if pairs changed (i.e. a body changed region)\r\n        if (gridChanged)\r\n            grid.pairsList = _createActivePairsList(grid);\r\n    };\r\n\r\n    /**\r\n     * Description\r\n     * @method clear\r\n     * @param {grid} grid\r\n     */\r\n    Grid.clear = function(grid) {\r\n        grid.buckets = {};\r\n        grid.pairs = {};\r\n        grid.pairsList = [];\r\n    };\r\n\r\n    /**\r\n     * Description\r\n     * @method _regionUnion\r\n     * @private\r\n     * @param {} regionA\r\n     * @param {} regionB\r\n     * @return CallExpression\r\n     */\r\n    var _regionUnion = function(regionA, regionB) {\r\n        var startCol = Math.min(regionA.startCol, regionB.startCol),\r\n            endCol = Math.max(regionA.endCol, regionB.endCol),\r\n            startRow = Math.min(regionA.startRow, regionB.startRow),\r\n            endRow = Math.max(regionA.endRow, regionB.endRow);\r\n\r\n        return _createRegion(startCol, endCol, startRow, endRow);\r\n    };\r\n\r\n    /**\r\n     * Description\r\n     * @method _getRegion\r\n     * @private\r\n     * @param {} grid\r\n     * @param {} body\r\n     * @return CallExpression\r\n     */\r\n    var _getRegion = function(grid, body) {\r\n        var bounds = body.bounds,\r\n            startCol = Math.floor(bounds.min.x / grid.bucketWidth),\r\n            endCol = Math.floor(bounds.max.x / grid.bucketWidth),\r\n            startRow = Math.floor(bounds.min.y / grid.bucketHeight),\r\n            endRow = Math.floor(bounds.max.y / grid.bucketHeight);\r\n\r\n        return _createRegion(startCol, endCol, startRow, endRow);\r\n    };\r\n\r\n    /**\r\n     * Description\r\n     * @method _createRegion\r\n     * @private\r\n     * @param {} startCol\r\n     * @param {} endCol\r\n     * @param {} startRow\r\n     * @param {} endRow\r\n     * @return ObjectExpression\r\n     */\r\n    var _createRegion = function(startCol, endCol, startRow, endRow) {\r\n        return { \r\n            id: startCol + ',' + endCol + ',' + startRow + ',' + endRow,\r\n            startCol: startCol, \r\n            endCol: endCol, \r\n            startRow: startRow, \r\n            endRow: endRow \r\n        };\r\n    };\r\n\r\n    /**\r\n     * Description\r\n     * @method _getBucketId\r\n     * @private\r\n     * @param {} column\r\n     * @param {} row\r\n     * @return BinaryExpression\r\n     */\r\n    var _getBucketId = function(column, row) {\r\n        return column + ',' + row;\r\n    };\r\n\r\n    /**\r\n     * Description\r\n     * @method _createBucket\r\n     * @private\r\n     * @param {} buckets\r\n     * @param {} bucketId\r\n     * @return bucket\r\n     */\r\n    var _createBucket = function(buckets, bucketId) {\r\n        var bucket = buckets[bucketId] = [];\r\n        return bucket;\r\n    };\r\n\r\n    /**\r\n     * Description\r\n     * @method _bucketAddBody\r\n     * @private\r\n     * @param {} grid\r\n     * @param {} bucket\r\n     * @param {} body\r\n     */\r\n    var _bucketAddBody = function(grid, bucket, body) {\r\n        // add new pairs\r\n        for (var i = 0; i < bucket.length; i++) {\r\n            var bodyB = bucket[i];\r\n\r\n            if (body.id === bodyB.id || (body.isStatic && bodyB.isStatic))\r\n                continue;\r\n\r\n            // keep track of the number of buckets the pair exists in\r\n            // important for Grid.update to work\r\n            var pairId = Pair.id(body, bodyB),\r\n                pair = grid.pairs[pairId];\r\n\r\n            if (pair) {\r\n                pair[2] += 1;\r\n            } else {\r\n                grid.pairs[pairId] = [body, bodyB, 1];\r\n            }\r\n        }\r\n\r\n        // add to bodies (after pairs, otherwise pairs with self)\r\n        bucket.push(body);\r\n    };\r\n\r\n    /**\r\n     * Description\r\n     * @method _bucketRemoveBody\r\n     * @private\r\n     * @param {} grid\r\n     * @param {} bucket\r\n     * @param {} body\r\n     */\r\n    var _bucketRemoveBody = function(grid, bucket, body) {\r\n        // remove from bucket\r\n        bucket.splice(Common.indexOf(bucket, body), 1);\r\n\r\n        // update pair counts\r\n        for (var i = 0; i < bucket.length; i++) {\r\n            // keep track of the number of buckets the pair exists in\r\n            // important for _createActivePairsList to work\r\n            var bodyB = bucket[i],\r\n                pairId = Pair.id(body, bodyB),\r\n                pair = grid.pairs[pairId];\r\n\r\n            if (pair)\r\n                pair[2] -= 1;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Description\r\n     * @method _createActivePairsList\r\n     * @private\r\n     * @param {} grid\r\n     * @return pairs\r\n     */\r\n    var _createActivePairsList = function(grid) {\r\n        var pairKeys,\r\n            pair,\r\n            pairs = [];\r\n\r\n        // grid.pairs is used as a hashmap\r\n        pairKeys = Common.keys(grid.pairs);\r\n\r\n        // iterate over grid.pairs\r\n        for (var k = 0; k < pairKeys.length; k++) {\r\n            pair = grid.pairs[pairKeys[k]];\r\n\r\n            // if pair exists in at least one bucket\r\n            // it is a pair that needs further collision testing so push it\r\n            if (pair[2] > 0) {\r\n                pairs.push(pair);\r\n            } else {\r\n                delete grid.pairs[pairKeys[k]];\r\n            }\r\n        }\r\n\r\n        return pairs;\r\n    };\r\n    \r\n})();\r\n\r\n;   // End src/collision/Grid.js\r\n\r\n\r\n// Begin src/collision/Pair.js\r\n\r\n/**\r\n* _Internal Class_, not generally used outside of the engine's internals.\r\n*\r\n* @class Pair\r\n*/\r\n\r\nvar Pair = {};\r\n\r\n(function() {\r\n    \r\n    /**\r\n     * Description\r\n     * @method create\r\n     * @param {collision} collision\r\n     * @return {pair} A new pair\r\n     */\r\n    Pair.create = function(collision, timestamp) {\r\n        var bodyA = collision.bodyA,\r\n            bodyB = collision.bodyB;\r\n\r\n        var pair = {\r\n            id: Pair.id(bodyA, bodyB),\r\n            bodyA: bodyA,\r\n            bodyB: bodyB,\r\n            contacts: {},\r\n            activeContacts: [],\r\n            separation: 0,\r\n            isActive: true,\r\n            timeCreated: timestamp,\r\n            timeUpdated: timestamp,\r\n            inverseMass: bodyA.inverseMass + bodyB.inverseMass,\r\n            friction: Math.min(bodyA.friction, bodyB.friction),\r\n            restitution: Math.max(bodyA.restitution, bodyB.restitution),\r\n            slop: Math.max(bodyA.slop, bodyB.slop)\r\n        };\r\n\r\n        Pair.update(pair, collision, timestamp);\r\n\r\n        return pair;\r\n    };\r\n\r\n    /**\r\n     * Description\r\n     * @method update\r\n     * @param {pair} pair\r\n     * @param {collision} collision\r\n     */\r\n    Pair.update = function(pair, collision, timestamp) {\r\n        var contacts = pair.contacts,\r\n            supports = collision.supports,\r\n            activeContacts = pair.activeContacts;\r\n        \r\n        pair.collision = collision;\r\n        pair.inverseMass = collision.bodyA.inverseMass + collision.bodyB.inverseMass;\r\n        pair.friction = Math.min(collision.bodyA.friction, collision.bodyB.friction);\r\n        pair.restitution = Math.max(collision.bodyA.restitution, collision.bodyB.restitution);\r\n        pair.slop = Math.max(collision.bodyA.slop, collision.bodyB.slop);\r\n        activeContacts.length = 0;\r\n        \r\n        if (collision.collided) {\r\n            for (var i = 0; i < supports.length; i++) {\r\n                var support = supports[i],\r\n                    contactId = Contact.id(support),\r\n                    contact = contacts[contactId];\r\n\r\n                if (contact) {\r\n                    activeContacts.push(contact);\r\n                } else {\r\n                    activeContacts.push(contacts[contactId] = Contact.create(support));\r\n                }\r\n            }\r\n\r\n            pair.separation = collision.depth;\r\n            Pair.setActive(pair, true, timestamp);\r\n        } else {\r\n            if (pair.isActive === true)\r\n                Pair.setActive(pair, false, timestamp);\r\n        }\r\n    };\r\n    \r\n    /**\r\n     * Description\r\n     * @method setActive\r\n     * @param {pair} pair\r\n     * @param {bool} isActive\r\n     */\r\n    Pair.setActive = function(pair, isActive, timestamp) {\r\n        if (isActive) {\r\n            pair.isActive = true;\r\n            pair.timeUpdated = timestamp;\r\n        } else {\r\n            pair.isActive = false;\r\n            pair.activeContacts.length = 0;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Description\r\n     * @method id\r\n     * @param {body} bodyA\r\n     * @param {body} bodyB\r\n     * @return {string} Unique pairId\r\n     */\r\n    Pair.id = function(bodyA, bodyB) {\r\n        if (bodyA.id < bodyB.id) {\r\n            return bodyA.id + '_' + bodyB.id;\r\n        } else {\r\n            return bodyB.id + '_' + bodyA.id;\r\n        }\r\n    };\r\n\r\n})();\r\n\r\n\r\n;   // End src/collision/Pair.js\r\n\r\n\r\n// Begin src/collision/Pairs.js\r\n\r\n/**\r\n* _Internal Class_, not generally used outside of the engine's internals.\r\n*\r\n* @class Pairs\r\n*/\r\n\r\nvar Pairs = {};\r\n\r\n(function() {\r\n    \r\n    var _pairMaxIdleLife = 1000;\r\n\r\n    /**\r\n     * Creates a new pairs structure\r\n     * @method create\r\n     * @param {object} options\r\n     * @return {pairs} A new pairs structure\r\n     */\r\n    Pairs.create = function(options) {\r\n        return Common.extend({ \r\n            table: {},\r\n            list: [],\r\n            collisionStart: [],\r\n            collisionActive: [],\r\n            collisionEnd: []\r\n        }, options);\r\n    };\r\n\r\n    /**\r\n     * Description\r\n     * @method update\r\n     * @param {object} pairs\r\n     * @param {collision[]} collisions\r\n     */\r\n    Pairs.update = function(pairs, collisions, timestamp) {\r\n        var pairsList = pairs.list,\r\n            pairsTable = pairs.table,\r\n            collisionStart = pairs.collisionStart,\r\n            collisionEnd = pairs.collisionEnd,\r\n            collisionActive = pairs.collisionActive,\r\n            activePairIds = [],\r\n            collision,\r\n            pairId,\r\n            pair,\r\n            i;\r\n\r\n        // clear collision state arrays, but maintain old reference\r\n        collisionStart.length = 0;\r\n        collisionEnd.length = 0;\r\n        collisionActive.length = 0;\r\n\r\n        for (i = 0; i < collisions.length; i++) {\r\n            collision = collisions[i];\r\n\r\n            if (collision.collided) {\r\n                pairId = Pair.id(collision.bodyA, collision.bodyB);\r\n                activePairIds.push(pairId);\r\n\r\n                pair = pairsTable[pairId];\r\n                \r\n                if (pair) {\r\n                    // pair already exists (but may or may not be active)\r\n                    if (pair.isActive) {\r\n                        // pair exists and is active\r\n                        collisionActive.push(pair);\r\n                    } else {\r\n                        // pair exists but was inactive, so a collision has just started again\r\n                        collisionStart.push(pair);\r\n                    }\r\n\r\n                    // update the pair\r\n                    Pair.update(pair, collision, timestamp);\r\n                } else {\r\n                    // pair did not exist, create a new pair\r\n                    pair = Pair.create(collision, timestamp);\r\n                    pairsTable[pairId] = pair;\r\n\r\n                    // push the new pair\r\n                    collisionStart.push(pair);\r\n                    pairsList.push(pair);\r\n                }\r\n            }\r\n        }\r\n\r\n        // deactivate previously active pairs that are now inactive\r\n        for (i = 0; i < pairsList.length; i++) {\r\n            pair = pairsList[i];\r\n            if (pair.isActive && Common.indexOf(activePairIds, pair.id) === -1) {\r\n                Pair.setActive(pair, false, timestamp);\r\n                collisionEnd.push(pair);\r\n            }\r\n        }\r\n    };\r\n    \r\n    /**\r\n     * Description\r\n     * @method removeOld\r\n     * @param {object} pairs\r\n     */\r\n    Pairs.removeOld = function(pairs, timestamp) {\r\n        var pairsList = pairs.list,\r\n            pairsTable = pairs.table,\r\n            indexesToRemove = [],\r\n            pair,\r\n            collision,\r\n            pairIndex,\r\n            i;\r\n\r\n        for (i = 0; i < pairsList.length; i++) {\r\n            pair = pairsList[i];\r\n            collision = pair.collision;\r\n            \r\n            // never remove sleeping pairs\r\n            if (collision.bodyA.isSleeping || collision.bodyB.isSleeping) {\r\n                pair.timeUpdated = timestamp;\r\n                continue;\r\n            }\r\n\r\n            // if pair is inactive for too long, mark it to be removed\r\n            if (timestamp - pair.timeUpdated > _pairMaxIdleLife) {\r\n                indexesToRemove.push(i);\r\n            }\r\n        }\r\n\r\n        // remove marked pairs\r\n        for (i = 0; i < indexesToRemove.length; i++) {\r\n            pairIndex = indexesToRemove[i] - i;\r\n            pair = pairsList[pairIndex];\r\n            delete pairsTable[pair.id];\r\n            pairsList.splice(pairIndex, 1);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Clears the given pairs structure\r\n     * @method create\r\n     * @param {object} options\r\n     * @param {pairs} pairs\r\n     */\r\n    Pairs.clear = function(pairs) {\r\n        pairs.table = {};\r\n        pairs.list.length = 0;\r\n        pairs.collisionStart.length = 0;\r\n        pairs.collisionActive.length = 0;\r\n        pairs.collisionEnd.length = 0;\r\n        return pairs;\r\n    };\r\n\r\n})();\r\n\r\n;   // End src/collision/Pairs.js\r\n\r\n\r\n// Begin src/collision/Query.js\r\n\r\n/**\r\n* The `Matter.Query` module contains methods for performing collision queries.\r\n*\r\n* @class Query\r\n*/\r\n\r\nvar Query = {};\r\n\r\n(function() {\r\n\r\n    /**\r\n     * Casts a ray segment against a set of bodies and returns all collisions, ray width is optional. Intersection points are not provided.\r\n     * @method ray\r\n     * @param {body[]} bodies\r\n     * @param {vector} startPoint\r\n     * @param {vector} endPoint\r\n     * @param {number} [rayWidth]\r\n     * @return {object[]} Collisions\r\n     */\r\n    Query.ray = function(bodies, startPoint, endPoint, rayWidth) {\r\n        rayWidth = rayWidth || Number.MIN_VALUE;\r\n\r\n        var rayAngle = Vector.angle(startPoint, endPoint),\r\n            rayLength = Vector.magnitude(Vector.sub(startPoint, endPoint)),\r\n            rayX = (endPoint.x + startPoint.x) * 0.5,\r\n            rayY = (endPoint.y + startPoint.y) * 0.5,\r\n            ray = Bodies.rectangle(rayX, rayY, rayLength, rayWidth, { angle: rayAngle }),\r\n            collisions = [];\r\n\r\n        for (var i = 0; i < bodies.length; i++) {\r\n            var bodyA = bodies[i];\r\n\r\n            if (Bounds.overlaps(bodyA.bounds, ray.bounds)) {\r\n                var collision = SAT.collides(bodyA, ray);\r\n                if (collision.collided) {\r\n                    collision.body = collision.bodyA = collision.bodyB = bodyA;\r\n                    collisions.push(collision);\r\n                }\r\n            }\r\n        }\r\n\r\n        return collisions;\r\n    };\r\n\r\n    /**\r\n     * Returns all bodies whose bounds are inside (or outside if set) the given set of bounds, from the given set of bodies.\r\n     * @method region\r\n     * @param {body[]} bodies\r\n     * @param {bounds} bounds\r\n     * @param {bool} [outside=false]\r\n     * @return {body[]} The bodies matching the query\r\n     */\r\n    Query.region = function(bodies, bounds, outside) {\r\n        var result = [];\r\n\r\n        for (var i = 0; i < bodies.length; i++) {\r\n            var body = bodies[i],\r\n                overlaps = Bounds.overlaps(body.bounds, bounds);\r\n            if ((overlaps && !outside) || (!overlaps && outside))\r\n                result.push(body);\r\n        }\r\n\r\n        return result;\r\n    };\r\n\r\n})();\r\n\r\n;   // End src/collision/Query.js\r\n\r\n\r\n// Begin src/collision/Resolver.js\r\n\r\n/**\r\n* _Internal Class_, not generally used outside of the engine's internals.\r\n*\r\n* @class Resolver\r\n*/\r\n\r\nvar Resolver = {};\r\n\r\n(function() {\r\n\r\n    var _restingThresh = 4,\r\n        _positionDampen = 0.2,\r\n        _positionWarming = 0.6;\r\n\r\n    /**\r\n     * Description\r\n     * @method solvePosition\r\n     * @param {pair[]} pairs\r\n     * @param {number} timeScale\r\n     */\r\n    Resolver.solvePosition = function(pairs, timeScale) {\r\n        var i,\r\n            pair,\r\n            collision,\r\n            bodyA,\r\n            bodyB,\r\n            vertex,\r\n            vertexCorrected,\r\n            normal,\r\n            bodyBtoA;\r\n\r\n        // find impulses required to resolve penetration\r\n        for (i = 0; i < pairs.length; i++) {\r\n            pair = pairs[i];\r\n            \r\n            if (!pair.isActive)\r\n                continue;\r\n            \r\n            collision = pair.collision;\r\n            bodyA = collision.bodyA;\r\n            bodyB = collision.bodyB;\r\n            vertex = collision.supports[0];\r\n            vertexCorrected = collision.supportCorrected;\r\n            normal = collision.normal;\r\n\r\n            // get current separation between body edges involved in collision\r\n            bodyBtoA = Vector.sub(Vector.add(bodyB.positionImpulse, vertex), \r\n                                    Vector.add(bodyA.positionImpulse, vertexCorrected));\r\n\r\n            pair.separation = Vector.dot(normal, bodyBtoA);\r\n        }\r\n        \r\n        for (i = 0; i < pairs.length; i++) {\r\n            pair = pairs[i];\r\n            \r\n            if (!pair.isActive)\r\n                continue;\r\n            \r\n            collision = pair.collision;\r\n            bodyA = collision.bodyA;\r\n            bodyB = collision.bodyB;\r\n            normal = collision.normal;\r\n            positionImpulse = ((pair.separation * _positionDampen) - pair.slop) * timeScale;\r\n        \r\n            if (bodyA.isStatic || bodyB.isStatic)\r\n                positionImpulse *= 2;\r\n            \r\n            if (!(bodyA.isStatic || bodyA.isSleeping)) {\r\n                bodyA.positionImpulse.x += normal.x * positionImpulse;\r\n                bodyA.positionImpulse.y += normal.y * positionImpulse;\r\n            }\r\n\r\n            if (!(bodyB.isStatic || bodyB.isSleeping)) {\r\n                bodyB.positionImpulse.x -= normal.x * positionImpulse;\r\n                bodyB.positionImpulse.y -= normal.y * positionImpulse;\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Description\r\n     * @method postSolvePosition\r\n     * @param {body[]} bodies\r\n     */\r\n    Resolver.postSolvePosition = function(bodies) {\r\n        for (var i = 0; i < bodies.length; i++) {\r\n            var body = bodies[i];\r\n\r\n            if (body.positionImpulse.x !== 0 || body.positionImpulse.y !== 0) {\r\n                // move the body without changing velocity\r\n                body.position.x += body.positionImpulse.x;\r\n                body.position.y += body.positionImpulse.y;\r\n                body.positionPrev.x += body.positionImpulse.x;\r\n                body.positionPrev.y += body.positionImpulse.y;\r\n\r\n                // update body geometry\r\n                Vertices.translate(body.vertices, body.positionImpulse);\r\n                Bounds.update(body.bounds, body.vertices, body.velocity);\r\n                \r\n                // dampen accumulator to warm the next step\r\n                body.positionImpulse.x *= _positionWarming;\r\n                body.positionImpulse.y *= _positionWarming;\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Description\r\n     * @method preSolveVelocity\r\n     * @param {pair[]} pairs\r\n     */\r\n    Resolver.preSolveVelocity = function(pairs) {\r\n        var impulse = {},\r\n            i,\r\n            j,\r\n            pair,\r\n            contacts,\r\n            collision,\r\n            bodyA,\r\n            bodyB,\r\n            normal,\r\n            tangent,\r\n            contact,\r\n            contactVertex,\r\n            normalImpulse,\r\n            tangentImpulse,\r\n            offset;\r\n        \r\n        for (i = 0; i < pairs.length; i++) {\r\n            pair = pairs[i];\r\n            \r\n            if (!pair.isActive)\r\n                continue;\r\n            \r\n            contacts = pair.activeContacts;\r\n            collision = pair.collision;\r\n            bodyA = collision.bodyA;\r\n            bodyB = collision.bodyB;\r\n            normal = collision.normal;\r\n            tangent = collision.tangent;\r\n                \r\n            // resolve each contact\r\n            for (j = 0; j < contacts.length; j++) {\r\n                contact = contacts[j];\r\n                contactVertex = contact.vertex;\r\n                normalImpulse = contact.normalImpulse;\r\n                tangentImpulse = contact.tangentImpulse;\r\n                \r\n                // total impulse from contact\r\n                impulse.x = (normal.x * normalImpulse) + (tangent.x * tangentImpulse);\r\n                impulse.y = (normal.y * normalImpulse) + (tangent.y * tangentImpulse);\r\n                \r\n                // apply impulse from contact\r\n                if (!(bodyA.isStatic || bodyA.isSleeping)) {\r\n                    offset = Vector.sub(contactVertex, bodyA.position);\r\n                    bodyA.positionPrev.x += impulse.x * bodyA.inverseMass;\r\n                    bodyA.positionPrev.y += impulse.y * bodyA.inverseMass;\r\n                    bodyA.anglePrev += Vector.cross(offset, impulse) * bodyA.inverseInertia;\r\n                }\r\n\r\n                if (!(bodyB.isStatic || bodyB.isSleeping)) {\r\n                    offset = Vector.sub(contactVertex, bodyB.position);\r\n                    bodyB.positionPrev.x -= impulse.x * bodyB.inverseMass;\r\n                    bodyB.positionPrev.y -= impulse.y * bodyB.inverseMass;\r\n                    bodyB.anglePrev -= Vector.cross(offset, impulse) * bodyB.inverseInertia;\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Description\r\n     * @method solveVelocity\r\n     * @param {pair[]} pairs\r\n     */\r\n    Resolver.solveVelocity = function(pairs, timeScale) {\r\n        var impulse = {},\r\n            timeScaleSquared = timeScale * timeScale;\r\n        \r\n        for (var i = 0; i < pairs.length; i++) {\r\n            var pair = pairs[i];\r\n            \r\n            if (!pair.isActive)\r\n                continue;\r\n            \r\n            var collision = pair.collision,\r\n                bodyA = collision.bodyA,\r\n                bodyB = collision.bodyB,\r\n                normal = collision.normal,\r\n                tangent = collision.tangent,\r\n                contacts = pair.activeContacts,\r\n                contactShare = 1 / contacts.length;\r\n\r\n            // update body velocities\r\n            bodyA.velocity.x = bodyA.position.x - bodyA.positionPrev.x;\r\n            bodyA.velocity.y = bodyA.position.y - bodyA.positionPrev.y;\r\n            bodyB.velocity.x = bodyB.position.x - bodyB.positionPrev.x;\r\n            bodyB.velocity.y = bodyB.position.y - bodyB.positionPrev.y;\r\n            bodyA.angularVelocity = bodyA.angle - bodyA.anglePrev;\r\n            bodyB.angularVelocity = bodyB.angle - bodyB.anglePrev;\r\n\r\n            // resolve each contact\r\n            for (var j = 0; j < contacts.length; j++) {\r\n                var contact = contacts[j],\r\n                    contactVertex = contact.vertex,\r\n                    offsetA = Vector.sub(contactVertex, bodyA.position),\r\n                    offsetB = Vector.sub(contactVertex, bodyB.position),\r\n                    velocityPointA = Vector.add(bodyA.velocity, Vector.mult(Vector.perp(offsetA), bodyA.angularVelocity)),\r\n                    velocityPointB = Vector.add(bodyB.velocity, Vector.mult(Vector.perp(offsetB), bodyB.angularVelocity)), \r\n                    relativeVelocity = Vector.sub(velocityPointA, velocityPointB),\r\n                    normalVelocity = Vector.dot(normal, relativeVelocity);\r\n\r\n                var tangentVelocity = Vector.dot(tangent, relativeVelocity),\r\n                    tangentSpeed = Math.abs(tangentVelocity),\r\n                    tangentVelocityDirection = Common.sign(tangentVelocity);\r\n\r\n                // raw impulses\r\n                var normalImpulse = (1 + pair.restitution) * normalVelocity,\r\n                    normalForce = Common.clamp(pair.separation + normalVelocity, 0, 1);\r\n\r\n                // coulomb friction\r\n                var tangentImpulse = tangentVelocity;\r\n                if (tangentSpeed > normalForce * pair.friction * timeScaleSquared)\r\n                    tangentImpulse = normalForce * pair.friction * timeScaleSquared * tangentVelocityDirection;\r\n\r\n                // modify impulses accounting for mass, inertia and offset\r\n                var oAcN = Vector.cross(offsetA, normal),\r\n                    oBcN = Vector.cross(offsetB, normal),\r\n                    share = contactShare / (pair.inverseMass + bodyA.inverseInertia * oAcN * oAcN  + bodyB.inverseInertia * oBcN * oBcN);\r\n                normalImpulse *= share;\r\n                tangentImpulse *= share;\r\n                \r\n                // handle high velocity and resting collisions separately\r\n                if (normalVelocity < 0 && normalVelocity * normalVelocity > _restingThresh * timeScaleSquared) {\r\n                    // high velocity so clear cached contact impulse\r\n                    contact.normalImpulse = 0;\r\n                    contact.tangentImpulse = 0;\r\n                } else {\r\n                    // solve resting collision constraints using Erin Catto's method (GDC08)\r\n\r\n                    // impulse constraint, tends to 0\r\n                    var contactNormalImpulse = contact.normalImpulse;\r\n                    contact.normalImpulse = Math.min(contact.normalImpulse + normalImpulse, 0);\r\n                    normalImpulse = contact.normalImpulse - contactNormalImpulse;\r\n                    \r\n                    // tangent impulse, tends to -maxFriction or maxFriction\r\n                    var contactTangentImpulse = contact.tangentImpulse;\r\n                    contact.tangentImpulse = Common.clamp(contact.tangentImpulse + tangentImpulse, -tangentSpeed, tangentSpeed);\r\n                    tangentImpulse = contact.tangentImpulse - contactTangentImpulse;\r\n                }\r\n                \r\n                // total impulse from contact\r\n                impulse.x = (normal.x * normalImpulse) + (tangent.x * tangentImpulse);\r\n                impulse.y = (normal.y * normalImpulse) + (tangent.y * tangentImpulse);\r\n                \r\n                // apply impulse from contact\r\n                if (!(bodyA.isStatic || bodyA.isSleeping)) {\r\n                    bodyA.positionPrev.x += impulse.x * bodyA.inverseMass;\r\n                    bodyA.positionPrev.y += impulse.y * bodyA.inverseMass;\r\n                    bodyA.anglePrev += Vector.cross(offsetA, impulse) * bodyA.inverseInertia;\r\n                }\r\n\r\n                if (!(bodyB.isStatic || bodyB.isSleeping)) {\r\n                    bodyB.positionPrev.x -= impulse.x * bodyB.inverseMass;\r\n                    bodyB.positionPrev.y -= impulse.y * bodyB.inverseMass;\r\n                    bodyB.anglePrev -= Vector.cross(offsetB, impulse) * bodyB.inverseInertia;\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n})();\r\n\r\n;   // End src/collision/Resolver.js\r\n\r\n\r\n// Begin src/collision/SAT.js\r\n\r\n/**\r\n* _Internal Class_, not generally used outside of the engine's internals.\r\n*\r\n* @class SAT\r\n*/\r\n\r\n// TODO: true circles and curves\r\n\r\nvar SAT = {};\r\n\r\n(function() {\r\n\r\n    /**\r\n     * Description\r\n     * @method collides\r\n     * @param {body} bodyA\r\n     * @param {body} bodyB\r\n     * @param {collision} previousCollision\r\n     * @return {collision} collision\r\n     */\r\n    SAT.collides = function(bodyA, bodyB, previousCollision) {\r\n        var overlapAB,\r\n            overlapBA, \r\n            minOverlap,\r\n            collision,\r\n            prevCol = previousCollision,\r\n            canReusePrevCol = false;\r\n\r\n        if (prevCol) {\r\n            // estimate total motion\r\n            var motion = bodyA.speed * bodyA.speed + bodyA.angularSpeed * bodyA.angularSpeed\r\n                       + bodyB.speed * bodyB.speed + bodyB.angularSpeed * bodyB.angularSpeed;\r\n\r\n            // we may be able to (partially) reuse collision result \r\n            // but only safe if collision was resting\r\n            canReusePrevCol = prevCol && prevCol.collided && motion < 0.2;\r\n\r\n            // reuse collision object\r\n            collision = prevCol;\r\n        } else {\r\n            collision = { collided: false, bodyA: bodyA, bodyB: bodyB };\r\n        }\r\n\r\n        if (prevCol && canReusePrevCol) {\r\n            // if we can reuse the collision result\r\n            // we only need to test the previously found axis\r\n            var axes = [prevCol.bodyA.axes[prevCol.axisNumber]];\r\n\r\n            minOverlap = _overlapAxes(prevCol.bodyA.vertices, prevCol.bodyB.vertices, axes);\r\n            collision.reused = true;\r\n\r\n            if (minOverlap.overlap <= 0) {\r\n                collision.collided = false;\r\n                return collision;\r\n            }\r\n        } else {\r\n            // if we can't reuse a result, perform a full SAT test\r\n\r\n            overlapAB = _overlapAxes(bodyA.vertices, bodyB.vertices, bodyA.axes);\r\n\r\n            if (overlapAB.overlap <= 0) {\r\n                collision.collided = false;\r\n                return collision;\r\n            }\r\n\r\n            overlapBA = _overlapAxes(bodyB.vertices, bodyA.vertices, bodyB.axes);\r\n\r\n            if (overlapBA.overlap <= 0) {\r\n                collision.collided = false;\r\n                return collision;\r\n            }\r\n\r\n            if (overlapAB.overlap < overlapBA.overlap) {\r\n                minOverlap = overlapAB;\r\n                collision.bodyA = bodyA;\r\n                collision.bodyB = bodyB;\r\n            } else {\r\n                minOverlap = overlapBA;\r\n                collision.bodyA = bodyB;\r\n                collision.bodyB = bodyA;\r\n            }\r\n\r\n            // important for reuse later\r\n            collision.axisNumber = minOverlap.axisNumber;\r\n        }\r\n\r\n        collision.collided = true;\r\n        collision.normal = minOverlap.axis;\r\n        collision.depth = minOverlap.overlap;\r\n        \r\n        bodyA = collision.bodyA;\r\n        bodyB = collision.bodyB;\r\n\r\n        // ensure normal is facing away from bodyA\r\n        if (Vector.dot(collision.normal, Vector.sub(bodyB.position, bodyA.position)) > 0) \r\n            collision.normal = Vector.neg(collision.normal);\r\n\r\n        collision.tangent = Vector.perp(collision.normal);\r\n\r\n        collision.penetration = { \r\n            x: collision.normal.x * collision.depth, \r\n            y: collision.normal.y * collision.depth \r\n        };\r\n\r\n        // find support points, there is always either exactly one or two\r\n        var verticesB = _findSupports(bodyA, bodyB, collision.normal),\r\n            supports = collision.supports || [];\r\n        supports.length = 0;\r\n\r\n        // find the supports from bodyB that are inside bodyA\r\n        if (Vertices.contains(bodyA.vertices, verticesB[0]))\r\n            supports.push(verticesB[0]);\r\n\r\n        if (Vertices.contains(bodyA.vertices, verticesB[1]))\r\n            supports.push(verticesB[1]);\r\n\r\n        // find the supports from bodyA that are inside bodyB\r\n        if (supports.length < 2) {\r\n            var verticesA = _findSupports(bodyB, bodyA, Vector.neg(collision.normal));\r\n                \r\n            if (Vertices.contains(bodyB.vertices, verticesA[0]))\r\n                supports.push(verticesA[0]);\r\n\r\n            if (supports.length < 2 && Vertices.contains(bodyB.vertices, verticesA[1]))\r\n                supports.push(verticesA[1]);\r\n        }\r\n\r\n        // account for the edge case of overlapping but no vertex containment\r\n        if (supports.length < 2)\r\n            supports = [verticesB[0]];\r\n        \r\n        collision.supports = supports;\r\n        collision.supportCorrected = Vector.sub(supports[0], collision.penetration);\r\n\r\n        return collision;\r\n    };\r\n\r\n    /**\r\n     * Description\r\n     * @method _overlapAxes\r\n     * @private\r\n     * @param {} verticesA\r\n     * @param {} verticesB\r\n     * @param {} axes\r\n     * @return result\r\n     */\r\n    var _overlapAxes = function(verticesA, verticesB, axes) {\r\n        var projectionA = {}, \r\n            projectionB = {},\r\n            result = { overlap: Number.MAX_VALUE },\r\n            overlap,\r\n            axis;\r\n\r\n        for (var i = 0; i < axes.length; i++) {\r\n            axis = axes[i];\r\n\r\n            _projectToAxis(projectionA, verticesA, axis);\r\n            _projectToAxis(projectionB, verticesB, axis);\r\n\r\n            overlap = projectionA.min < projectionB.min \r\n                        ? projectionA.max - projectionB.min \r\n                        : projectionB.max - projectionA.min;\r\n\r\n            if (overlap <= 0) {\r\n                result.overlap = overlap;\r\n                return result;\r\n            }\r\n\r\n            if (overlap < result.overlap) {\r\n                result.overlap = overlap;\r\n                result.axis = axis;\r\n                result.axisNumber = i;\r\n            }\r\n        }\r\n\r\n        return result;\r\n    };\r\n\r\n    /**\r\n     * Description\r\n     * @method _projectToAxis\r\n     * @private\r\n     * @param {} projection\r\n     * @param {} vertices\r\n     * @param {} axis\r\n     */\r\n    var _projectToAxis = function(projection, vertices, axis) {\r\n        var min = Vector.dot(vertices[0], axis),\r\n            max = min;\r\n\r\n        for (var i = 1; i < vertices.length; i += 1) {\r\n            var dot = Vector.dot(vertices[i], axis);\r\n\r\n            if (dot > max) { \r\n                max = dot; \r\n            } else if (dot < min) { \r\n                min = dot; \r\n            }\r\n        }\r\n\r\n        projection.min = min;\r\n        projection.max = max;\r\n    };\r\n    \r\n    /**\r\n     * Description\r\n     * @method _findSupports\r\n     * @private\r\n     * @param {} bodyA\r\n     * @param {} bodyB\r\n     * @param {} normal\r\n     * @return ArrayExpression\r\n     */\r\n    var _findSupports = function(bodyA, bodyB, normal) {\r\n        var nearestDistance = Number.MAX_VALUE,\r\n            vertexToBody = { x: 0, y: 0 },\r\n            vertices = bodyB.vertices,\r\n            bodyAPosition = bodyA.position,\r\n            distance,\r\n            vertex,\r\n            vertexA = vertices[0],\r\n            vertexB = vertices[1];\r\n\r\n        // find closest vertex on bodyB\r\n        for (var i = 0; i < vertices.length; i++) {\r\n            vertex = vertices[i];\r\n            vertexToBody.x = vertex.x - bodyAPosition.x;\r\n            vertexToBody.y = vertex.y - bodyAPosition.y;\r\n            distance = -Vector.dot(normal, vertexToBody);\r\n\r\n            if (distance < nearestDistance) {\r\n                nearestDistance = distance;\r\n                vertexA = vertex;\r\n            }\r\n        }\r\n\r\n        // find next closest vertex using the two connected to it\r\n        var prevIndex = vertexA.index - 1 >= 0 ? vertexA.index - 1 : vertices.length - 1;\r\n        vertex = vertices[prevIndex];\r\n        vertexToBody.x = vertex.x - bodyAPosition.x;\r\n        vertexToBody.y = vertex.y - bodyAPosition.y;\r\n        nearestDistance = -Vector.dot(normal, vertexToBody);\r\n        vertexB = vertex;\r\n\r\n        var nextIndex = (vertexA.index + 1) % vertices.length;\r\n        vertex = vertices[nextIndex];\r\n        vertexToBody.x = vertex.x - bodyAPosition.x;\r\n        vertexToBody.y = vertex.y - bodyAPosition.y;\r\n        distance = -Vector.dot(normal, vertexToBody);\r\n        if (distance < nearestDistance) {\r\n            vertexB = vertex;\r\n        }\r\n\r\n        return [vertexA, vertexB];\r\n    };\r\n\r\n})();\r\n\r\n\r\n;   // End src/collision/SAT.js\r\n\r\n\r\n// Begin src/constraint/Constraint.js\r\n\r\n/**\r\n* The `Matter.Constraint` module contains methods for creating and manipulating constraints.\r\n* Constraints are used for specifying that a fixed distance must be maintained between two bodies (or a body and a fixed world-space position).\r\n* The stiffness of constraints can be modified to create springs or elastic.\r\n*\r\n* See [Demo.js](https://github.com/liabru/matter-js/blob/master/demo/js/Demo.js) \r\n* and [DemoMobile.js](https://github.com/liabru/matter-js/blob/master/demo/js/DemoMobile.js) for usage examples.\r\n*\r\n* @class Constraint\r\n*/\r\n\r\n// TODO: fix instabillity issues with torque\r\n// TODO: linked constraints\r\n// TODO: breakable constraints\r\n// TODO: collidable constraints\r\n// TODO: allow constrained bodies to sleep\r\n// TODO: handle 0 length constraints properly\r\n// TODO: impulse caching and warming\r\n\r\nvar Constraint = {};\r\n\r\n(function() {\r\n\r\n    var _minLength = 0.000001,\r\n        _minDifference = 0.001;\r\n\r\n    /**\r\n     * Creates a new constraint.\r\n     * All properties have default values, and many are pre-calculated automatically based on other properties.\r\n     * See the properites section below for detailed information on what you can pass via the `options` object.\r\n     * @method create\r\n     * @param {} options\r\n     * @return {constraint} constraint\r\n     */\r\n    Constraint.create = function(options) {\r\n        var constraint = options;\r\n\r\n        // if bodies defined but no points, use body centre\r\n        if (constraint.bodyA && !constraint.pointA)\r\n            constraint.pointA = { x: 0, y: 0 };\r\n        if (constraint.bodyB && !constraint.pointB)\r\n            constraint.pointB = { x: 0, y: 0 };\r\n\r\n        // calculate static length using initial world space points\r\n        var initialPointA = constraint.bodyA ? Vector.add(constraint.bodyA.position, constraint.pointA) : constraint.pointA,\r\n            initialPointB = constraint.bodyB ? Vector.add(constraint.bodyB.position, constraint.pointB) : constraint.pointB,\r\n            length = Vector.magnitude(Vector.sub(initialPointA, initialPointB));\r\n    \r\n        constraint.length = constraint.length || length || _minLength;\r\n\r\n        // render\r\n        var render = {\r\n            visible: true,\r\n            lineWidth: 2,\r\n            strokeStyle: '#666'\r\n        };\r\n        \r\n        constraint.render = Common.extend(render, constraint.render);\r\n\r\n        // option defaults\r\n        constraint.id = constraint.id || Common.nextId();\r\n        constraint.label = constraint.label || 'Constraint';\r\n        constraint.type = 'constraint';\r\n        constraint.stiffness = constraint.stiffness || 1;\r\n        constraint.angularStiffness = constraint.angularStiffness || 0;\r\n        constraint.angleA = constraint.bodyA ? constraint.bodyA.angle : constraint.angleA;\r\n        constraint.angleB = constraint.bodyB ? constraint.bodyB.angle : constraint.angleB;\r\n\r\n        return constraint;\r\n    };\r\n\r\n    /**\r\n     * Description\r\n     * @private\r\n     * @method solveAll\r\n     * @param {constraint[]} constraints\r\n     * @param {number} timeScale\r\n     */\r\n    Constraint.solveAll = function(constraints, timeScale) {\r\n        for (var i = 0; i < constraints.length; i++) {\r\n            Constraint.solve(constraints[i], timeScale);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Description\r\n     * @private\r\n     * @method solve\r\n     * @param {constraint} constraint\r\n     * @param {number} timeScale\r\n     */\r\n    Constraint.solve = function(constraint, timeScale) {\r\n        var bodyA = constraint.bodyA,\r\n            bodyB = constraint.bodyB,\r\n            pointA = constraint.pointA,\r\n            pointB = constraint.pointB;\r\n\r\n        // update reference angle\r\n        if (bodyA && !bodyA.isStatic) {\r\n            constraint.pointA = Vector.rotate(pointA, bodyA.angle - constraint.angleA);\r\n            constraint.angleA = bodyA.angle;\r\n        }\r\n        \r\n        // update reference angle\r\n        if (bodyB && !bodyB.isStatic) {\r\n            constraint.pointB = Vector.rotate(pointB, bodyB.angle - constraint.angleB);\r\n            constraint.angleB = bodyB.angle;\r\n        }\r\n\r\n        var pointAWorld = pointA,\r\n            pointBWorld = pointB;\r\n\r\n        if (bodyA) pointAWorld = Vector.add(bodyA.position, pointA);\r\n        if (bodyB) pointBWorld = Vector.add(bodyB.position, pointB);\r\n\r\n        if (!pointAWorld || !pointBWorld)\r\n            return;\r\n\r\n        var delta = Vector.sub(pointAWorld, pointBWorld),\r\n            currentLength = Vector.magnitude(delta);\r\n\r\n        // prevent singularity\r\n        if (currentLength === 0)\r\n            currentLength = _minLength;\r\n\r\n        // solve distance constraint with Gauss-Siedel method\r\n        var difference = (currentLength - constraint.length) / currentLength,\r\n            normal = Vector.div(delta, currentLength),\r\n            force = Vector.mult(delta, difference * 0.5 * constraint.stiffness * timeScale * timeScale);\r\n        \r\n        // if difference is very small, we can skip\r\n        if (Math.abs(1 - (currentLength / constraint.length)) < _minDifference * timeScale)\r\n            return;\r\n\r\n        var velocityPointA,\r\n            velocityPointB,\r\n            offsetA,\r\n            offsetB,\r\n            oAn,\r\n            oBn,\r\n            bodyADenom,\r\n            bodyBDenom;\r\n    \r\n        if (bodyA && !bodyA.isStatic) {\r\n            // point body offset\r\n            offsetA = { \r\n                x: pointAWorld.x - bodyA.position.x + force.x, \r\n                y: pointAWorld.y - bodyA.position.y + force.y\r\n            };\r\n            \r\n            // update velocity\r\n            bodyA.velocity.x = bodyA.position.x - bodyA.positionPrev.x;\r\n            bodyA.velocity.y = bodyA.position.y - bodyA.positionPrev.y;\r\n            bodyA.angularVelocity = bodyA.angle - bodyA.anglePrev;\r\n            \r\n            // find point velocity and body mass\r\n            velocityPointA = Vector.add(bodyA.velocity, Vector.mult(Vector.perp(offsetA), bodyA.angularVelocity));\r\n            oAn = Vector.dot(offsetA, normal);\r\n            bodyADenom = bodyA.inverseMass + bodyA.inverseInertia * oAn * oAn;\r\n        } else {\r\n            velocityPointA = { x: 0, y: 0 };\r\n            bodyADenom = bodyA ? bodyA.inverseMass : 0;\r\n        }\r\n            \r\n        if (bodyB && !bodyB.isStatic) {\r\n            // point body offset\r\n            offsetB = { \r\n                x: pointBWorld.x - bodyB.position.x - force.x, \r\n                y: pointBWorld.y - bodyB.position.y - force.y \r\n            };\r\n            \r\n            // update velocity\r\n            bodyB.velocity.x = bodyB.position.x - bodyB.positionPrev.x;\r\n            bodyB.velocity.y = bodyB.position.y - bodyB.positionPrev.y;\r\n            bodyB.angularVelocity = bodyB.angle - bodyB.anglePrev;\r\n\r\n            // find point velocity and body mass\r\n            velocityPointB = Vector.add(bodyB.velocity, Vector.mult(Vector.perp(offsetB), bodyB.angularVelocity));\r\n            oBn = Vector.dot(offsetB, normal);\r\n            bodyBDenom = bodyB.inverseMass + bodyB.inverseInertia * oBn * oBn;\r\n        } else {\r\n            velocityPointB = { x: 0, y: 0 };\r\n            bodyBDenom = bodyB ? bodyB.inverseMass : 0;\r\n        }\r\n        \r\n        var relativeVelocity = Vector.sub(velocityPointB, velocityPointA),\r\n            normalImpulse = Vector.dot(normal, relativeVelocity) / (bodyADenom + bodyBDenom);\r\n    \r\n        if (normalImpulse > 0) normalImpulse = 0;\r\n    \r\n        var normalVelocity = {\r\n            x: normal.x * normalImpulse, \r\n            y: normal.y * normalImpulse\r\n        };\r\n\r\n        var torque;\r\n \r\n        if (bodyA && !bodyA.isStatic) {\r\n            torque = Vector.cross(offsetA, normalVelocity) * bodyA.inverseInertia * (1 - constraint.angularStiffness);\r\n\r\n            Sleeping.set(bodyA, false);\r\n            \r\n            // clamp to prevent instabillity\r\n            // TODO: solve this properlly\r\n            torque = Common.clamp(torque, -0.01, 0.01);\r\n\r\n            // keep track of applied impulses for post solving\r\n            bodyA.constraintImpulse.x -= force.x;\r\n            bodyA.constraintImpulse.y -= force.y;\r\n            bodyA.constraintImpulse.angle += torque;\r\n\r\n            // apply forces\r\n            bodyA.position.x -= force.x;\r\n            bodyA.position.y -= force.y;\r\n            bodyA.angle += torque;\r\n        }\r\n\r\n        if (bodyB && !bodyB.isStatic) {\r\n            torque = Vector.cross(offsetB, normalVelocity) * bodyB.inverseInertia * (1 - constraint.angularStiffness);\r\n\r\n            Sleeping.set(bodyB, false);\r\n            \r\n            // clamp to prevent instabillity\r\n            // TODO: solve this properlly\r\n            torque = Common.clamp(torque, -0.01, 0.01);\r\n\r\n            // keep track of applied impulses for post solving\r\n            bodyB.constraintImpulse.x += force.x;\r\n            bodyB.constraintImpulse.y += force.y;\r\n            bodyB.constraintImpulse.angle -= torque;\r\n            \r\n            // apply forces\r\n            bodyB.position.x += force.x;\r\n            bodyB.position.y += force.y;\r\n            bodyB.angle -= torque;\r\n        }\r\n\r\n    };\r\n\r\n    /**\r\n     * Performs body updates required after solving constraints\r\n     * @private\r\n     * @method postSolveAll\r\n     * @param {body[]} bodies\r\n     */\r\n    Constraint.postSolveAll = function(bodies) {\r\n        for (var i = 0; i < bodies.length; i++) {\r\n            var body = bodies[i],\r\n                impulse = body.constraintImpulse;\r\n\r\n            // update geometry and reset\r\n            Vertices.translate(body.vertices, impulse);\r\n\r\n            if (impulse.angle !== 0) {\r\n                Vertices.rotate(body.vertices, impulse.angle, body.position);\r\n                Axes.rotate(body.axes, impulse.angle);\r\n                impulse.angle = 0;\r\n            }\r\n\r\n            Bounds.update(body.bounds, body.vertices);\r\n\r\n            impulse.x = 0;\r\n            impulse.y = 0;\r\n        }\r\n    };\r\n\r\n    /*\r\n    *\r\n    *  Properties Documentation\r\n    *\r\n    */\r\n\r\n    /**\r\n     * An integer `Number` uniquely identifying number generated in `Composite.create` by `Common.nextId`.\r\n     *\r\n     * @property id\r\n     * @type number\r\n     */\r\n\r\n    /**\r\n     * A `String` denoting the type of object.\r\n     *\r\n     * @property type\r\n     * @type string\r\n     * @default \"constraint\"\r\n     */\r\n\r\n    /**\r\n     * An arbitrary `String` name to help the user identify and manage bodies.\r\n     *\r\n     * @property label\r\n     * @type string\r\n     * @default \"Constraint\"\r\n     */\r\n\r\n    /**\r\n     * An `Object` that defines the rendering properties to be consumed by the module `Matter.Render`.\r\n     *\r\n     * @property render\r\n     * @type object\r\n     */\r\n\r\n    /**\r\n     * A flag that indicates if the constraint should be rendered.\r\n     *\r\n     * @property render.visible\r\n     * @type boolean\r\n     * @default true\r\n     */\r\n\r\n    /**\r\n     * A `Number` that defines the line width to use when rendering the constraint outline.\r\n     * A value of `0` means no outline will be rendered.\r\n     *\r\n     * @property render.lineWidth\r\n     * @type number\r\n     * @default 2\r\n     */\r\n\r\n    /**\r\n     * A `String` that defines the stroke style to use when rendering the constraint outline.\r\n     * It is the same as when using a canvas, so it accepts CSS style property values.\r\n     *\r\n     * @property render.strokeStyle\r\n     * @type string\r\n     * @default a random colour\r\n     */\r\n\r\n    /**\r\n     * The first possible `Body` that this constraint is attached to.\r\n     *\r\n     * @property bodyA\r\n     * @type body\r\n     * @default null\r\n     */\r\n\r\n    /**\r\n     * The second possible `Body` that this constraint is attached to.\r\n     *\r\n     * @property bodyB\r\n     * @type body\r\n     * @default null\r\n     */\r\n\r\n    /**\r\n     * A `Vector` that specifies the offset of the constraint from center of the `constraint.bodyA` if defined, otherwise a world-space position.\r\n     *\r\n     * @property pointA\r\n     * @type vector\r\n     * @default { x: 0, y: 0 }\r\n     */\r\n\r\n    /**\r\n     * A `Vector` that specifies the offset of the constraint from center of the `constraint.bodyA` if defined, otherwise a world-space position.\r\n     *\r\n     * @property pointB\r\n     * @type vector\r\n     * @default { x: 0, y: 0 }\r\n     */\r\n\r\n    /**\r\n     * A `Number` that specifies the stiffness of the constraint, i.e. the rate at which it returns to its resting `constraint.length`.\r\n     * A value of `1` means the constraint should be very stiff.\r\n     * A value of `0.2` means the constraint acts like a soft spring.\r\n     *\r\n     * @property stiffness\r\n     * @type number\r\n     * @default 1\r\n     */\r\n\r\n    /**\r\n     * A `Number` that specifies the target resting length of the constraint. \r\n     * It is calculated automatically in `Constraint.create` from intial positions of the `constraint.bodyA` and `constraint.bodyB`.\r\n     *\r\n     * @property length\r\n     * @type number\r\n     */\r\n\r\n})();\r\n\r\n;   // End src/constraint/Constraint.js\r\n\r\n\r\n// Begin src/constraint/MouseConstraint.js\r\n\r\n/**\r\n* The `Matter.MouseConstraint` module contains methods for creating mouse constraints.\r\n* Mouse constraints are used for allowing user interaction, providing the ability to move bodies via the mouse or touch.\r\n*\r\n* See [Demo.js](https://github.com/liabru/matter-js/blob/master/demo/js/Demo.js) \r\n* and [DemoMobile.js](https://github.com/liabru/matter-js/blob/master/demo/js/DemoMobile.js) for usage examples.\r\n*\r\n* @class MouseConstraint\r\n*/\r\n\r\nvar MouseConstraint = {};\r\n\r\n(function() {\r\n\r\n    /**\r\n     * Creates a new mouse constraint.\r\n     * All properties have default values, and many are pre-calculated automatically based on other properties.\r\n     * See the properites section below for detailed information on what you can pass via the `options` object.\r\n     * @method create\r\n     * @param {engine} engine\r\n     * @param {} options\r\n     * @return {MouseConstraint} A new MouseConstraint\r\n     */\r\n    MouseConstraint.create = function(engine, options) {\r\n        var mouse = (engine ? engine.mouse : null) || (options ? options.mouse : null);\r\n\r\n        if (!mouse && engine && engine.render && engine.render.canvas) {\r\n            mouse = Mouse.create(engine.render.canvas);\r\n        } else {\r\n            mouse = Mouse.create();\r\n            Common.log('MouseConstraint.create: options.mouse was undefined, engine.render.canvas was undefined, may not function as expected', 'warn');\r\n        }\r\n\r\n        var constraint = Constraint.create({ \r\n            label: 'Mouse Constraint',\r\n            pointA: mouse.position,\r\n            pointB: { x: 0, y: 0 },\r\n            length: 0.01, \r\n            stiffness: 0.1,\r\n            angularStiffness: 1,\r\n            render: {\r\n                strokeStyle: '#90EE90',\r\n                lineWidth: 3\r\n            }\r\n        });\r\n\r\n        var defaults = {\r\n            type: 'mouseConstraint',\r\n            mouse: mouse,\r\n            body: null,\r\n            constraint: constraint,\r\n            collisionFilter: {\r\n                category: 0x0001,\r\n                mask: 0xFFFFFFFF,\r\n                group: 0\r\n            }\r\n        };\r\n\r\n        var mouseConstraint = Common.extend(defaults, options);\r\n\r\n        Events.on(engine, 'tick', function() {\r\n            var allBodies = Composite.allBodies(engine.world);\r\n            MouseConstraint.update(mouseConstraint, allBodies);\r\n            _triggerEvents(mouseConstraint);\r\n        });\r\n\r\n        return mouseConstraint;\r\n    };\r\n\r\n    /**\r\n     * Updates the given mouse constraint.\r\n     * @private\r\n     * @method update\r\n     * @param {MouseConstraint} mouseConstraint\r\n     * @param {body[]} bodies\r\n     */\r\n    MouseConstraint.update = function(mouseConstraint, bodies) {\r\n        var mouse = mouseConstraint.mouse,\r\n            constraint = mouseConstraint.constraint,\r\n            body = mouseConstraint.body;\r\n\r\n        if (mouse.button === 0) {\r\n            if (!constraint.bodyB) {\r\n                for (var i = 0; i < bodies.length; i++) {\r\n                    body = bodies[i];\r\n                    if (Bounds.contains(body.bounds, mouse.position) \r\n                            && Vertices.contains(body.vertices, mouse.position)\r\n                            && Detector.canCollide(body.collisionFilter, mouseConstraint.collisionFilter)) {\r\n                       \r\n                        constraint.pointA = mouse.position;\r\n                        constraint.bodyB = mouseConstraint.body = body;\r\n                        constraint.pointB = { x: mouse.position.x - body.position.x, y: mouse.position.y - body.position.y };\r\n                        constraint.angleB = body.angle;\r\n\r\n                        Sleeping.set(body, false);\r\n                        Events.trigger(mouseConstraint, 'startdrag', { mouse: mouse, body: body });\r\n                    }\r\n                }\r\n            } else {\r\n                Sleeping.set(constraint.bodyB, false);\r\n                constraint.pointA = mouse.position;\r\n            }\r\n        } else {\r\n            constraint.bodyB = mouseConstraint.body = null;\r\n            constraint.pointB = null;\r\n\r\n            if (body)\r\n                Events.trigger(mouseConstraint, 'enddrag', { mouse: mouse, body: body });\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Triggers mouse constraint events\r\n     * @method _triggerEvents\r\n     * @private\r\n     * @param {mouse} mouse\r\n     */\r\n    var _triggerEvents = function(mouseConstraint) {\r\n        var mouse = mouseConstraint.mouse,\r\n            mouseEvents = mouse.sourceEvents;\r\n\r\n        if (mouseEvents.mousemove)\r\n            Events.trigger(mouseConstraint, 'mousemove', { mouse: mouse });\r\n\r\n        if (mouseEvents.mousedown)\r\n            Events.trigger(mouseConstraint, 'mousedown', { mouse: mouse });\r\n\r\n        if (mouseEvents.mouseup)\r\n            Events.trigger(mouseConstraint, 'mouseup', { mouse: mouse });\r\n\r\n        // reset the mouse state ready for the next step\r\n        Mouse.clearSourceEvents(mouse);\r\n    };\r\n\r\n    /*\r\n    *\r\n    *  Events Documentation\r\n    *\r\n    */\r\n\r\n    /**\r\n    * Fired when the mouse has moved (or a touch moves) during the last step\r\n    *\r\n    * @event mousemove\r\n    * @param {} event An event object\r\n    * @param {mouse} event.mouse The engine's mouse instance\r\n    * @param {} event.source The source object of the event\r\n    * @param {} event.name The name of the event\r\n    */\r\n\r\n    /**\r\n    * Fired when the mouse is down (or a touch has started) during the last step\r\n    *\r\n    * @event mousedown\r\n    * @param {} event An event object\r\n    * @param {mouse} event.mouse The engine's mouse instance\r\n    * @param {} event.source The source object of the event\r\n    * @param {} event.name The name of the event\r\n    */\r\n\r\n    /**\r\n    * Fired when the mouse is up (or a touch has ended) during the last step\r\n    *\r\n    * @event mouseup\r\n    * @param {} event An event object\r\n    * @param {mouse} event.mouse The engine's mouse instance\r\n    * @param {} event.source The source object of the event\r\n    * @param {} event.name The name of the event\r\n    */\r\n\r\n    /**\r\n    * Fired when the user starts dragging a body\r\n    *\r\n    * @event startdrag\r\n    * @param {} event An event object\r\n    * @param {mouse} event.mouse The engine's mouse instance\r\n    * @param {body} event.body The body being dragged\r\n    * @param {} event.source The source object of the event\r\n    * @param {} event.name The name of the event\r\n    */\r\n\r\n    /**\r\n    * Fired when the user ends dragging a body\r\n    *\r\n    * @event enddrag\r\n    * @param {} event An event object\r\n    * @param {mouse} event.mouse The engine's mouse instance\r\n    * @param {body} event.body The body that has stopped being dragged\r\n    * @param {} event.source The source object of the event\r\n    * @param {} event.name The name of the event\r\n    */\r\n\r\n    /*\r\n    *\r\n    *  Properties Documentation\r\n    *\r\n    */\r\n\r\n    /**\r\n     * A `String` denoting the type of object.\r\n     *\r\n     * @property type\r\n     * @type string\r\n     * @default \"constraint\"\r\n     */\r\n\r\n    /**\r\n     * The `Mouse` instance in use. If not supplied in `MouseConstraint.create`, one will be created.\r\n     *\r\n     * @property mouse\r\n     * @type mouse\r\n     * @default mouse\r\n     */\r\n\r\n    /**\r\n     * The `Body` that is currently being moved by the user, or `null` if no body.\r\n     *\r\n     * @property body\r\n     * @type body\r\n     * @default null\r\n     */\r\n\r\n    /**\r\n     * The `Constraint` object that is used to move the body during interaction.\r\n     *\r\n     * @property constraint\r\n     * @type constraint\r\n     */\r\n\r\n    /**\r\n     * An `Object` that specifies the collision filter properties.\r\n     * The collision filter allows the user to define which types of body this mouse constraint can interact with.\r\n     * See `body.collisionFilter` for more information.\r\n     *\r\n     * @property collisionFilter\r\n     * @type object\r\n     */\r\n\r\n})();\r\n\r\n\r\n;   // End src/constraint/MouseConstraint.js\r\n\r\n\r\n// Begin src/core/Common.js\r\n\r\n/**\r\n* _Internal Class_, not generally used outside of the engine's internals.\r\n*\r\n* @class Common\r\n*/\r\n\r\nvar Common = {};\r\n\r\n(function() {\r\n\r\n    Common._nextId = 0;\r\n    Common._seed = 0;\r\n\r\n    /**\r\n     * Description\r\n     * @method extend\r\n     * @param {} obj\r\n     * @param {boolean} deep\r\n     * @return {} obj extended\r\n     */\r\n    Common.extend = function(obj, deep) {\r\n        var argsStart,\r\n            args,\r\n            deepClone;\r\n\r\n        if (typeof deep === 'boolean') {\r\n            argsStart = 2;\r\n            deepClone = deep;\r\n        } else {\r\n            argsStart = 1;\r\n            deepClone = true;\r\n        }\r\n\r\n        args = Array.prototype.slice.call(arguments, argsStart);\r\n\r\n        for (var i = 0; i < args.length; i++) {\r\n            var source = args[i];\r\n\r\n            if (source) {\r\n                for (var prop in source) {\r\n                    if (deepClone && source[prop] && source[prop].constructor === Object) {\r\n                        if (!obj[prop] || obj[prop].constructor === Object) {\r\n                            obj[prop] = obj[prop] || {};\r\n                            Common.extend(obj[prop], deepClone, source[prop]);\r\n                        } else {\r\n                            obj[prop] = source[prop];\r\n                        }\r\n                    } else {\r\n                        obj[prop] = source[prop];\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        \r\n        return obj;\r\n    };\r\n\r\n    /**\r\n     * Creates a new clone of the object, if deep is true references will also be cloned\r\n     * @method clone\r\n     * @param {} obj\r\n     * @param {bool} deep\r\n     * @return {} obj cloned\r\n     */\r\n    Common.clone = function(obj, deep) {\r\n        return Common.extend({}, deep, obj);\r\n    };\r\n\r\n    /**\r\n     * Description\r\n     * @method keys\r\n     * @param {} obj\r\n     * @return {string[]} keys\r\n     */\r\n    Common.keys = function(obj) {\r\n        if (Object.keys)\r\n            return Object.keys(obj);\r\n\r\n        // avoid hasOwnProperty for performance\r\n        var keys = [];\r\n        for (var key in obj)\r\n            keys.push(key);\r\n        return keys;\r\n    };\r\n\r\n    /**\r\n     * Description\r\n     * @method values\r\n     * @param {} obj\r\n     * @return {array} Array of the objects property values\r\n     */\r\n    Common.values = function(obj) {\r\n        var values = [];\r\n        \r\n        if (Object.keys) {\r\n            var keys = Object.keys(obj);\r\n            for (var i = 0; i < keys.length; i++) {\r\n                values.push(obj[keys[i]]);\r\n            }\r\n            return values;\r\n        }\r\n        \r\n        // avoid hasOwnProperty for performance\r\n        for (var key in obj)\r\n            values.push(obj[key]);\r\n        return values;\r\n    };\r\n\r\n    /**\r\n     * Description\r\n     * @method shadeColor\r\n     * @param {string} color\r\n     * @param {number} percent\r\n     * @return {string} A hex colour string made by lightening or darkening color by percent\r\n     */\r\n    Common.shadeColor = function(color, percent) {   \r\n        // http://stackoverflow.com/questions/5560248/programmatically-lighten-or-darken-a-hex-color\r\n        var colorInteger = parseInt(color.slice(1),16), \r\n            amount = Math.round(2.55 * percent), \r\n            R = (colorInteger >> 16) + amount, \r\n            B = (colorInteger >> 8 & 0x00FF) + amount, \r\n            G = (colorInteger & 0x0000FF) + amount;\r\n        return \"#\" + (0x1000000 + (R < 255 ? R < 1 ? 0 : R :255) * 0x10000 \r\n                + (B < 255 ? B < 1 ? 0 : B : 255) * 0x100 \r\n                + (G < 255 ? G < 1 ? 0 : G : 255)).toString(16).slice(1);\r\n    };\r\n\r\n    /**\r\n     * Description\r\n     * @method shuffle\r\n     * @param {array} array\r\n     * @return {array} array shuffled randomly\r\n     */\r\n    Common.shuffle = function(array) {\r\n        for (var i = array.length - 1; i > 0; i--) {\r\n            var j = Math.floor(Common.random() * (i + 1));\r\n            var temp = array[i];\r\n            array[i] = array[j];\r\n            array[j] = temp;\r\n        }\r\n        return array;\r\n    };\r\n\r\n    /**\r\n     * Description\r\n     * @method choose\r\n     * @param {array} choices\r\n     * @return {object} A random choice object from the array\r\n     */\r\n    Common.choose = function(choices) {\r\n        return choices[Math.floor(Common.random() * choices.length)];\r\n    };\r\n\r\n    /**\r\n     * Description\r\n     * @method isElement\r\n     * @param {object} obj\r\n     * @return {boolean} True if the object is a HTMLElement, otherwise false\r\n     */\r\n    Common.isElement = function(obj) {\r\n        // http://stackoverflow.com/questions/384286/javascript-isdom-how-do-you-check-if-a-javascript-object-is-a-dom-object\r\n        try {\r\n            return obj instanceof HTMLElement;\r\n        }\r\n        catch(e){\r\n            return (typeof obj===\"object\") &&\r\n              (obj.nodeType===1) && (typeof obj.style === \"object\") &&\r\n              (typeof obj.ownerDocument ===\"object\");\r\n        }\r\n    };\r\n    \r\n    /**\r\n     * Description\r\n     * @method clamp\r\n     * @param {number} value\r\n     * @param {number} min\r\n     * @param {number} max\r\n     * @return {number} The value clamped between min and max inclusive\r\n     */\r\n    Common.clamp = function(value, min, max) {\r\n        if (value < min)\r\n            return min;\r\n        if (value > max)\r\n            return max;\r\n        return value;\r\n    };\r\n    \r\n    /**\r\n     * Description\r\n     * @method sign\r\n     * @param {number} value\r\n     * @return {number} -1 if negative, +1 if 0 or positive\r\n     */\r\n    Common.sign = function(value) {\r\n        return value < 0 ? -1 : 1;\r\n    };\r\n    \r\n    /**\r\n     * Description\r\n     * @method now\r\n     * @return {number} the current timestamp (high-res if avaliable)\r\n     */\r\n    Common.now = function() {\r\n        // http://stackoverflow.com/questions/221294/how-do-you-get-a-timestamp-in-javascript\r\n        // https://gist.github.com/davidwaterston/2982531\r\n        \r\n        var perf = window.performance;\r\n\r\n        if (perf) {\r\n            perf.now = perf.now || perf.webkitNow || perf.msNow || perf.oNow || perf.mozNow;\r\n            return +(perf.now());\r\n        }\r\n        \r\n        return +(new Date());\r\n    };\r\n\r\n    \r\n    /**\r\n     * Description\r\n     * @method random\r\n     * @param {number} min\r\n     * @param {number} max\r\n     * @return {number} A random number between min and max inclusive\r\n     */\r\n    Common.random = function(min, max) {\r\n        min = (typeof min !== \"undefined\") ? min : 0;\r\n        max = (typeof max !== \"undefined\") ? max : 1;\r\n        return min + _seededRandom() * (max - min);\r\n    };\r\n\r\n    /**\r\n     * Converts a CSS hex colour string into an integer\r\n     * @method colorToNumber\r\n     * @param {string} colorString\r\n     * @return {number} An integer representing the CSS hex string\r\n     */\r\n    Common.colorToNumber = function(colorString) {\r\n        colorString = colorString.replace('#','');\r\n\r\n        if (colorString.length == 3) {\r\n            colorString = colorString.charAt(0) + colorString.charAt(0)\r\n                        + colorString.charAt(1) + colorString.charAt(1)\r\n                        + colorString.charAt(2) + colorString.charAt(2);\r\n        }\r\n\r\n        return parseInt(colorString, 16);\r\n    };\r\n\r\n    /**\r\n     * A wrapper for console.log, for providing errors and warnings\r\n     * @method log\r\n     * @param {string} message\r\n     * @param {string} type\r\n     */\r\n    Common.log = function(message, type) {\r\n        if (!console || !console.log || !console.warn)\r\n            return;\r\n\r\n        var style;\r\n\r\n        switch (type) {\r\n\r\n        case 'warn':\r\n            console.warn('Matter.js:', message);\r\n            break;\r\n        case 'error':\r\n            console.log('Matter.js:', message);\r\n            break;\r\n\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Returns the next unique sequential ID\r\n     * @method nextId\r\n     * @return {Number} Unique sequential ID\r\n     */\r\n    Common.nextId = function() {\r\n        return Common._nextId++;\r\n    };\r\n\r\n    /**\r\n     * A cross browser compatible indexOf implementation\r\n     * @method indexOf\r\n     * @param {array} haystack\r\n     * @param {object} needle\r\n     */\r\n    Common.indexOf = function(haystack, needle) {\r\n        if (haystack.indexOf)\r\n            return haystack.indexOf(needle);\r\n\r\n        for (var i = 0; i < haystack.length; i++) {\r\n            if (haystack[i] === needle)\r\n                return i;\r\n        }\r\n\r\n        return -1;\r\n    };\r\n\r\n    var _seededRandom = function() {\r\n        // https://gist.github.com/ngryman/3830489\r\n        Common._seed = (Common._seed * 9301 + 49297) % 233280;\r\n        return Common._seed / 233280;\r\n    };\r\n\r\n})();\r\n\r\n;   // End src/core/Common.js\r\n\r\n\r\n// Begin src/core/Engine.js\r\n\r\n/**\r\n* The `Matter.Engine` module contains methods for creating and manipulating engines.\r\n* An engine is a controller that manages updating and rendering the simulation of the world.\r\n* See `Matter.Runner` for an optional game loop utility.\r\n*\r\n* See [Demo.js](https://github.com/liabru/matter-js/blob/master/demo/js/Demo.js) \r\n* and [DemoMobile.js](https://github.com/liabru/matter-js/blob/master/demo/js/DemoMobile.js) for usage examples.\r\n*\r\n* @class Engine\r\n*/\r\n\r\nvar Engine = {};\r\n\r\n(function() {\r\n\r\n    var _fps = 60,\r\n        _delta = 1000 / _fps;\r\n\r\n    /**\r\n     * Creates a new engine. The options parameter is an object that specifies any properties you wish to override the defaults.\r\n     * All properties have default values, and many are pre-calculated automatically based on other properties.\r\n     * See the properites section below for detailed information on what you can pass via the `options` object.\r\n     * @method create\r\n     * @param {HTMLElement} element\r\n     * @param {object} [options]\r\n     * @return {engine} engine\r\n     */\r\n    Engine.create = function(element, options) {\r\n\r\n        // options may be passed as the first (and only) argument\r\n        options = Common.isElement(element) ? options : element;\r\n        element = Common.isElement(element) ? element : null;\r\n\r\n        var defaults = {\r\n            enabled: true,\r\n            positionIterations: 6,\r\n            velocityIterations: 4,\r\n            constraintIterations: 2,\r\n            enableSleeping: false,\r\n            events: [],\r\n            timing: {\r\n                fps: _fps,\r\n                timestamp: 0,\r\n                delta: _delta,\r\n                correction: 1,\r\n                deltaMin: 1000 / _fps,\r\n                deltaMax: 1000 / (_fps * 0.5),\r\n                timeScale: 1,\r\n                isFixed: false,\r\n                frameRequestId: 0\r\n            },\r\n            render: {\r\n                element: element,\r\n                controller: Render\r\n            },\r\n            broadphase: {\r\n                controller: Grid\r\n            }\r\n        };\r\n        \r\n        var engine = Common.extend(defaults, options);\r\n\r\n        engine.render = engine.render.controller.create(engine.render);\r\n        engine.world = World.create(engine.world);\r\n        engine.pairs = Pairs.create();\r\n        engine.metrics = engine.metrics || Metrics.create();\r\n        engine.broadphase = engine.broadphase.controller.create(engine.broadphase);\r\n\r\n        return engine;\r\n    };\r\n\r\n    /**\r\n     * Moves the simulation forward in time by `delta` ms. \r\n     * Triggers `beforeUpdate` and `afterUpdate` events.\r\n     * Triggers `collisionStart`, `collisionActive` and `collisionEnd` events.\r\n     * @method update\r\n     * @param {engine} engine\r\n     * @param {number} delta\r\n     * @param {number} [correction]\r\n     */\r\n    Engine.update = function(engine, delta, correction) {\r\n        correction = (typeof correction !== 'undefined') ? correction : 1;\r\n\r\n        var world = engine.world,\r\n            timing = engine.timing,\r\n            broadphase = engine.broadphase,\r\n            broadphasePairs = [],\r\n            i;\r\n\r\n        // increment timestamp\r\n        timing.timestamp += delta * timing.timeScale;\r\n        timing.correction = correction;\r\n\r\n        // create an event object\r\n        var event = {\r\n            timestamp: engine.timing.timestamp\r\n        };\r\n\r\n        Events.trigger(engine, 'beforeUpdate', event);\r\n\r\n        // get lists of all bodies and constraints, no matter what composites they are in\r\n        var allBodies = Composite.allBodies(world),\r\n            allConstraints = Composite.allConstraints(world);\r\n\r\n        // reset metrics logging\r\n        Metrics.reset(engine.metrics);\r\n\r\n        // if sleeping enabled, call the sleeping controller\r\n        if (engine.enableSleeping)\r\n            Sleeping.update(allBodies, timing.timeScale);\r\n\r\n        // applies gravity to all bodies\r\n        _bodiesApplyGravity(allBodies, world.gravity);\r\n\r\n        // update all body position and rotation by integration\r\n        _bodiesUpdate(allBodies, delta, timing.timeScale, correction, world.bounds);\r\n\r\n        // update all constraints\r\n        for (i = 0; i < engine.constraintIterations; i++) {\r\n            Constraint.solveAll(allConstraints, timing.timeScale);\r\n        }\r\n        Constraint.postSolveAll(allBodies);\r\n\r\n        // broadphase pass: find potential collision pairs\r\n        if (broadphase.controller) {\r\n\r\n            // if world is dirty, we must flush the whole grid\r\n            if (world.isModified)\r\n                broadphase.controller.clear(broadphase);\r\n\r\n            // update the grid buckets based on current bodies\r\n            broadphase.controller.update(broadphase, allBodies, engine, world.isModified);\r\n            broadphasePairs = broadphase.pairsList;\r\n        } else {\r\n\r\n            // if no broadphase set, we just pass all bodies\r\n            broadphasePairs = allBodies;\r\n        }\r\n\r\n        // narrowphase pass: find actual collisions, then create or update collision pairs\r\n        var collisions = broadphase.detector(broadphasePairs, engine);\r\n\r\n        // update collision pairs\r\n        var pairs = engine.pairs,\r\n            timestamp = timing.timestamp;\r\n        Pairs.update(pairs, collisions, timestamp);\r\n        Pairs.removeOld(pairs, timestamp);\r\n\r\n        // wake up bodies involved in collisions\r\n        if (engine.enableSleeping)\r\n            Sleeping.afterCollisions(pairs.list, timing.timeScale);\r\n\r\n        // trigger collision events\r\n        if (pairs.collisionStart.length > 0)\r\n            Events.trigger(engine, 'collisionStart', { pairs: pairs.collisionStart });\r\n\r\n        // iteratively resolve velocity between collisions\r\n        Resolver.preSolveVelocity(pairs.list);\r\n        for (i = 0; i < engine.velocityIterations; i++) {\r\n            Resolver.solveVelocity(pairs.list, timing.timeScale);\r\n        }\r\n        \r\n        // iteratively resolve position between collisions\r\n        for (i = 0; i < engine.positionIterations; i++) {\r\n            Resolver.solvePosition(pairs.list, timing.timeScale);\r\n        }\r\n        Resolver.postSolvePosition(allBodies);\r\n\r\n        // trigger collision events\r\n        if (pairs.collisionActive.length > 0)\r\n            Events.trigger(engine, 'collisionActive', { pairs: pairs.collisionActive });\r\n\r\n        if (pairs.collisionEnd.length > 0)\r\n            Events.trigger(engine, 'collisionEnd', { pairs: pairs.collisionEnd });\r\n\r\n        // update metrics log\r\n        Metrics.update(engine.metrics, engine);\r\n\r\n        // clear force buffers\r\n        _bodiesClearForces(allBodies);\r\n\r\n        // clear all composite modified flags\r\n        if (world.isModified)\r\n            Composite.setModified(world, false, false, true);\r\n\r\n        Events.trigger(engine, 'afterUpdate', event);\r\n\r\n        return engine;\r\n    };\r\n\r\n    /**\r\n     * Renders the world by calling its defined renderer `engine.render.controller`. Triggers `beforeRender` and `afterRender` events.\r\n     * @method render\r\n     * @param {engine} engineA\r\n     * @param {engine} engineB\r\n     */\r\n    Engine.render = function(engine) {\r\n        // create an event object\r\n        var event = {\r\n            timestamp: engine.timing.timestamp\r\n        };\r\n\r\n        Events.trigger(engine, 'beforeRender', event);\r\n        engine.render.controller.world(engine);\r\n        Events.trigger(engine, 'afterRender', event);\r\n    };\r\n    \r\n    /**\r\n     * Merges two engines by keeping the configuration of `engineA` but replacing the world with the one from `engineB`.\r\n     * @method merge\r\n     * @param {engine} engineA\r\n     * @param {engine} engineB\r\n     */\r\n    Engine.merge = function(engineA, engineB) {\r\n        Common.extend(engineA, engineB);\r\n        \r\n        if (engineB.world) {\r\n            engineA.world = engineB.world;\r\n\r\n            Engine.clear(engineA);\r\n\r\n            var bodies = Composite.allBodies(engineA.world);\r\n\r\n            for (var i = 0; i < bodies.length; i++) {\r\n                var body = bodies[i];\r\n                Sleeping.set(body, false);\r\n                body.id = Common.nextId();\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Clears the engine including the world, pairs and broadphase.\r\n     * @method clear\r\n     * @param {engine} engine\r\n     */\r\n    Engine.clear = function(engine) {\r\n        var world = engine.world;\r\n        \r\n        Pairs.clear(engine.pairs);\r\n\r\n        var broadphase = engine.broadphase;\r\n        if (broadphase.controller) {\r\n            var bodies = Composite.allBodies(world);\r\n            broadphase.controller.clear(broadphase);\r\n            broadphase.controller.update(broadphase, bodies, engine, true);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Zeroes the `body.force` and `body.torque` force buffers.\r\n     * @method bodiesClearForces\r\n     * @private\r\n     * @param {body[]} bodies\r\n     */\r\n    var _bodiesClearForces = function(bodies) {\r\n        for (var i = 0; i < bodies.length; i++) {\r\n            var body = bodies[i];\r\n\r\n            // reset force buffers\r\n            body.force.x = 0;\r\n            body.force.y = 0;\r\n            body.torque = 0;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Applys a mass dependant force to all given bodies.\r\n     * @method bodiesApplyGravity\r\n     * @private\r\n     * @param {body[]} bodies\r\n     * @param {vector} gravity\r\n     */\r\n    var _bodiesApplyGravity = function(bodies, gravity) {\r\n        for (var i = 0; i < bodies.length; i++) {\r\n            var body = bodies[i];\r\n\r\n            if (body.isStatic || body.isSleeping)\r\n                continue;\r\n\r\n            // apply gravity\r\n            body.force.y += body.mass * gravity.y * 0.001;\r\n            body.force.x += body.mass * gravity.x * 0.001;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Applys `Body.update` to all given `bodies`.\r\n     * @method updateAll\r\n     * @private\r\n     * @param {body[]} bodies\r\n     * @param {number} deltaTime \r\n     * The amount of time elapsed between updates\r\n     * @param {number} timeScale\r\n     * @param {number} correction \r\n     * The Verlet correction factor (deltaTime / lastDeltaTime)\r\n     * @param {bounds} worldBounds\r\n     */\r\n    var _bodiesUpdate = function(bodies, deltaTime, timeScale, correction, worldBounds) {\r\n        for (var i = 0; i < bodies.length; i++) {\r\n            var body = bodies[i];\r\n\r\n            if (body.isStatic || body.isSleeping)\r\n                continue;\r\n\r\n            // don't update out of world bodies\r\n            if (body.bounds.max.x < worldBounds.min.x || body.bounds.min.x > worldBounds.max.x\r\n                || body.bounds.max.y < worldBounds.min.y || body.bounds.min.y > worldBounds.max.y)\r\n                continue;\r\n\r\n            Body.update(body, deltaTime, timeScale, correction);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * An alias for `Runner.run`, see `Matter.Runner` for more information.\r\n     * @method run\r\n     * @param {engine} engine\r\n     */\r\n\r\n    /*\r\n    *\r\n    *  Events Documentation\r\n    *\r\n    */\r\n\r\n    /**\r\n    * Fired at the start of a tick, before any updates to the engine or timing\r\n    *\r\n    * @event beforeTick\r\n    * @param {} event An event object\r\n    * @param {DOMHighResTimeStamp} event.timestamp The timestamp of the current tick\r\n    * @param {} event.source The source object of the event\r\n    * @param {} event.name The name of the event\r\n    */\r\n\r\n    /**\r\n    * Fired after engine timing updated, but just before engine state updated\r\n    *\r\n    * @event tick\r\n    * @param {} event An event object\r\n    * @param {DOMHighResTimeStamp} event.timestamp The timestamp of the current tick\r\n    * @param {} event.source The source object of the event\r\n    * @param {} event.name The name of the event\r\n    */\r\n\r\n    /**\r\n    * Fired just before an update\r\n    *\r\n    * @event beforeUpdate\r\n    * @param {} event An event object\r\n    * @param {DOMHighResTimeStamp} event.timestamp The timestamp of the current tick\r\n    * @param {} event.source The source object of the event\r\n    * @param {} event.name The name of the event\r\n    */\r\n\r\n    /**\r\n    * Fired after engine update and all collision events\r\n    *\r\n    * @event afterUpdate\r\n    * @param {} event An event object\r\n    * @param {DOMHighResTimeStamp} event.timestamp The timestamp of the current tick\r\n    * @param {} event.source The source object of the event\r\n    * @param {} event.name The name of the event\r\n    */\r\n\r\n    /**\r\n    * Fired just before rendering\r\n    *\r\n    * @event beforeRender\r\n    * @param {} event An event object\r\n    * @param {DOMHighResTimeStamp} event.timestamp The timestamp of the current tick\r\n    * @param {} event.source The source object of the event\r\n    * @param {} event.name The name of the event\r\n    */\r\n\r\n    /**\r\n    * Fired after rendering\r\n    *\r\n    * @event afterRender\r\n    * @param {} event An event object\r\n    * @param {DOMHighResTimeStamp} event.timestamp The timestamp of the current tick\r\n    * @param {} event.source The source object of the event\r\n    * @param {} event.name The name of the event\r\n    */\r\n\r\n    /**\r\n    * Fired after engine update and after rendering\r\n    *\r\n    * @event afterTick\r\n    * @param {} event An event object\r\n    * @param {DOMHighResTimeStamp} event.timestamp The timestamp of the current tick\r\n    * @param {} event.source The source object of the event\r\n    * @param {} event.name The name of the event\r\n    */\r\n\r\n    /**\r\n    * Fired after engine update, provides a list of all pairs that have started to collide in the current tick (if any)\r\n    *\r\n    * @event collisionStart\r\n    * @param {} event An event object\r\n    * @param {} event.pairs List of affected pairs\r\n    * @param {DOMHighResTimeStamp} event.timestamp The timestamp of the current tick\r\n    * @param {} event.source The source object of the event\r\n    * @param {} event.name The name of the event\r\n    */\r\n\r\n    /**\r\n    * Fired after engine update, provides a list of all pairs that are colliding in the current tick (if any)\r\n    *\r\n    * @event collisionActive\r\n    * @param {} event An event object\r\n    * @param {} event.pairs List of affected pairs\r\n    * @param {DOMHighResTimeStamp} event.timestamp The timestamp of the current tick\r\n    * @param {} event.source The source object of the event\r\n    * @param {} event.name The name of the event\r\n    */\r\n\r\n    /**\r\n    * Fired after engine update, provides a list of all pairs that have ended collision in the current tick (if any)\r\n    *\r\n    * @event collisionEnd\r\n    * @param {} event An event object\r\n    * @param {} event.pairs List of affected pairs\r\n    * @param {DOMHighResTimeStamp} event.timestamp The timestamp of the current tick\r\n    * @param {} event.source The source object of the event\r\n    * @param {} event.name The name of the event\r\n    */\r\n\r\n    /*\r\n    *\r\n    *  Properties Documentation\r\n    *\r\n    */\r\n\r\n    /**\r\n     * A flag that specifies whether the engine is running or not.\r\n     *\r\n     * @property enabled\r\n     * @type boolean\r\n     * @default true\r\n     */\r\n\r\n    /**\r\n     * An integer `Number` that specifies the number of position iterations to perform each update.\r\n     * The higher the value, the higher quality the simulation will be at the expense of performance.\r\n     *\r\n     * @property positionIterations\r\n     * @type number\r\n     * @default 6\r\n     */\r\n\r\n    /**\r\n     * An integer `Number` that specifies the number of velocity iterations to perform each update.\r\n     * The higher the value, the higher quality the simulation will be at the expense of performance.\r\n     *\r\n     * @property velocityIterations\r\n     * @type number\r\n     * @default 4\r\n     */\r\n\r\n    /**\r\n     * An integer `Number` that specifies the number of constraint iterations to perform each update.\r\n     * The higher the value, the higher quality the simulation will be at the expense of performance.\r\n     * The default value of `2` is usually very adequate.\r\n     *\r\n     * @property constraintIterations\r\n     * @type number\r\n     * @default 2\r\n     */\r\n\r\n    /**\r\n     * A flag that specifies whether the engine should allow sleeping via the `Matter.Sleeping` module.\r\n     * Sleeping can improve stability and performance, but often at the expense of accuracy.\r\n     *\r\n     * @property enableSleeping\r\n     * @type boolean\r\n     * @default false\r\n     */\r\n\r\n    /**\r\n     * An `Object` containing properties regarding the timing systems of the engine. \r\n     *\r\n     * @property timing\r\n     * @type object\r\n     */\r\n\r\n    /**\r\n     * A `Number` that specifies the global scaling factor of time for all bodies.\r\n     * A value of `0` freezes the simulation.\r\n     * A value of `0.1` gives a slow-motion effect.\r\n     * A value of `1.2` gives a speed-up effect.\r\n     *\r\n     * @property timing.timeScale\r\n     * @type number\r\n     * @default 1\r\n     */\r\n\r\n    /**\r\n     * A `Number` that specifies the current simulation-time in milliseconds starting from `0`. \r\n     * It is incremented on every `Engine.update` by the `timing.delta`. \r\n     *\r\n     * @property timing.timestamp\r\n     * @type number\r\n     * @default 0\r\n     */\r\n\r\n    /**\r\n     * A `Boolean` that specifies if the `Engine.run` game loop should use a fixed timestep (otherwise it is variable).\r\n     * If timing is fixed, then the apparant simulation speed will change depending on the frame rate (but behaviour will be deterministic).\r\n     * If the timing is variable, then the apparant simulation speed will be constant (approximately, but at the cost of determininism).\r\n     *\r\n     * @property timing.isFixed\r\n     * @type boolean\r\n     * @default false\r\n     */\r\n\r\n    /**\r\n     * A `Number` that specifies the time step between updates in milliseconds.\r\n     * If `engine.timing.isFixed` is set to `true`, then `delta` is fixed.\r\n     * If it is `false`, then `delta` can dynamically change to maintain the correct apparant simulation speed.\r\n     *\r\n     * @property timing.delta\r\n     * @type number\r\n     * @default 1000 / 60\r\n     */\r\n\r\n    /**\r\n     * A `Number` that specifies the time correction factor to apply to the current timestep.\r\n     * It is automatically handled when using `Engine.run`, but is also only optional even if you use your own game loop.\r\n     * The value is defined as `delta / lastDelta`, i.e. the percentage change of `delta` between steps.\r\n     * This value is always `1` (no correction) when frame rate is constant or `engine.timing.isFixed` is `true`.\r\n     * If the framerate and hence `delta` are changing, then correction should be applied to the current update to account for the change.\r\n     * See the paper on <a href=\"http://lonesock.net/article/verlet.html\">Time Corrected Verlet</a> for more information.\r\n     *\r\n     * @property timing.correction\r\n     * @type number\r\n     * @default 1\r\n     */\r\n\r\n    /**\r\n     * An instance of a `Render` controller. The default value is a `Matter.Render` instance created by `Engine.create`.\r\n     * One may also develop a custom renderer module based on `Matter.Render` and pass an instance of it to `Engine.create` via `options.render`.\r\n     *\r\n     * A minimal custom renderer object must define at least three functions: `create`, `clear` and `world` (see `Matter.Render`).\r\n     * It is also possible to instead pass the _module_ reference via `options.render.controller` and `Engine.create` will instantiate one for you.\r\n     *\r\n     * @property render\r\n     * @type render\r\n     * @default a Matter.Render instance\r\n     */\r\n\r\n    /**\r\n     * An instance of a broadphase controller. The default value is a `Matter.Grid` instance created by `Engine.create`.\r\n     *\r\n     * @property broadphase\r\n     * @type grid\r\n     * @default a Matter.Grid instance\r\n     */\r\n\r\n    /**\r\n     * A `World` composite object that will contain all simulated bodies and constraints.\r\n     *\r\n     * @property world\r\n     * @type world\r\n     * @default a Matter.World instance\r\n     */\r\n\r\n})();\r\n\r\n;   // End src/core/Engine.js\r\n\r\n\r\n// Begin src/core/Events.js\r\n\r\n/**\r\n* See [Demo.js](https://github.com/liabru/matter-js/blob/master/demo/js/Demo.js) \r\n* and [DemoMobile.js](https://github.com/liabru/matter-js/blob/master/demo/js/DemoMobile.js) for usage examples.\r\n*\r\n* @class Events\r\n*/\r\n\r\nvar Events = {};\r\n\r\n(function() {\r\n\r\n    /**\r\n     * Subscribes a callback function to the given object's `eventName`.\r\n     * @method on\r\n     * @param {} object\r\n     * @param {string} eventNames\r\n     * @param {function} callback\r\n     */\r\n    Events.on = function(object, eventNames, callback) {\r\n        var names = eventNames.split(' '),\r\n            name;\r\n\r\n        for (var i = 0; i < names.length; i++) {\r\n            name = names[i];\r\n            object.events = object.events || {};\r\n            object.events[name] = object.events[name] || [];\r\n            object.events[name].push(callback);\r\n        }\r\n\r\n        return callback;\r\n    };\r\n\r\n    /**\r\n     * Removes the given event callback. If no callback, clears all callbacks in `eventNames`. If no `eventNames`, clears all events.\r\n     * @method off\r\n     * @param {} object\r\n     * @param {string} eventNames\r\n     * @param {function} callback\r\n     */\r\n    Events.off = function(object, eventNames, callback) {\r\n        if (!eventNames) {\r\n            object.events = {};\r\n            return;\r\n        }\r\n\r\n        // handle Events.off(object, callback)\r\n        if (typeof eventNames === 'function') {\r\n            callback = eventNames;\r\n            eventNames = Common.keys(object.events).join(' ');\r\n        }\r\n\r\n        var names = eventNames.split(' ');\r\n\r\n        for (var i = 0; i < names.length; i++) {\r\n            var callbacks = object.events[names[i]],\r\n                newCallbacks = [];\r\n\r\n            if (callback) {\r\n                for (var j = 0; j < callbacks.length; j++) {\r\n                    if (callbacks[j] !== callback)\r\n                        newCallbacks.push(callbacks[j]);\r\n                }\r\n            }\r\n\r\n            object.events[names[i]] = newCallbacks;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Fires all the callbacks subscribed to the given object's `eventName`, in the order they subscribed, if any.\r\n     * @method trigger\r\n     * @param {} object\r\n     * @param {string} eventNames\r\n     * @param {} event\r\n     */\r\n    Events.trigger = function(object, eventNames, event) {\r\n        var names,\r\n            name,\r\n            callbacks,\r\n            eventClone;\r\n\r\n        if (object.events) {\r\n            if (!event)\r\n                event = {};\r\n\r\n            names = eventNames.split(' ');\r\n\r\n            for (var i = 0; i < names.length; i++) {\r\n                name = names[i];\r\n                callbacks = object.events[name];\r\n\r\n                if (callbacks) {\r\n                    eventClone = Common.clone(event, false);\r\n                    eventClone.name = name;\r\n                    eventClone.source = object;\r\n\r\n                    for (var j = 0; j < callbacks.length; j++) {\r\n                        callbacks[j].apply(object, [eventClone]);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n})();\r\n\r\n;   // End src/core/Events.js\r\n\r\n\r\n// Begin src/core/Metrics.js\r\n\r\n/**\r\n* _Internal Class_, not generally used outside of the engine's internals.\r\n*\r\n* @class Metrics\r\n*/\r\n\r\nvar Metrics = {};\r\n\r\n(function() {\r\n\r\n    /**\r\n     * Description\r\n     * @method create\r\n     * @return {metrics} A new metrics\r\n     */\r\n    Metrics.create = function() {\r\n        return {\r\n            extended: false,\r\n            narrowDetections: 0,\r\n            narrowphaseTests: 0,\r\n            narrowReuse: 0,\r\n            narrowReuseCount: 0,\r\n            midphaseTests: 0,\r\n            broadphaseTests: 0,\r\n            narrowEff: 0.0001,\r\n            midEff: 0.0001,\r\n            broadEff: 0.0001,\r\n            collisions: 0,\r\n            buckets: 0,\r\n            bodies: 0,\r\n            pairs: 0\r\n        };\r\n    };\r\n\r\n    /**\r\n     * Description\r\n     * @method reset\r\n     * @param {metrics} metrics\r\n     */\r\n    Metrics.reset = function(metrics) {\r\n        if (metrics.extended) {\r\n            metrics.narrowDetections = 0;\r\n            metrics.narrowphaseTests = 0;\r\n            metrics.narrowReuse = 0;\r\n            metrics.narrowReuseCount = 0;\r\n            metrics.midphaseTests = 0;\r\n            metrics.broadphaseTests = 0;\r\n            metrics.narrowEff = 0;\r\n            metrics.midEff = 0;\r\n            metrics.broadEff = 0;\r\n            metrics.collisions = 0;\r\n            metrics.buckets = 0;\r\n            metrics.pairs = 0;\r\n            metrics.bodies = 0;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Description\r\n     * @method update\r\n     * @param {metrics} metrics\r\n     * @param {engine} engine\r\n     */\r\n    Metrics.update = function(metrics, engine) {\r\n        if (metrics.extended) {\r\n            var world = engine.world,\r\n                bodies = Composite.allBodies(world);\r\n\r\n            metrics.collisions = metrics.narrowDetections;\r\n            metrics.pairs = engine.pairs.list.length;\r\n            metrics.bodies = bodies.length;\r\n            metrics.midEff = (metrics.narrowDetections / (metrics.midphaseTests || 1)).toFixed(2);\r\n            metrics.narrowEff = (metrics.narrowDetections / (metrics.narrowphaseTests || 1)).toFixed(2);\r\n            metrics.broadEff = (1 - (metrics.broadphaseTests / (bodies.length || 1))).toFixed(2);\r\n            metrics.narrowReuse = (metrics.narrowReuseCount / (metrics.narrowphaseTests || 1)).toFixed(2);\r\n            //var broadphase = engine.broadphase[engine.broadphase.current];\r\n            //if (broadphase.instance)\r\n            //    metrics.buckets = Common.keys(broadphase.instance.buckets).length;\r\n        }\r\n    };\r\n\r\n})();\r\n\r\n\r\n;   // End src/core/Metrics.js\r\n\r\n\r\n// Begin src/core/Mouse.js\r\n\r\n/**\r\n* _Internal Class_, not generally used outside of the engine's internals.\r\n*\r\n* @class Mouse\r\n*/\r\n\r\nvar Mouse = {};\r\n\r\n(function() {\r\n\r\n    /**\r\n     * Description\r\n     * @method create\r\n     * @param {HTMLElement} element\r\n     * @return {mouse} A new mouse\r\n     */\r\n    Mouse.create = function(element) {\r\n        var mouse = {};\r\n\r\n        if (!element) {\r\n            Common.log('Mouse.create: element was undefined, defaulting to document.body', 'warn');\r\n        }\r\n        \r\n        mouse.element = element || document.body;\r\n        mouse.absolute = { x: 0, y: 0 };\r\n        mouse.position = { x: 0, y: 0 };\r\n        mouse.mousedownPosition = { x: 0, y: 0 };\r\n        mouse.mouseupPosition = { x: 0, y: 0 };\r\n        mouse.offset = { x: 0, y: 0 };\r\n        mouse.scale = { x: 1, y: 1 };\r\n        mouse.wheelDelta = 0;\r\n        mouse.button = -1;\r\n        mouse.pixelRatio = mouse.element.getAttribute('data-pixel-ratio') || 1;\r\n\r\n        mouse.sourceEvents = {\r\n            mousemove: null,\r\n            mousedown: null,\r\n            mouseup: null,\r\n            mousewheel: null\r\n        };\r\n        \r\n        mouse.mousemove = function(event) { \r\n            var position = _getRelativeMousePosition(event, mouse.element, mouse.pixelRatio),\r\n                touches = event.changedTouches;\r\n\r\n            if (touches) {\r\n                mouse.button = 0;\r\n                event.preventDefault();\r\n            }\r\n\r\n            mouse.absolute.x = position.x;\r\n            mouse.absolute.y = position.y;\r\n            mouse.position.x = mouse.absolute.x * mouse.scale.x + mouse.offset.x;\r\n            mouse.position.y = mouse.absolute.y * mouse.scale.y + mouse.offset.y;\r\n            mouse.sourceEvents.mousemove = event;\r\n        };\r\n        \r\n        mouse.mousedown = function(event) {\r\n            var position = _getRelativeMousePosition(event, mouse.element, mouse.pixelRatio),\r\n                touches = event.changedTouches;\r\n\r\n            if (touches) {\r\n                mouse.button = 0;\r\n                event.preventDefault();\r\n            } else {\r\n                mouse.button = event.button;\r\n            }\r\n\r\n            mouse.absolute.x = position.x;\r\n            mouse.absolute.y = position.y;\r\n            mouse.position.x = mouse.absolute.x * mouse.scale.x + mouse.offset.x;\r\n            mouse.position.y = mouse.absolute.y * mouse.scale.y + mouse.offset.y;\r\n            mouse.mousedownPosition.x = mouse.position.x;\r\n            mouse.mousedownPosition.y = mouse.position.y;\r\n            mouse.sourceEvents.mousedown = event;\r\n        };\r\n        \r\n        mouse.mouseup = function(event) {\r\n            var position = _getRelativeMousePosition(event, mouse.element, mouse.pixelRatio),\r\n                touches = event.changedTouches;\r\n\r\n            if (touches) {\r\n                event.preventDefault();\r\n            }\r\n            \r\n            mouse.button = -1;\r\n            mouse.absolute.x = position.x;\r\n            mouse.absolute.y = position.y;\r\n            mouse.position.x = mouse.absolute.x * mouse.scale.x + mouse.offset.x;\r\n            mouse.position.y = mouse.absolute.y * mouse.scale.y + mouse.offset.y;\r\n            mouse.mouseupPosition.x = mouse.position.x;\r\n            mouse.mouseupPosition.y = mouse.position.y;\r\n            mouse.sourceEvents.mouseup = event;\r\n        };\r\n\r\n        mouse.mousewheel = function(event) {\r\n            mouse.wheelDelta = Math.max(-1, Math.min(1, event.wheelDelta || -event.detail));\r\n            event.preventDefault();\r\n        };\r\n\r\n        Mouse.setElement(mouse, mouse.element);\r\n\r\n        return mouse;\r\n    };\r\n\r\n    /**\r\n     * Sets the element the mouse is bound to (and relative to)\r\n     * @method setElement\r\n     * @param {mouse} mouse\r\n     * @param {HTMLElement} element\r\n     */\r\n    Mouse.setElement = function(mouse, element) {\r\n        mouse.element = element;\r\n\r\n        element.addEventListener('mousemove', mouse.mousemove);\r\n        element.addEventListener('mousedown', mouse.mousedown);\r\n        element.addEventListener('mouseup', mouse.mouseup);\r\n        \r\n        element.addEventListener(\"mousewheel\", mouse.mousewheel);\r\n        element.addEventListener(\"DOMMouseScroll\", mouse.mousewheel);\r\n\r\n        element.addEventListener('touchmove', mouse.mousemove);\r\n        element.addEventListener('touchstart', mouse.mousedown);\r\n        element.addEventListener('touchend', mouse.mouseup);\r\n    };\r\n\r\n    /**\r\n     * Clears all captured source events\r\n     * @method clearSourceEvents\r\n     * @param {mouse} mouse\r\n     */\r\n    Mouse.clearSourceEvents = function(mouse) {\r\n        mouse.sourceEvents.mousemove = null;\r\n        mouse.sourceEvents.mousedown = null;\r\n        mouse.sourceEvents.mouseup = null;\r\n        mouse.sourceEvents.mousewheel = null;\r\n        mouse.wheelDelta = 0;\r\n    };\r\n\r\n    /**\r\n     * Sets the offset\r\n     * @method setOffset\r\n     * @param {mouse} mouse\r\n     */\r\n    Mouse.setOffset = function(mouse, offset) {\r\n        mouse.offset.x = offset.x;\r\n        mouse.offset.y = offset.y;\r\n        mouse.position.x = mouse.absolute.x * mouse.scale.x + mouse.offset.x;\r\n        mouse.position.y = mouse.absolute.y * mouse.scale.y + mouse.offset.y;\r\n    };\r\n\r\n    /**\r\n     * Sets the scale\r\n     * @method setScale\r\n     * @param {mouse} mouse\r\n     */\r\n    Mouse.setScale = function(mouse, scale) {\r\n        mouse.scale.x = scale.x;\r\n        mouse.scale.y = scale.y;\r\n        mouse.position.x = mouse.absolute.x * mouse.scale.x + mouse.offset.x;\r\n        mouse.position.y = mouse.absolute.y * mouse.scale.y + mouse.offset.y;\r\n    };\r\n    \r\n    /**\r\n     * Description\r\n     * @method _getRelativeMousePosition\r\n     * @private\r\n     * @param {} event\r\n     * @param {} element\r\n     * @param {number} pixelRatio\r\n     * @return {}\r\n     */\r\n    var _getRelativeMousePosition = function(event, element, pixelRatio) {\r\n        var elementBounds = element.getBoundingClientRect(),\r\n            rootNode = (document.documentElement || document.body.parentNode || document.body),\r\n            scrollX = (window.pageXOffset !== undefined) ? window.pageXOffset : rootNode.scrollLeft,\r\n            scrollY = (window.pageYOffset !== undefined) ? window.pageYOffset : rootNode.scrollTop,\r\n            touches = event.changedTouches,\r\n            x, y;\r\n        \r\n        if (touches) {\r\n            x = touches[0].pageX - elementBounds.left - scrollX;\r\n            y = touches[0].pageY - elementBounds.top - scrollY;\r\n        } else {\r\n            x = event.pageX - elementBounds.left - scrollX;\r\n            y = event.pageY - elementBounds.top - scrollY;\r\n        }\r\n\r\n        return { \r\n            x: x / (element.clientWidth / element.width * pixelRatio),\r\n            y: y / (element.clientHeight / element.height * pixelRatio)\r\n        };\r\n    };\r\n\r\n})();\r\n\r\n\r\n;   // End src/core/Mouse.js\r\n\r\n\r\n// Begin src/core/Runner.js\r\n\r\n/**\r\n* The `Matter.Runner` module is an optional utility which provides a game loop, \r\n* that handles updating and rendering a `Matter.Engine` for you within a browser.\r\n* Note that the method `Engine.run` is an alias for `Runner.run`.\r\n*\r\n* See [Demo.js](https://github.com/liabru/matter-js/blob/master/demo/js/Demo.js) \r\n* and [DemoMobile.js](https://github.com/liabru/matter-js/blob/master/demo/js/DemoMobile.js) for usage examples.\r\n*\r\n* @class Runner\r\n*/\r\n\r\nvar Runner = {};\r\n\r\n(function() {\r\n\r\n    var _fps = 60,\r\n        _deltaSampleSize = _fps,\r\n        _delta = 1000 / _fps;\r\n\r\n    var _requestAnimationFrame = window.requestAnimationFrame || window.webkitRequestAnimationFrame\r\n                                      || window.mozRequestAnimationFrame || window.msRequestAnimationFrame \r\n                                      || function(callback){ window.setTimeout(function() { callback(Common.now()); }, _delta); };\r\n   \r\n    var _cancelAnimationFrame = window.cancelAnimationFrame || window.mozCancelAnimationFrame \r\n                                      || window.webkitCancelAnimationFrame || window.msCancelAnimationFrame;\r\n\r\n    /**\r\n     * Provides a basic game loop that handles updating the engine for you.\r\n     * Calls `Engine.update` and `Engine.render` on the `requestAnimationFrame` event automatically.\r\n     * Handles time correction and non-fixed dynamic timing (if enabled). \r\n     * Triggers `beforeTick`, `tick` and `afterTick` events.\r\n     * @method run\r\n     * @param {engine} engine\r\n     */\r\n    Runner.run = function(engine) {\r\n        var counterTimestamp = 0,\r\n            frameCounter = 0,\r\n            deltaHistory = [],\r\n            timePrev,\r\n            timeScalePrev = 1;\r\n\r\n        (function render(time){\r\n            var timing = engine.timing,\r\n                delta,\r\n                correction = 1;\r\n\r\n            timing.frameRequestId = _requestAnimationFrame(render);\r\n\r\n            if (!engine.enabled)\r\n                return;\r\n\r\n            // create an event object\r\n            var event = {\r\n                timestamp: time\r\n            };\r\n\r\n            Events.trigger(engine, 'beforeTick', event);\r\n\r\n            if (timing.isFixed) {\r\n                // fixed timestep\r\n                delta = timing.delta;\r\n            } else {\r\n                // dynamic timestep based on wall clock between calls\r\n                delta = (time - timePrev) || timing.delta;\r\n                timePrev = time;\r\n\r\n                // optimistically filter delta over a few frames, to improve stability\r\n                deltaHistory.push(delta);\r\n                deltaHistory = deltaHistory.slice(-_deltaSampleSize);\r\n                delta = Math.min.apply(null, deltaHistory);\r\n                \r\n                // limit delta\r\n                delta = delta < timing.deltaMin ? timing.deltaMin : delta;\r\n                delta = delta > timing.deltaMax ? timing.deltaMax : delta;\r\n\r\n                // time correction for delta\r\n                correction = delta / timing.delta;\r\n\r\n                // update engine timing object\r\n                timing.delta = delta;\r\n            }\r\n\r\n            // time correction for time scaling\r\n            if (timeScalePrev !== 0)\r\n                correction *= timing.timeScale / timeScalePrev;\r\n\r\n            if (timing.timeScale === 0)\r\n                correction = 0;\r\n\r\n            timeScalePrev = timing.timeScale;\r\n            \r\n            // fps counter\r\n            frameCounter += 1;\r\n            if (time - counterTimestamp >= 1000) {\r\n                timing.fps = frameCounter * ((time - counterTimestamp) / 1000);\r\n                counterTimestamp = time;\r\n                frameCounter = 0;\r\n            }\r\n\r\n            Events.trigger(engine, 'tick', event);\r\n\r\n            // if world has been modified, clear the render scene graph\r\n            if (engine.world.isModified && engine.render.controller.clear)\r\n                engine.render.controller.clear(engine.render);\r\n\r\n            // update\r\n            Engine.update(engine, delta, correction);\r\n\r\n            // render\r\n            Engine.render(engine);\r\n\r\n            Events.trigger(engine, 'afterTick', event);\r\n        })();\r\n    };\r\n\r\n    /**\r\n     * Ends execution of `Runner.run` on the given `engine`, by canceling the animation frame request event loop.\r\n     * If you wish to only temporarily pause the engine, see `engine.enabled` instead.\r\n     * @method stop\r\n     * @param {engine} engine\r\n     */\r\n    Runner.stop = function(engine) {\r\n        _cancelAnimationFrame(engine.timing.frameRequestId);\r\n    };\r\n\r\n})();\r\n\r\n\r\n;   // End src/core/Runner.js\r\n\r\n\r\n// Begin src/core/Sleeping.js\r\n\r\n/**\r\n* _Internal Class_, not generally used outside of the engine's internals.\r\n*\r\n* @class Sleeping\r\n*/\r\n\r\nvar Sleeping = {};\r\n\r\n(function() {\r\n\r\n    Sleeping._motionWakeThreshold = 0.18;\r\n    Sleeping._motionSleepThreshold = 0.08;\r\n    Sleeping._minBias = 0.9;\r\n\r\n    /**\r\n     * Puts bodies to sleep or wakes them up depending on their motion.\r\n     * @method update\r\n     * @param {body[]} bodies\r\n     * @param {number} timeScale\r\n     */\r\n    Sleeping.update = function(bodies, timeScale) {\r\n        var timeFactor = timeScale * timeScale * timeScale;\r\n\r\n        // update bodies sleeping status\r\n        for (var i = 0; i < bodies.length; i++) {\r\n            var body = bodies[i],\r\n                motion = body.speed * body.speed + body.angularSpeed * body.angularSpeed;\r\n\r\n            // wake up bodies if they have a force applied\r\n            if (body.force.x > 0 || body.force.y > 0) {\r\n                Sleeping.set(body, false);\r\n                continue;\r\n            }\r\n\r\n            var minMotion = Math.min(body.motion, motion),\r\n                maxMotion = Math.max(body.motion, motion);\r\n        \r\n            // biased average motion estimation between frames\r\n            body.motion = Sleeping._minBias * minMotion + (1 - Sleeping._minBias) * maxMotion;\r\n            \r\n            if (body.sleepThreshold > 0 && body.motion < Sleeping._motionSleepThreshold * timeFactor) {\r\n                body.sleepCounter += 1;\r\n                \r\n                if (body.sleepCounter >= body.sleepThreshold)\r\n                    Sleeping.set(body, true);\r\n            } else if (body.sleepCounter > 0) {\r\n                body.sleepCounter -= 1;\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Given a set of colliding pairs, wakes the sleeping bodies involved.\r\n     * @method afterCollisions\r\n     * @param {pair[]} pairs\r\n     * @param {number} timeScale\r\n     */\r\n    Sleeping.afterCollisions = function(pairs, timeScale) {\r\n        var timeFactor = timeScale * timeScale * timeScale;\r\n\r\n        // wake up bodies involved in collisions\r\n        for (var i = 0; i < pairs.length; i++) {\r\n            var pair = pairs[i];\r\n            \r\n            // don't wake inactive pairs\r\n            if (!pair.isActive)\r\n                continue;\r\n\r\n            var collision = pair.collision,\r\n                bodyA = collision.bodyA, \r\n                bodyB = collision.bodyB;\r\n        \r\n            // don't wake if at least one body is static\r\n            if ((bodyA.isSleeping && bodyB.isSleeping) || bodyA.isStatic || bodyB.isStatic)\r\n                continue;\r\n        \r\n            if (bodyA.isSleeping || bodyB.isSleeping) {\r\n                var sleepingBody = (bodyA.isSleeping && !bodyA.isStatic) ? bodyA : bodyB,\r\n                    movingBody = sleepingBody === bodyA ? bodyB : bodyA;\r\n\r\n                if (!sleepingBody.isStatic && movingBody.motion > Sleeping._motionWakeThreshold * timeFactor) {\r\n                    Sleeping.set(sleepingBody, false);\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Description\r\n     * @method set\r\n     * @param {body} body\r\n     * @param {boolean} isSleeping\r\n     */\r\n    Sleeping.set = function(body, isSleeping) {\r\n        if (isSleeping) {\r\n            body.isSleeping = true;\r\n            body.sleepCounter = body.sleepThreshold;\r\n\r\n            body.positionImpulse.x = 0;\r\n            body.positionImpulse.y = 0;\r\n\r\n            body.positionPrev.x = body.position.x;\r\n            body.positionPrev.y = body.position.y;\r\n\r\n            body.anglePrev = body.angle;\r\n            body.speed = 0;\r\n            body.angularSpeed = 0;\r\n            body.motion = 0;\r\n        } else {\r\n            body.isSleeping = false;\r\n            body.sleepCounter = 0;\r\n        }\r\n    };\r\n\r\n})();\r\n\r\n;   // End src/core/Sleeping.js\r\n\r\n\r\n// Begin src/factory/Bodies.js\r\n\r\n/**\r\n* The `Matter.Bodies` module contains factory methods for creating rigid body models \r\n* with commonly used body configurations (such as rectangles, circles and other polygons).\r\n*\r\n* See [Demo.js](https://github.com/liabru/matter-js/blob/master/demo/js/Demo.js) \r\n* and [DemoMobile.js](https://github.com/liabru/matter-js/blob/master/demo/js/DemoMobile.js) for usage examples.\r\n*\r\n* @class Bodies\r\n*/\r\n\r\n// TODO: true circle bodies\r\n\r\nvar Bodies = {};\r\n\r\n(function() {\r\n\r\n    /**\r\n     * Creates a new rigid body model with a rectangle hull. \r\n     * The options parameter is an object that specifies any properties you wish to override the defaults.\r\n     * See the properties section of the `Matter.Body` module for detailed information on what you can pass via the `options` object.\r\n     * @method rectangle\r\n     * @param {number} x\r\n     * @param {number} y\r\n     * @param {number} width\r\n     * @param {number} height\r\n     * @param {object} [options]\r\n     * @return {body} A new rectangle body\r\n     */\r\n    Bodies.rectangle = function(x, y, width, height, options) {\r\n        options = options || {};\r\n\r\n        var rectangle = { \r\n            label: 'Rectangle Body',\r\n            position: { x: x, y: y },\r\n            vertices: Vertices.fromPath('L 0 0 L ' + width + ' 0 L ' + width + ' ' + height + ' L 0 ' + height)\r\n        };\r\n\r\n        if (options.chamfer) {\r\n            var chamfer = options.chamfer;\r\n            rectangle.vertices = Vertices.chamfer(rectangle.vertices, chamfer.radius, \r\n                                    chamfer.quality, chamfer.qualityMin, chamfer.qualityMax);\r\n            delete options.chamfer;\r\n        }\r\n\r\n        return Body.create(Common.extend({}, rectangle, options));\r\n    };\r\n    \r\n    /**\r\n     * Creates a new rigid body model with a trapezoid hull. \r\n     * The options parameter is an object that specifies any properties you wish to override the defaults.\r\n     * See the properties section of the `Matter.Body` module for detailed information on what you can pass via the `options` object.\r\n     * @method trapezoid\r\n     * @param {number} x\r\n     * @param {number} y\r\n     * @param {number} width\r\n     * @param {number} height\r\n     * @param {number} slope\r\n     * @param {object} [options]\r\n     * @return {body} A new trapezoid body\r\n     */\r\n    Bodies.trapezoid = function(x, y, width, height, slope, options) {\r\n        options = options || {};\r\n\r\n        slope *= 0.5;\r\n        var roof = (1 - (slope * 2)) * width;\r\n        \r\n        var x1 = width * slope,\r\n            x2 = x1 + roof,\r\n            x3 = x2 + x1;\r\n\r\n        var trapezoid = { \r\n            label: 'Trapezoid Body',\r\n            position: { x: x, y: y },\r\n            vertices: Vertices.fromPath('L 0 0 L ' + x1 + ' ' + (-height) + ' L ' + x2 + ' ' + (-height) + ' L ' + x3 + ' 0')\r\n        };\r\n\r\n        if (options.chamfer) {\r\n            var chamfer = options.chamfer;\r\n            trapezoid.vertices = Vertices.chamfer(trapezoid.vertices, chamfer.radius, \r\n                                    chamfer.quality, chamfer.qualityMin, chamfer.qualityMax);\r\n            delete options.chamfer;\r\n        }\r\n\r\n        return Body.create(Common.extend({}, trapezoid, options));\r\n    };\r\n\r\n    /**\r\n     * Creates a new rigid body model with a circle hull. \r\n     * The options parameter is an object that specifies any properties you wish to override the defaults.\r\n     * See the properties section of the `Matter.Body` module for detailed information on what you can pass via the `options` object.\r\n     * @method circle\r\n     * @param {number} x\r\n     * @param {number} y\r\n     * @param {number} radius\r\n     * @param {object} [options]\r\n     * @param {number} maxSides\r\n     * @return {body} A new circle body\r\n     */\r\n    Bodies.circle = function(x, y, radius, options, maxSides) {\r\n        options = options || {};\r\n        options.label = 'Circle Body';\r\n        \r\n        // approximate circles with polygons until true circles implemented in SAT\r\n\r\n        maxSides = maxSides || 25;\r\n        var sides = Math.ceil(Math.max(10, Math.min(maxSides, radius)));\r\n\r\n        // optimisation: always use even number of sides (half the number of unique axes)\r\n        if (sides % 2 === 1)\r\n            sides += 1;\r\n\r\n        // flag for better rendering\r\n        options.circleRadius = radius;\r\n\r\n        return Bodies.polygon(x, y, sides, radius, options);\r\n    };\r\n\r\n    /**\r\n     * Creates a new rigid body model with a regular polygon hull with the given number of sides. \r\n     * The options parameter is an object that specifies any properties you wish to override the defaults.\r\n     * See the properties section of the `Matter.Body` module for detailed information on what you can pass via the `options` object.\r\n     * @method polygon\r\n     * @param {number} x\r\n     * @param {number} y\r\n     * @param {number} sides\r\n     * @param {number} radius\r\n     * @param {object} [options]\r\n     * @return {body} A new regular polygon body\r\n     */\r\n    Bodies.polygon = function(x, y, sides, radius, options) {\r\n        options = options || {};\r\n\r\n        if (sides < 3)\r\n            return Bodies.circle(x, y, radius, options);\r\n\r\n        var theta = 2 * Math.PI / sides,\r\n            path = '',\r\n            offset = theta * 0.5;\r\n\r\n        for (var i = 0; i < sides; i += 1) {\r\n            var angle = offset + (i * theta),\r\n                xx = Math.cos(angle) * radius,\r\n                yy = Math.sin(angle) * radius;\r\n\r\n            path += 'L ' + xx.toFixed(3) + ' ' + yy.toFixed(3) + ' ';\r\n        }\r\n\r\n        var polygon = { \r\n            label: 'Polygon Body',\r\n            position: { x: x, y: y },\r\n            vertices: Vertices.fromPath(path)\r\n        };\r\n\r\n        if (options.chamfer) {\r\n            var chamfer = options.chamfer;\r\n            polygon.vertices = Vertices.chamfer(polygon.vertices, chamfer.radius, \r\n                                    chamfer.quality, chamfer.qualityMin, chamfer.qualityMax);\r\n            delete options.chamfer;\r\n        }\r\n\r\n        return Body.create(Common.extend({}, polygon, options));\r\n    };\r\n\r\n})();\r\n\r\n\r\n;   // End src/factory/Bodies.js\r\n\r\n\r\n// Begin src/factory/Composites.js\r\n\r\n/**\r\n* See [Demo.js](https://github.com/liabru/matter-js/blob/master/demo/js/Demo.js) \r\n* and [DemoMobile.js](https://github.com/liabru/matter-js/blob/master/demo/js/DemoMobile.js) for usage examples.\r\n*\r\n* @class Composites\r\n*/\r\n\r\nvar Composites = {};\r\n\r\n(function() {\r\n\r\n    /**\r\n     * Description\r\n     * @method stack\r\n     * @param {number} xx\r\n     * @param {number} yy\r\n     * @param {number} columns\r\n     * @param {number} rows\r\n     * @param {number} columnGap\r\n     * @param {number} rowGap\r\n     * @param {function} callback\r\n     * @return {composite} A new composite containing objects created in the callback\r\n     */\r\n    Composites.stack = function(xx, yy, columns, rows, columnGap, rowGap, callback) {\r\n        var stack = Composite.create({ label: 'Stack' }),\r\n            x = xx,\r\n            y = yy,\r\n            lastBody,\r\n            i = 0;\r\n\r\n        for (var row = 0; row < rows; row++) {\r\n            var maxHeight = 0;\r\n            \r\n            for (var column = 0; column < columns; column++) {\r\n                var body = callback(x, y, column, row, lastBody, i);\r\n                    \r\n                if (body) {\r\n                    var bodyHeight = body.bounds.max.y - body.bounds.min.y,\r\n                        bodyWidth = body.bounds.max.x - body.bounds.min.x; \r\n\r\n                    if (bodyHeight > maxHeight)\r\n                        maxHeight = bodyHeight;\r\n                    \r\n                    Body.translate(body, { x: bodyWidth * 0.5, y: bodyHeight * 0.5 });\r\n\r\n                    x = body.bounds.max.x + columnGap;\r\n\r\n                    Composite.addBody(stack, body);\r\n                    \r\n                    lastBody = body;\r\n                    i += 1;\r\n                }\r\n            }\r\n            \r\n            y += maxHeight + rowGap;\r\n            x = xx;\r\n        }\r\n\r\n        return stack;\r\n    };\r\n    \r\n    /**\r\n     * Description\r\n     * @method chain\r\n     * @param {composite} composite\r\n     * @param {number} xOffsetA\r\n     * @param {number} yOffsetA\r\n     * @param {number} xOffsetB\r\n     * @param {number} yOffsetB\r\n     * @param {object} options\r\n     * @return {composite} A new composite containing objects chained together with constraints\r\n     */\r\n    Composites.chain = function(composite, xOffsetA, yOffsetA, xOffsetB, yOffsetB, options) {\r\n        var bodies = composite.bodies;\r\n        \r\n        for (var i = 1; i < bodies.length; i++) {\r\n            var bodyA = bodies[i - 1],\r\n                bodyB = bodies[i],\r\n                bodyAHeight = bodyA.bounds.max.y - bodyA.bounds.min.y,\r\n                bodyAWidth = bodyA.bounds.max.x - bodyA.bounds.min.x, \r\n                bodyBHeight = bodyB.bounds.max.y - bodyB.bounds.min.y,\r\n                bodyBWidth = bodyB.bounds.max.x - bodyB.bounds.min.x;\r\n        \r\n            var defaults = {\r\n                bodyA: bodyA,\r\n                pointA: { x: bodyAWidth * xOffsetA, y: bodyAHeight * yOffsetA },\r\n                bodyB: bodyB,\r\n                pointB: { x: bodyBWidth * xOffsetB, y: bodyBHeight * yOffsetB }\r\n            };\r\n            \r\n            var constraint = Common.extend(defaults, options);\r\n        \r\n            Composite.addConstraint(composite, Constraint.create(constraint));\r\n        }\r\n\r\n        composite.label += ' Chain';\r\n        \r\n        return composite;\r\n    };\r\n\r\n    /**\r\n     * Connects bodies in the composite with constraints in a grid pattern, with optional cross braces\r\n     * @method mesh\r\n     * @param {composite} composite\r\n     * @param {number} columns\r\n     * @param {number} rows\r\n     * @param {boolean} crossBrace\r\n     * @param {object} options\r\n     * @return {composite} The composite containing objects meshed together with constraints\r\n     */\r\n    Composites.mesh = function(composite, columns, rows, crossBrace, options) {\r\n        var bodies = composite.bodies,\r\n            row,\r\n            col,\r\n            bodyA,\r\n            bodyB,\r\n            bodyC;\r\n        \r\n        for (row = 0; row < rows; row++) {\r\n            for (col = 0; col < columns; col++) {\r\n                if (col > 0) {\r\n                    bodyA = bodies[(col - 1) + (row * columns)];\r\n                    bodyB = bodies[col + (row * columns)];\r\n                    Composite.addConstraint(composite, Constraint.create(Common.extend({ bodyA: bodyA, bodyB: bodyB }, options)));\r\n                }\r\n            }\r\n\r\n            for (col = 0; col < columns; col++) {\r\n                if (row > 0) {\r\n                    bodyA = bodies[col + ((row - 1) * columns)];\r\n                    bodyB = bodies[col + (row * columns)];\r\n                    Composite.addConstraint(composite, Constraint.create(Common.extend({ bodyA: bodyA, bodyB: bodyB }, options)));\r\n\r\n                    if (crossBrace && col > 0) {\r\n                        bodyC = bodies[(col - 1) + ((row - 1) * columns)];\r\n                        Composite.addConstraint(composite, Constraint.create(Common.extend({ bodyA: bodyC, bodyB: bodyB }, options)));\r\n                    }\r\n\r\n                    if (crossBrace && col < columns - 1) {\r\n                        bodyC = bodies[(col + 1) + ((row - 1) * columns)];\r\n                        Composite.addConstraint(composite, Constraint.create(Common.extend({ bodyA: bodyC, bodyB: bodyB }, options)));\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        composite.label += ' Mesh';\r\n        \r\n        return composite;\r\n    };\r\n    \r\n    /**\r\n     * Description\r\n     * @method pyramid\r\n     * @param {number} xx\r\n     * @param {number} yy\r\n     * @param {number} columns\r\n     * @param {number} rows\r\n     * @param {number} columnGap\r\n     * @param {number} rowGap\r\n     * @param {function} callback\r\n     * @return {composite} A new composite containing objects created in the callback\r\n     */\r\n    Composites.pyramid = function(xx, yy, columns, rows, columnGap, rowGap, callback) {\r\n        return Composites.stack(xx, yy, columns, rows, columnGap, rowGap, function(x, y, column, row, lastBody, i) {\r\n            var actualRows = Math.min(rows, Math.ceil(columns / 2)),\r\n                lastBodyWidth = lastBody ? lastBody.bounds.max.x - lastBody.bounds.min.x : 0;\r\n            \r\n            if (row > actualRows)\r\n                return;\r\n            \r\n            // reverse row order\r\n            row = actualRows - row;\r\n            \r\n            var start = row,\r\n                end = columns - 1 - row;\r\n\r\n            if (column < start || column > end)\r\n                return;\r\n            \r\n            // retroactively fix the first body's position, since width was unknown\r\n            if (i === 1) {\r\n                Body.translate(lastBody, { x: (column + (columns % 2 === 1 ? 1 : -1)) * lastBodyWidth, y: 0 });\r\n            }\r\n\r\n            var xOffset = lastBody ? column * lastBodyWidth : 0;\r\n            \r\n            return callback(xx + xOffset + column * columnGap, y, column, row, lastBody, i);\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Description\r\n     * @method newtonsCradle\r\n     * @param {number} xx\r\n     * @param {number} yy\r\n     * @param {number} number\r\n     * @param {number} size\r\n     * @param {number} length\r\n     * @return {composite} A new composite newtonsCradle body\r\n     */\r\n    Composites.newtonsCradle = function(xx, yy, number, size, length) {\r\n        var newtonsCradle = Composite.create({ label: 'Newtons Cradle' });\r\n\r\n        for (var i = 0; i < number; i++) {\r\n            var separation = 1.9,\r\n                circle = Bodies.circle(xx + i * (size * separation), yy + length, size, \r\n                            { inertia: 99999, restitution: 1, friction: 0, frictionAir: 0.0001, slop: 0.01 }),\r\n                constraint = Constraint.create({ pointA: { x: xx + i * (size * separation), y: yy }, bodyB: circle });\r\n\r\n            Composite.addBody(newtonsCradle, circle);\r\n            Composite.addConstraint(newtonsCradle, constraint);\r\n        }\r\n\r\n        return newtonsCradle;\r\n    };\r\n    \r\n    /**\r\n     * Description\r\n     * @method car\r\n     * @param {number} xx\r\n     * @param {number} yy\r\n     * @param {number} width\r\n     * @param {number} height\r\n     * @param {number} wheelSize\r\n     * @return {composite} A new composite car body\r\n     */\r\n    Composites.car = function(xx, yy, width, height, wheelSize) {\r\n        var group = Body.nextGroup(true),\r\n            wheelBase = -20,\r\n            wheelAOffset = -width * 0.5 + wheelBase,\r\n            wheelBOffset = width * 0.5 - wheelBase,\r\n            wheelYOffset = 0;\r\n    \r\n        var car = Composite.create({ label: 'Car' }),\r\n            body = Bodies.trapezoid(xx, yy, width, height, 0.3, { \r\n                collisionFilter: {\r\n                    group: group\r\n                },\r\n                friction: 0.01,\r\n                chamfer: {\r\n                    radius: 10\r\n                }\r\n            });\r\n    \r\n        var wheelA = Bodies.circle(xx + wheelAOffset, yy + wheelYOffset, wheelSize, { \r\n            collisionFilter: {\r\n                group: group\r\n            },\r\n            restitution: 0.5, \r\n            friction: 0.9,\r\n            density: 0.01\r\n        });\r\n                    \r\n        var wheelB = Bodies.circle(xx + wheelBOffset, yy + wheelYOffset, wheelSize, { \r\n            collisionFilter: {\r\n                group: group\r\n            },\r\n            restitution: 0.5, \r\n            friction: 0.9,\r\n            density: 0.01\r\n        });\r\n                    \r\n        var axelA = Constraint.create({\r\n            bodyA: body,\r\n            pointA: { x: wheelAOffset, y: wheelYOffset },\r\n            bodyB: wheelA,\r\n            stiffness: 0.5\r\n        });\r\n                        \r\n        var axelB = Constraint.create({\r\n            bodyA: body,\r\n            pointA: { x: wheelBOffset, y: wheelYOffset },\r\n            bodyB: wheelB,\r\n            stiffness: 0.5\r\n        });\r\n        \r\n        Composite.addBody(car, body);\r\n        Composite.addBody(car, wheelA);\r\n        Composite.addBody(car, wheelB);\r\n        Composite.addConstraint(car, axelA);\r\n        Composite.addConstraint(car, axelB);\r\n\r\n        return car;\r\n    };\r\n\r\n    /**\r\n     * Creates a simple soft body like object\r\n     * @method softBody\r\n     * @param {number} xx\r\n     * @param {number} yy\r\n     * @param {number} columns\r\n     * @param {number} rows\r\n     * @param {number} columnGap\r\n     * @param {number} rowGap\r\n     * @param {boolean} crossBrace\r\n     * @param {number} particleRadius\r\n     * @param {} particleOptions\r\n     * @param {} constraintOptions\r\n     * @return {composite} A new composite softBody\r\n     */\r\n    Composites.softBody = function(xx, yy, columns, rows, columnGap, rowGap, crossBrace, particleRadius, particleOptions, constraintOptions) {\r\n        particleOptions = Common.extend({ inertia: Infinity }, particleOptions);\r\n        constraintOptions = Common.extend({ stiffness: 0.4 }, constraintOptions);\r\n\r\n        var softBody = Composites.stack(xx, yy, columns, rows, columnGap, rowGap, function(x, y) {\r\n            return Bodies.circle(x, y, particleRadius, particleOptions);\r\n        });\r\n\r\n        Composites.mesh(softBody, columns, rows, crossBrace, constraintOptions);\r\n\r\n        softBody.label = 'Soft Body';\r\n\r\n        return softBody;\r\n    };\r\n\r\n})();\r\n\r\n\r\n;   // End src/factory/Composites.js\r\n\r\n\r\n// Begin src/geometry/Axes.js\r\n\r\n/**\r\n* _Internal Class_, not generally used outside of the engine's internals.\r\n*\r\n* @class Axes\r\n*/\r\n\r\nvar Axes = {};\r\n\r\n(function() {\r\n\r\n    /**\r\n     * Description\r\n     * @method fromVertices\r\n     * @param {vertices} vertices\r\n     * @return {axes} A new axes from the given vertices\r\n     */\r\n    Axes.fromVertices = function(vertices) {\r\n        var axes = {};\r\n\r\n        // find the unique axes, using edge normal gradients\r\n        for (var i = 0; i < vertices.length; i++) {\r\n            var j = (i + 1) % vertices.length, \r\n                normal = Vector.normalise({ \r\n                    x: vertices[j].y - vertices[i].y, \r\n                    y: vertices[i].x - vertices[j].x\r\n                }),\r\n                gradient = (normal.y === 0) ? Infinity : (normal.x / normal.y);\r\n            \r\n            // limit precision\r\n            gradient = gradient.toFixed(3).toString();\r\n\r\n            axes[gradient] = normal;\r\n        }\r\n\r\n        return Common.values(axes);\r\n    };\r\n\r\n    /**\r\n     * Description\r\n     * @method rotate\r\n     * @param {axes} axes\r\n     * @param {number} angle\r\n     */\r\n    Axes.rotate = function(axes, angle) {\r\n        if (angle === 0)\r\n            return;\r\n        \r\n        var cos = Math.cos(angle),\r\n            sin = Math.sin(angle);\r\n\r\n        for (var i = 0; i < axes.length; i++) {\r\n            var axis = axes[i],\r\n                xx;\r\n            xx = axis.x * cos - axis.y * sin;\r\n            axis.y = axis.x * sin + axis.y * cos;\r\n            axis.x = xx;\r\n        }\r\n    };\r\n\r\n})();\r\n\r\n;   // End src/geometry/Axes.js\r\n\r\n\r\n// Begin src/geometry/Bounds.js\r\n\r\n/**\r\n* _Internal Class_, not generally used outside of the engine's internals.\r\n*\r\n* @class Bounds\r\n*/\r\n\r\nvar Bounds = {};\r\n\r\n(function() {\r\n\r\n    /**\r\n     * Description\r\n     * @method create\r\n     * @param {vertices} vertices\r\n     * @return {bounds} A new bounds object\r\n     */\r\n    Bounds.create = function(vertices) {\r\n        var bounds = { \r\n            min: { x: 0, y: 0 }, \r\n            max: { x: 0, y: 0 }\r\n        };\r\n\r\n        if (vertices)\r\n            Bounds.update(bounds, vertices);\r\n        \r\n        return bounds;\r\n    };\r\n\r\n    /**\r\n     * Description\r\n     * @method update\r\n     * @param {bounds} bounds\r\n     * @param {vertices} vertices\r\n     * @param {vector} velocity\r\n     */\r\n    Bounds.update = function(bounds, vertices, velocity) {\r\n        bounds.min.x = Number.MAX_VALUE;\r\n        bounds.max.x = Number.MIN_VALUE;\r\n        bounds.min.y = Number.MAX_VALUE;\r\n        bounds.max.y = Number.MIN_VALUE;\r\n\r\n        for (var i = 0; i < vertices.length; i++) {\r\n            var vertex = vertices[i];\r\n            if (vertex.x > bounds.max.x) bounds.max.x = vertex.x;\r\n            if (vertex.x < bounds.min.x) bounds.min.x = vertex.x;\r\n            if (vertex.y > bounds.max.y) bounds.max.y = vertex.y;\r\n            if (vertex.y < bounds.min.y) bounds.min.y = vertex.y;\r\n        }\r\n        \r\n        if (velocity) {\r\n            if (velocity.x > 0) {\r\n                bounds.max.x += velocity.x;\r\n            } else {\r\n                bounds.min.x += velocity.x;\r\n            }\r\n            \r\n            if (velocity.y > 0) {\r\n                bounds.max.y += velocity.y;\r\n            } else {\r\n                bounds.min.y += velocity.y;\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Description\r\n     * @method contains\r\n     * @param {bounds} bounds\r\n     * @param {vector} point\r\n     * @return {boolean} True if the bounds contain the point, otherwise false\r\n     */\r\n    Bounds.contains = function(bounds, point) {\r\n        return point.x >= bounds.min.x && point.x <= bounds.max.x \r\n               && point.y >= bounds.min.y && point.y <= bounds.max.y;\r\n    };\r\n\r\n    /**\r\n     * Description\r\n     * @method overlaps\r\n     * @param {bounds} boundsA\r\n     * @param {bounds} boundsB\r\n     * @return {boolean} True if the bounds overlap, otherwise false\r\n     */\r\n    Bounds.overlaps = function(boundsA, boundsB) {\r\n        return (boundsA.min.x <= boundsB.max.x && boundsA.max.x >= boundsB.min.x\r\n                && boundsA.max.y >= boundsB.min.y && boundsA.min.y <= boundsB.max.y);\r\n    };\r\n\r\n    /**\r\n     * Translates the bounds by the given vector\r\n     * @method translate\r\n     * @param {bounds} bounds\r\n     * @param {vector} vector\r\n     */\r\n    Bounds.translate = function(bounds, vector) {\r\n        bounds.min.x += vector.x;\r\n        bounds.max.x += vector.x;\r\n        bounds.min.y += vector.y;\r\n        bounds.max.y += vector.y;\r\n    };\r\n\r\n    /**\r\n     * Shifts the bounds to the given position\r\n     * @method shift\r\n     * @param {bounds} bounds\r\n     * @param {vector} position\r\n     */\r\n    Bounds.shift = function(bounds, position) {\r\n        var deltaX = bounds.max.x - bounds.min.x,\r\n            deltaY = bounds.max.y - bounds.min.y;\r\n            \r\n        bounds.min.x = position.x;\r\n        bounds.max.x = position.x + deltaX;\r\n        bounds.min.y = position.y;\r\n        bounds.max.y = position.y + deltaY;\r\n    };\r\n    \r\n})();\r\n\r\n;   // End src/geometry/Bounds.js\r\n\r\n\r\n// Begin src/geometry/Vector.js\r\n\r\n/**\r\n* The `Matter.Vector` module contains methods for creating and manipulating vectors.\r\n* Vectors are the basis of all the geometry related operations in the engine.\r\n* A `Matter.Vector` object is of the form `{ x: 0, y: 0 }`.\r\n*\r\n* See [Demo.js](https://github.com/liabru/matter-js/blob/master/demo/js/Demo.js) \r\n* and [DemoMobile.js](https://github.com/liabru/matter-js/blob/master/demo/js/DemoMobile.js) for usage examples.\r\n*\r\n* @class Vector\r\n*/\r\n\r\n// TODO: consider params for reusing vector objects\r\n\r\nvar Vector = {};\r\n\r\n(function() {\r\n\r\n    /**\r\n     * Returns a new vector with `x` and `y` copied from the given `vector`.\r\n     * @method clone\r\n     * @param {vector} vector\r\n     * @return {vector} A new cloned vector\r\n     */\r\n    Vector.clone = function(vector) {\r\n        return { x: vector.x, y: vector.y };\r\n    };\r\n\r\n    /**\r\n     * Returns the magnitude (length) of a vector.\r\n     * @method magnitude\r\n     * @param {vector} vector\r\n     * @return {number} The magnitude of the vector\r\n     */\r\n    Vector.magnitude = function(vector) {\r\n        return Math.sqrt((vector.x * vector.x) + (vector.y * vector.y));\r\n    };\r\n\r\n    /**\r\n     * Returns the magnitude (length) of a vector (therefore saving a `sqrt` operation).\r\n     * @method magnitudeSquared\r\n     * @param {vector} vector\r\n     * @return {number} The squared magnitude of the vector\r\n     */\r\n    Vector.magnitudeSquared = function(vector) {\r\n        return (vector.x * vector.x) + (vector.y * vector.y);\r\n    };\r\n\r\n    /**\r\n     * Rotates the vector about (0, 0) by specified angle.\r\n     * @method rotate\r\n     * @param {vector} vector\r\n     * @param {number} angle\r\n     * @return {vector} A new vector rotated about (0, 0)\r\n     */\r\n    Vector.rotate = function(vector, angle) {\r\n        var cos = Math.cos(angle), sin = Math.sin(angle);\r\n        return {\r\n            x: vector.x * cos - vector.y * sin,\r\n            y: vector.x * sin + vector.y * cos\r\n        };\r\n    };\r\n\r\n    /**\r\n     * Rotates the vector about a specified point by specified angle.\r\n     * @method rotateAbout\r\n     * @param {vector} vector\r\n     * @param {number} angle\r\n     * @param {vector} point\r\n     * @return {vector} A new vector rotated about the point\r\n     */\r\n    Vector.rotateAbout = function(vector, angle, point) {\r\n        var cos = Math.cos(angle), sin = Math.sin(angle);\r\n        return {\r\n            x: point.x + ((vector.x - point.x) * cos - (vector.y - point.y) * sin),\r\n            y: point.y + ((vector.x - point.x) * sin + (vector.y - point.y) * cos)\r\n        };\r\n    };\r\n\r\n    /**\r\n     * Normalises a vector (such that its magnitude is `1`).\r\n     * @method normalise\r\n     * @param {vector} vector\r\n     * @return {vector} A new vector normalised\r\n     */\r\n    Vector.normalise = function(vector) {\r\n        var magnitude = Vector.magnitude(vector);\r\n        if (magnitude === 0)\r\n            return { x: 0, y: 0 };\r\n        return { x: vector.x / magnitude, y: vector.y / magnitude };\r\n    };\r\n\r\n    /**\r\n     * Returns the dot-product of two vectors.\r\n     * @method dot\r\n     * @param {vector} vectorA\r\n     * @param {vector} vectorB\r\n     * @return {number} The dot product of the two vectors\r\n     */\r\n    Vector.dot = function(vectorA, vectorB) {\r\n        return (vectorA.x * vectorB.x) + (vectorA.y * vectorB.y);\r\n    };\r\n\r\n    /**\r\n     * Returns the cross-product of two vectors.\r\n     * @method cross\r\n     * @param {vector} vectorA\r\n     * @param {vector} vectorB\r\n     * @return {number} The cross product of the two vectors\r\n     */\r\n    Vector.cross = function(vectorA, vectorB) {\r\n        return (vectorA.x * vectorB.y) - (vectorA.y * vectorB.x);\r\n    };\r\n\r\n    /**\r\n     * Adds the two vectors.\r\n     * @method add\r\n     * @param {vector} vectorA\r\n     * @param {vector} vectorB\r\n     * @return {vector} A new vector of vectorA and vectorB added\r\n     */\r\n    Vector.add = function(vectorA, vectorB) {\r\n        return { x: vectorA.x + vectorB.x, y: vectorA.y + vectorB.y };\r\n    };\r\n\r\n    /**\r\n     * Subtracts the two vectors.\r\n     * @method sub\r\n     * @param {vector} vectorA\r\n     * @param {vector} vectorB\r\n     * @return {vector} A new vector of vectorA and vectorB subtracted\r\n     */\r\n    Vector.sub = function(vectorA, vectorB) {\r\n        return { x: vectorA.x - vectorB.x, y: vectorA.y - vectorB.y };\r\n    };\r\n\r\n    /**\r\n     * Multiplies a vector and a scalar.\r\n     * @method mult\r\n     * @param {vector} vector\r\n     * @param {number} scalar\r\n     * @return {vector} A new vector multiplied by scalar\r\n     */\r\n    Vector.mult = function(vector, scalar) {\r\n        return { x: vector.x * scalar, y: vector.y * scalar };\r\n    };\r\n\r\n    /**\r\n     * Divides a vector and a scalar.\r\n     * @method div\r\n     * @param {vector} vector\r\n     * @param {number} scalar\r\n     * @return {vector} A new vector divided by scalar\r\n     */\r\n    Vector.div = function(vector, scalar) {\r\n        return { x: vector.x / scalar, y: vector.y / scalar };\r\n    };\r\n\r\n    /**\r\n     * Returns the perpendicular vector. Set `negate` to true for the perpendicular in the opposite direction.\r\n     * @method perp\r\n     * @param {vector} vector\r\n     * @param {bool} [negate=false]\r\n     * @return {vector} The perpendicular vector\r\n     */\r\n    Vector.perp = function(vector, negate) {\r\n        negate = negate === true ? -1 : 1;\r\n        return { x: negate * -vector.y, y: negate * vector.x };\r\n    };\r\n\r\n    /**\r\n     * Negates both components of a vector such that it points in the opposite direction.\r\n     * @method neg\r\n     * @param {vector} vector\r\n     * @return {vector} The negated vector\r\n     */\r\n    Vector.neg = function(vector) {\r\n        return { x: -vector.x, y: -vector.y };\r\n    };\r\n\r\n    /**\r\n     * Returns the angle in radians between the two vectors relative to the x-axis.\r\n     * @method angle\r\n     * @param {vector} vectorA\r\n     * @param {vector} vectorB\r\n     * @return {number} The angle in radians\r\n     */\r\n    Vector.angle = function(vectorA, vectorB) {\r\n        return Math.atan2(vectorB.y - vectorA.y, vectorB.x - vectorA.x);\r\n    };\r\n\r\n})();\r\n\r\n;   // End src/geometry/Vector.js\r\n\r\n\r\n// Begin src/geometry/Vertices.js\r\n\r\n/**\r\n* The `Matter.Vertices` module contains methods for creating and manipulating sets of vertices.\r\n* A set of vertices is an array of `Matter.Vector` with additional indexing properties inserted by `Vertices.create`.\r\n* A `Matter.Body` maintains a set of vertices to represent the shape of the object (its convex hull).\r\n*\r\n* See [Demo.js](https://github.com/liabru/matter-js/blob/master/demo/js/Demo.js) \r\n* and [DemoMobile.js](https://github.com/liabru/matter-js/blob/master/demo/js/DemoMobile.js) for usage examples.\r\n*\r\n* @class Vertices\r\n*/\r\n\r\n// TODO: convex decomposition - http://mnbayazit.com/406/bayazit\r\n\r\nvar Vertices = {};\r\n\r\n(function() {\r\n\r\n    /**\r\n     * Creates a new set of `Matter.Body` compatible vertices.\r\n     * The `points` argument accepts an array of `Matter.Vector` points orientated around the origin `(0, 0)`, for example:\r\n     *\r\n     *     [{ x: 0, y: 0 }, { x: 25, y: 50 }, { x: 50, y: 0 }]\r\n     *\r\n     * The `Vertices.create` method returns a new array of vertices, which are similar to Matter.Vector objects,\r\n     * but with some additional references required for efficient collision detection routines.\r\n     *\r\n     * Note that the `body` argument is not optional, a `Matter.Body` reference must be provided.\r\n     *\r\n     * @method create\r\n     * @param {vector[]} points\r\n     * @param {body} body\r\n     */\r\n    Vertices.create = function(points, body) {\r\n        var vertices = [];\r\n\r\n        for (var i = 0; i < points.length; i++) {\r\n            var point = points[i],\r\n                vertex = {};\r\n\r\n            vertex.x = point.x;\r\n            vertex.y = point.y;\r\n            vertex.index = i;\r\n            vertex.body = body;\r\n\r\n            vertices.push(vertex);\r\n        }\r\n\r\n        return vertices;\r\n    };\r\n\r\n    /**\r\n     * Parses a _simple_ SVG-style path into a `Matter.Vertices` object for the given `Matter.Body`.\r\n     * @method fromPath\r\n     * @param {string} path\r\n     * @param {body} body\r\n     * @return {vertices} vertices\r\n     */\r\n    Vertices.fromPath = function(path, body) {\r\n        var pathPattern = /L\\s*([\\-\\d\\.]*)\\s*([\\-\\d\\.]*)/ig,\r\n            points = [];\r\n\r\n        path.replace(pathPattern, function(match, x, y) {\r\n            points.push({ x: parseFloat(x), y: parseFloat(y) });\r\n        });\r\n\r\n        return Vertices.create(points, body);\r\n    };\r\n\r\n    /**\r\n     * Returns the centre (centroid) of the set of vertices.\r\n     * @method centre\r\n     * @param {vertices} vertices\r\n     * @return {vector} The centre point\r\n     */\r\n    Vertices.centre = function(vertices) {\r\n        var area = Vertices.area(vertices, true),\r\n            centre = { x: 0, y: 0 },\r\n            cross,\r\n            temp,\r\n            j;\r\n\r\n        for (var i = 0; i < vertices.length; i++) {\r\n            j = (i + 1) % vertices.length;\r\n            cross = Vector.cross(vertices[i], vertices[j]);\r\n            temp = Vector.mult(Vector.add(vertices[i], vertices[j]), cross);\r\n            centre = Vector.add(centre, temp);\r\n        }\r\n\r\n        return Vector.div(centre, 6 * area);\r\n    };\r\n\r\n    /**\r\n     * Returns the area of the set of vertices.\r\n     * @method area\r\n     * @param {vertices} vertices\r\n     * @param {bool} signed\r\n     * @return {number} The area\r\n     */\r\n    Vertices.area = function(vertices, signed) {\r\n        var area = 0,\r\n            j = vertices.length - 1;\r\n\r\n        for (var i = 0; i < vertices.length; i++) {\r\n            area += (vertices[j].x - vertices[i].x) * (vertices[j].y + vertices[i].y);\r\n            j = i;\r\n        }\r\n\r\n        if (signed)\r\n            return area / 2;\r\n\r\n        return Math.abs(area) / 2;\r\n    };\r\n\r\n    /**\r\n     * Returns the moment of inertia (second moment of area) of the set of vertices given the total mass.\r\n     * @method inertia\r\n     * @param {vertices} vertices\r\n     * @param {number} mass\r\n     * @return {number} The polygon's moment of inertia\r\n     */\r\n    Vertices.inertia = function(vertices, mass) {\r\n        var numerator = 0,\r\n            denominator = 0,\r\n            v = vertices,\r\n            cross,\r\n            j;\r\n\r\n        // find the polygon's moment of inertia, using second moment of area\r\n        // http://www.physicsforums.com/showthread.php?t=25293\r\n        for (var n = 0; n < v.length; n++) {\r\n            j = (n + 1) % v.length;\r\n            cross = Math.abs(Vector.cross(v[j], v[n]));\r\n            numerator += cross * (Vector.dot(v[j], v[j]) + Vector.dot(v[j], v[n]) + Vector.dot(v[n], v[n]));\r\n            denominator += cross;\r\n        }\r\n\r\n        return (mass / 6) * (numerator / denominator);\r\n    };\r\n\r\n    /**\r\n     * Translates the set of vertices in-place.\r\n     * @method translate\r\n     * @param {vertices} vertices\r\n     * @param {vector} vector\r\n     * @param {number} scalar\r\n     */\r\n    Vertices.translate = function(vertices, vector, scalar) {\r\n        var i;\r\n        if (scalar) {\r\n            for (i = 0; i < vertices.length; i++) {\r\n                vertices[i].x += vector.x * scalar;\r\n                vertices[i].y += vector.y * scalar;\r\n            }\r\n        } else {\r\n            for (i = 0; i < vertices.length; i++) {\r\n                vertices[i].x += vector.x;\r\n                vertices[i].y += vector.y;\r\n            }\r\n        }\r\n\r\n        return vertices;\r\n    };\r\n\r\n    /**\r\n     * Rotates the set of vertices in-place.\r\n     * @method rotate\r\n     * @param {vertices} vertices\r\n     * @param {number} angle\r\n     * @param {vector} point\r\n     */\r\n    Vertices.rotate = function(vertices, angle, point) {\r\n        if (angle === 0)\r\n            return;\r\n\r\n        var cos = Math.cos(angle),\r\n            sin = Math.sin(angle);\r\n\r\n        for (var i = 0; i < vertices.length; i++) {\r\n            var vertice = vertices[i],\r\n                dx = vertice.x - point.x,\r\n                dy = vertice.y - point.y;\r\n                \r\n            vertice.x = point.x + (dx * cos - dy * sin);\r\n            vertice.y = point.y + (dx * sin + dy * cos);\r\n        }\r\n\r\n        return vertices;\r\n    };\r\n\r\n    /**\r\n     * Returns `true` if the `point` is inside the set of `vertices`.\r\n     * @method contains\r\n     * @param {vertices} vertices\r\n     * @param {vector} point\r\n     * @return {boolean} True if the vertices contains point, otherwise false\r\n     */\r\n    Vertices.contains = function(vertices, point) {\r\n        for (var i = 0; i < vertices.length; i++) {\r\n            var vertice = vertices[i],\r\n                nextVertice = vertices[(i + 1) % vertices.length];\r\n            if ((point.x - vertice.x) * (nextVertice.y - vertice.y) + (point.y - vertice.y) * (vertice.x - nextVertice.x) > 0) {\r\n                return false;\r\n            }\r\n        }\r\n\r\n        return true;\r\n    };\r\n\r\n    /**\r\n     * Scales the vertices from a point (default is centre) in-place.\r\n     * @method scale\r\n     * @param {vertices} vertices\r\n     * @param {number} scaleX\r\n     * @param {number} scaleY\r\n     * @param {vector} point\r\n     */\r\n    Vertices.scale = function(vertices, scaleX, scaleY, point) {\r\n        if (scaleX === 1 && scaleY === 1)\r\n            return vertices;\r\n\r\n        point = point || Vertices.centre(vertices);\r\n\r\n        var vertex,\r\n            delta;\r\n\r\n        for (var i = 0; i < vertices.length; i++) {\r\n            vertex = vertices[i];\r\n            delta = Vector.sub(vertex, point);\r\n            vertices[i].x = point.x + delta.x * scaleX;\r\n            vertices[i].y = point.y + delta.y * scaleY;\r\n        }\r\n\r\n        return vertices;\r\n    };\r\n\r\n    /**\r\n     * Chamfers a set of vertices by giving them rounded corners, returns a new set of vertices.\r\n     * The radius parameter is a single number or an array to specify the radius for each vertex.\r\n     * @method chamfer\r\n     * @param {vertices} vertices\r\n     * @param {number[]} radius\r\n     * @param {number} quality\r\n     * @param {number} qualityMin\r\n     * @param {number} qualityMax\r\n     */\r\n    Vertices.chamfer = function(vertices, radius, quality, qualityMin, qualityMax) {\r\n        radius = radius || [8];\r\n\r\n        if (!radius.length)\r\n            radius = [radius];\r\n\r\n        // quality defaults to -1, which is auto\r\n        quality = (typeof quality !== 'undefined') ? quality : -1;\r\n        qualityMin = qualityMin || 2;\r\n        qualityMax = qualityMax || 14;\r\n\r\n        var newVertices = [];\r\n\r\n        for (var i = 0; i < vertices.length; i++) {\r\n            var prevVertex = vertices[i - 1 >= 0 ? i - 1 : vertices.length - 1],\r\n                vertex = vertices[i],\r\n                nextVertex = vertices[(i + 1) % vertices.length],\r\n                currentRadius = radius[i < radius.length ? i : radius.length - 1];\r\n\r\n            if (currentRadius === 0) {\r\n                newVertices.push(vertex);\r\n                continue;\r\n            }\r\n\r\n            var prevNormal = Vector.normalise({ \r\n                x: vertex.y - prevVertex.y, \r\n                y: prevVertex.x - vertex.x\r\n            });\r\n\r\n            var nextNormal = Vector.normalise({ \r\n                x: nextVertex.y - vertex.y, \r\n                y: vertex.x - nextVertex.x\r\n            });\r\n\r\n            var diagonalRadius = Math.sqrt(2 * Math.pow(currentRadius, 2)),\r\n                radiusVector = Vector.mult(Common.clone(prevNormal), currentRadius),\r\n                midNormal = Vector.normalise(Vector.mult(Vector.add(prevNormal, nextNormal), 0.5)),\r\n                scaledVertex = Vector.sub(vertex, Vector.mult(midNormal, diagonalRadius));\r\n\r\n            var precision = quality;\r\n\r\n            if (quality === -1) {\r\n                // automatically decide precision\r\n                precision = Math.pow(currentRadius, 0.32) * 1.75;\r\n            }\r\n\r\n            precision = Common.clamp(precision, qualityMin, qualityMax);\r\n\r\n            // use an even value for precision, more likely to reduce axes by using symmetry\r\n            if (precision % 2 === 1)\r\n                precision += 1;\r\n\r\n            var alpha = Math.acos(Vector.dot(prevNormal, nextNormal)),\r\n                theta = alpha / precision;\r\n\r\n            for (var j = 0; j < precision; j++) {\r\n                newVertices.push(Vector.add(Vector.rotate(radiusVector, theta * j), scaledVertex));\r\n            }\r\n        }\r\n\r\n        return newVertices;\r\n    };\r\n\r\n})();\r\n\r\n\r\n;   // End src/geometry/Vertices.js\r\n\r\n\r\n// Begin src/render/Render.js\r\n\r\n/**\r\n* The `Matter.Render` module is the default `render.controller` used by a `Matter.Engine`.\r\n* This renderer is HTML5 canvas based and supports a number of drawing options including sprites and viewports.\r\n*\r\n* It is possible develop a custom renderer module based on `Matter.Render` and pass an instance of it to `Engine.create` via `options.render`.\r\n* A minimal custom renderer object must define at least three functions: `create`, `clear` and `world` (see `Matter.Render`).\r\n*\r\n* See also `Matter.RenderPixi` for an alternate WebGL, scene-graph based renderer.\r\n*\r\n* @class Render\r\n*/\r\n\r\nvar Render = {};\r\n\r\n(function() {\r\n    \r\n    /**\r\n     * Creates a new renderer. The options parameter is an object that specifies any properties you wish to override the defaults.\r\n     * All properties have default values, and many are pre-calculated automatically based on other properties.\r\n     * See the properites section below for detailed information on what you can pass via the `options` object.\r\n     * @method create\r\n     * @param {object} [options]\r\n     * @return {render} A new renderer\r\n     */\r\n    Render.create = function(options) {\r\n        var defaults = {\r\n            controller: Render,\r\n            element: null,\r\n            canvas: null,\r\n            options: {\r\n                width: 800,\r\n                height: 600,\r\n                pixelRatio: 1,\r\n                background: '#fafafa',\r\n                wireframeBackground: '#222',\r\n                hasBounds: false,\r\n                enabled: true,\r\n                wireframes: true,\r\n                showSleeping: true,\r\n                showDebug: false,\r\n                showBroadphase: false,\r\n                showBounds: false,\r\n                showVelocity: false,\r\n                showCollisions: false,\r\n                showAxes: false,\r\n                showPositions: false,\r\n                showAngleIndicator: false,\r\n                showIds: false,\r\n                showShadows: false\r\n            }\r\n        };\r\n\r\n        var render = Common.extend(defaults, options);\r\n\r\n        render.canvas = render.canvas || _createCanvas(render.options.width, render.options.height);\r\n        render.context = render.canvas.getContext('2d');\r\n        render.textures = {};\r\n\r\n        render.bounds = render.bounds || { \r\n            min: { \r\n                x: 0,\r\n                y: 0\r\n            }, \r\n            max: { \r\n                x: render.options.width,\r\n                y: render.options.height\r\n            }\r\n        };\r\n\r\n        if (render.options.pixelRatio !== 1) {\r\n            Render.setPixelRatio(render, render.options.pixelRatio);\r\n        }\r\n\r\n        if (Common.isElement(render.element)) {\r\n            render.element.appendChild(render.canvas);\r\n        } else {\r\n            Common.log('Render.create: options.element was undefined, render.canvas was created but not appended', 'warn');\r\n        }\r\n\r\n        return render;\r\n    };\r\n\r\n    /**\r\n     * Sets the pixel ratio of the renderer and updates the canvas.\r\n     * To automatically detect the correct ratio, pass the string `'auto'` for `pixelRatio`.\r\n     * @method setPixelRatio\r\n     * @param {render} render\r\n     * @param {number} pixelRatio\r\n     */\r\n    Render.setPixelRatio = function(render, pixelRatio) {\r\n        var options = render.options,\r\n            canvas = render.canvas;\r\n\r\n        if (pixelRatio === 'auto') {\r\n            pixelRatio = _getPixelRatio(canvas);\r\n        }\r\n\r\n        options.pixelRatio = pixelRatio;\r\n        canvas.setAttribute('data-pixel-ratio', pixelRatio);\r\n        canvas.width = options.width * pixelRatio;\r\n        canvas.height = options.height * pixelRatio;\r\n        canvas.style.width = options.width + 'px';\r\n        canvas.style.height = options.height + 'px';\r\n        render.context.scale(pixelRatio, pixelRatio);\r\n    };\r\n\r\n    /**\r\n     * Renders the given `engine`'s `Matter.World` object.\r\n     * This is the entry point for all rendering and should be called every time the scene changes.\r\n     * @method world\r\n     * @param {engine} engine\r\n     */\r\n    Render.world = function(engine) {\r\n        var render = engine.render,\r\n            world = engine.world,\r\n            canvas = render.canvas,\r\n            context = render.context,\r\n            options = render.options,\r\n            allBodies = Composite.allBodies(world),\r\n            allConstraints = Composite.allConstraints(world),\r\n            background = options.wireframes ? options.wireframeBackground : options.background,\r\n            bodies = [],\r\n            constraints = [],\r\n            i;\r\n\r\n        // apply background if it has changed\r\n        if (render.currentBackground !== background)\r\n            _applyBackground(render, background);\r\n\r\n        // clear the canvas with a transparent fill, to allow the canvas background to show\r\n        context.globalCompositeOperation = 'source-in';\r\n        context.fillStyle = \"transparent\";\r\n        context.fillRect(0, 0, canvas.width, canvas.height);\r\n        context.globalCompositeOperation = 'source-over';\r\n\r\n        // handle bounds\r\n        if (options.hasBounds) {\r\n            var boundsWidth = render.bounds.max.x - render.bounds.min.x,\r\n                boundsHeight = render.bounds.max.y - render.bounds.min.y,\r\n                boundsScaleX = boundsWidth / options.width,\r\n                boundsScaleY = boundsHeight / options.height;\r\n\r\n            // filter out bodies that are not in view\r\n            for (i = 0; i < allBodies.length; i++) {\r\n                var body = allBodies[i];\r\n                if (Bounds.overlaps(body.bounds, render.bounds))\r\n                    bodies.push(body);\r\n            }\r\n\r\n            // filter out constraints that are not in view\r\n            for (i = 0; i < allConstraints.length; i++) {\r\n                var constraint = allConstraints[i],\r\n                    bodyA = constraint.bodyA,\r\n                    bodyB = constraint.bodyB,\r\n                    pointAWorld = constraint.pointA,\r\n                    pointBWorld = constraint.pointB;\r\n\r\n                if (bodyA) pointAWorld = Vector.add(bodyA.position, constraint.pointA);\r\n                if (bodyB) pointBWorld = Vector.add(bodyB.position, constraint.pointB);\r\n\r\n                if (!pointAWorld || !pointBWorld)\r\n                    continue;\r\n\r\n                if (Bounds.contains(render.bounds, pointAWorld) || Bounds.contains(render.bounds, pointBWorld))\r\n                    constraints.push(constraint);\r\n            }\r\n\r\n            // transform the view\r\n            context.scale(1 / boundsScaleX, 1 / boundsScaleY);\r\n            context.translate(-render.bounds.min.x, -render.bounds.min.y);\r\n        } else {\r\n            constraints = allConstraints;\r\n            bodies = allBodies;\r\n        }\r\n\r\n        if (!options.wireframes || (engine.enableSleeping && options.showSleeping)) {\r\n            // fully featured rendering of bodies\r\n            Render.bodies(engine, bodies, context);\r\n        } else {\r\n            // optimised method for wireframes only\r\n            Render.bodyWireframes(engine, bodies, context);\r\n        }\r\n\r\n        if (options.showBounds)\r\n            Render.bodyBounds(engine, bodies, context);\r\n\r\n        if (options.showAxes || options.showAngleIndicator)\r\n            Render.bodyAxes(engine, bodies, context);\r\n        \r\n        if (options.showPositions)\r\n            Render.bodyPositions(engine, bodies, context);\r\n\r\n        if (options.showVelocity)\r\n            Render.bodyVelocity(engine, bodies, context);\r\n\r\n        if (options.showIds)\r\n            Render.bodyIds(engine, bodies, context);\r\n\r\n        if (options.showCollisions)\r\n            Render.collisions(engine, engine.pairs.list, context);\r\n\r\n        Render.constraints(constraints, context);\r\n\r\n        if (options.showBroadphase && engine.broadphase.controller === Grid)\r\n            Render.grid(engine, engine.broadphase, context);\r\n\r\n        if (options.showDebug)\r\n            Render.debug(engine, context);\r\n\r\n        if (options.hasBounds) {\r\n            // revert view transforms\r\n            context.setTransform(options.pixelRatio, 0, 0, options.pixelRatio, 0, 0);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Description\r\n     * @private\r\n     * @method debug\r\n     * @param {engine} engine\r\n     * @param {RenderingContext} context\r\n     */\r\n    Render.debug = function(engine, context) {\r\n        var c = context,\r\n            world = engine.world,\r\n            render = engine.render,\r\n            options = render.options,\r\n            bodies = Composite.allBodies(world),\r\n            space = \"    \";\r\n\r\n        if (engine.timing.timestamp - (render.debugTimestamp || 0) >= 500) {\r\n            var text = \"\";\r\n            text += \"fps: \" + Math.round(engine.timing.fps) + space;\r\n\r\n            if (engine.metrics.extended) {\r\n                text += \"delta: \" + engine.timing.delta.toFixed(3) + space;\r\n                text += \"correction: \" + engine.timing.correction.toFixed(3) + space;\r\n                text += \"bodies: \" + bodies.length + space;\r\n\r\n                if (engine.broadphase.controller === Grid)\r\n                    text += \"buckets: \" + engine.metrics.buckets + space;\r\n\r\n                text += \"\\n\";\r\n\r\n                text += \"collisions: \" + engine.metrics.collisions + space;\r\n                text += \"pairs: \" + engine.pairs.list.length + space;\r\n                text += \"broad: \" + engine.metrics.broadEff + space;\r\n                text += \"mid: \" + engine.metrics.midEff + space;\r\n                text += \"narrow: \" + engine.metrics.narrowEff + space;\r\n            }            \r\n\r\n            render.debugString = text;\r\n            render.debugTimestamp = engine.timing.timestamp;\r\n        }\r\n\r\n        if (render.debugString) {\r\n            c.font = \"12px Arial\";\r\n\r\n            if (options.wireframes) {\r\n                c.fillStyle = 'rgba(255,255,255,0.5)';\r\n            } else {\r\n                c.fillStyle = 'rgba(0,0,0,0.5)';\r\n            }\r\n\r\n            var split = render.debugString.split('\\n');\r\n\r\n            for (var i = 0; i < split.length; i++) {\r\n                c.fillText(split[i], 50, 50 + i * 18);\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Description\r\n     * @private\r\n     * @method constraints\r\n     * @param {constraint[]} constraints\r\n     * @param {RenderingContext} context\r\n     */\r\n    Render.constraints = function(constraints, context) {\r\n        var c = context;\r\n\r\n        for (var i = 0; i < constraints.length; i++) {\r\n            var constraint = constraints[i];\r\n\r\n            if (!constraint.render.visible || !constraint.pointA || !constraint.pointB)\r\n                continue;\r\n\r\n            var bodyA = constraint.bodyA,\r\n                bodyB = constraint.bodyB;\r\n\r\n            if (bodyA) {\r\n                c.beginPath();\r\n                c.moveTo(bodyA.position.x + constraint.pointA.x, bodyA.position.y + constraint.pointA.y);\r\n            } else {\r\n                c.beginPath();\r\n                c.moveTo(constraint.pointA.x, constraint.pointA.y);\r\n            }\r\n\r\n            if (bodyB) {\r\n                c.lineTo(bodyB.position.x + constraint.pointB.x, bodyB.position.y + constraint.pointB.y);\r\n            } else {\r\n                c.lineTo(constraint.pointB.x, constraint.pointB.y);\r\n            }\r\n\r\n            c.lineWidth = constraint.render.lineWidth;\r\n            c.strokeStyle = constraint.render.strokeStyle;\r\n            c.stroke();\r\n        }\r\n    };\r\n    \r\n    /**\r\n     * Description\r\n     * @private\r\n     * @method bodyShadows\r\n     * @param {engine} engine\r\n     * @param {body[]} bodies\r\n     * @param {RenderingContext} context\r\n     */\r\n    Render.bodyShadows = function(engine, bodies, context) {\r\n        var c = context,\r\n            render = engine.render;\r\n\r\n        for (var i = 0; i < bodies.length; i++) {\r\n            var body = bodies[i];\r\n\r\n            if (!body.render.visible)\r\n                continue;\r\n\r\n            if (body.circleRadius) {\r\n                c.beginPath();\r\n                c.arc(body.position.x, body.position.y, body.circleRadius, 0, 2 * Math.PI);\r\n                c.closePath();\r\n            } else {\r\n                c.beginPath();\r\n                c.moveTo(body.vertices[0].x, body.vertices[0].y);\r\n                for (var j = 1; j < body.vertices.length; j++) {\r\n                    c.lineTo(body.vertices[j].x, body.vertices[j].y);\r\n                }\r\n                c.closePath();\r\n            }\r\n\r\n            var distanceX = body.position.x - render.options.width * 0.5,\r\n                distanceY = body.position.y - render.options.height * 0.2,\r\n                distance = Math.abs(distanceX) + Math.abs(distanceY);\r\n\r\n            c.shadowColor = 'rgba(0,0,0,0.15)';\r\n            c.shadowOffsetX = 0.05 * distanceX;\r\n            c.shadowOffsetY = 0.05 * distanceY;\r\n            c.shadowBlur = 1 + 12 * Math.min(1, distance / 1000);\r\n\r\n            c.fill();\r\n\r\n            c.shadowColor = null;\r\n            c.shadowOffsetX = null;\r\n            c.shadowOffsetY = null;\r\n            c.shadowBlur = null;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Description\r\n     * @private\r\n     * @method bodies\r\n     * @param {engine} engine\r\n     * @param {body[]} bodies\r\n     * @param {RenderingContext} context\r\n     */\r\n    Render.bodies = function(engine, bodies, context) {\r\n        var c = context,\r\n            render = engine.render,\r\n            options = render.options,\r\n            i;\r\n\r\n        for (i = 0; i < bodies.length; i++) {\r\n            var body = bodies[i];\r\n\r\n            if (!body.render.visible)\r\n                continue;\r\n\r\n            if (body.render.sprite && body.render.sprite.texture && !options.wireframes) {\r\n                // body sprite\r\n                var sprite = body.render.sprite,\r\n                    texture = _getTexture(render, sprite.texture);\r\n\r\n                if (options.showSleeping && body.isSleeping) \r\n                    c.globalAlpha = 0.5;\r\n\r\n                c.translate(body.position.x, body.position.y); \r\n                c.rotate(body.angle);\r\n\r\n                c.drawImage(texture, texture.width * -0.5 * sprite.xScale, texture.height * -0.5 * sprite.yScale, \r\n                            texture.width * sprite.xScale, texture.height * sprite.yScale);\r\n\r\n                // revert translation, hopefully faster than save / restore\r\n                c.rotate(-body.angle);\r\n                c.translate(-body.position.x, -body.position.y); \r\n\r\n                if (options.showSleeping && body.isSleeping) \r\n                    c.globalAlpha = 1;\r\n            } else {\r\n                // body polygon\r\n                if (body.circleRadius) {\r\n                    c.beginPath();\r\n                    c.arc(body.position.x, body.position.y, body.circleRadius, 0, 2 * Math.PI);\r\n                } else {\r\n                    c.beginPath();\r\n                    c.moveTo(body.vertices[0].x, body.vertices[0].y);\r\n                    for (var j = 1; j < body.vertices.length; j++) {\r\n                        c.lineTo(body.vertices[j].x, body.vertices[j].y);\r\n                    }\r\n                    c.closePath();\r\n                }\r\n\r\n                if (!options.wireframes) {\r\n                    if (options.showSleeping && body.isSleeping) {\r\n                        c.fillStyle = Common.shadeColor(body.render.fillStyle, 50);\r\n                    } else {\r\n                        c.fillStyle = body.render.fillStyle;\r\n                    }\r\n\r\n                    c.lineWidth = body.render.lineWidth;\r\n                    c.strokeStyle = body.render.strokeStyle;\r\n                    c.fill();\r\n                    c.stroke();\r\n                } else {\r\n                    c.lineWidth = 1;\r\n                    c.strokeStyle = '#bbb';\r\n                    if (options.showSleeping && body.isSleeping)\r\n                        c.strokeStyle = 'rgba(255,255,255,0.2)';\r\n                    c.stroke();\r\n                }\r\n            }\r\n        }\r\n\r\n    };\r\n\r\n    /**\r\n     * Optimised method for drawing body wireframes in one pass\r\n     * @private\r\n     * @method bodyWireframes\r\n     * @param {engine} engine\r\n     * @param {body[]} bodies\r\n     * @param {RenderingContext} context\r\n     */\r\n    Render.bodyWireframes = function(engine, bodies, context) {\r\n        var c = context,\r\n            i,\r\n            j;\r\n\r\n        c.beginPath();\r\n\r\n        for (i = 0; i < bodies.length; i++) {\r\n            var body = bodies[i];\r\n\r\n            if (!body.render.visible)\r\n                continue;\r\n\r\n            c.moveTo(body.vertices[0].x, body.vertices[0].y);\r\n\r\n            for (j = 1; j < body.vertices.length; j++) {\r\n                c.lineTo(body.vertices[j].x, body.vertices[j].y);\r\n            }\r\n            \r\n            c.lineTo(body.vertices[0].x, body.vertices[0].y);\r\n        }\r\n\r\n        c.lineWidth = 1;\r\n        c.strokeStyle = '#bbb';\r\n        c.stroke();\r\n    };\r\n\r\n    /**\r\n     * Draws body bounds\r\n     * @private\r\n     * @method bodyBounds\r\n     * @param {engine} engine\r\n     * @param {body[]} bodies\r\n     * @param {RenderingContext} context\r\n     */\r\n    Render.bodyBounds = function(engine, bodies, context) {\r\n        var c = context,\r\n            render = engine.render,\r\n            options = render.options;\r\n\r\n        c.beginPath();\r\n\r\n        for (var i = 0; i < bodies.length; i++) {\r\n            var body = bodies[i];\r\n\r\n            if (body.render.visible)\r\n                c.rect(body.bounds.min.x, body.bounds.min.y, body.bounds.max.x - body.bounds.min.x, body.bounds.max.y - body.bounds.min.y);\r\n        }\r\n\r\n        if (options.wireframes) {\r\n            c.strokeStyle = 'rgba(255,255,255,0.08)';\r\n        } else {\r\n            c.strokeStyle = 'rgba(0,0,0,0.1)';\r\n        }\r\n\r\n        c.lineWidth = 1;\r\n        c.stroke();\r\n    };\r\n\r\n    /**\r\n     * Draws body angle indicators and axes\r\n     * @private\r\n     * @method bodyAxes\r\n     * @param {engine} engine\r\n     * @param {body[]} bodies\r\n     * @param {RenderingContext} context\r\n     */\r\n    Render.bodyAxes = function(engine, bodies, context) {\r\n        var c = context,\r\n            render = engine.render,\r\n            options = render.options,\r\n            i,\r\n            j;\r\n\r\n        c.beginPath();\r\n\r\n        for (i = 0; i < bodies.length; i++) {\r\n            var body = bodies[i];\r\n\r\n            if (!body.render.visible)\r\n                continue;\r\n\r\n            if (options.showAxes) {\r\n                // render all axes\r\n                for (j = 0; j < body.axes.length; j++) {\r\n                    var axis = body.axes[j];\r\n                    c.moveTo(body.position.x, body.position.y);\r\n                    c.lineTo(body.position.x + axis.x * 20, body.position.y + axis.y * 20);\r\n                }\r\n            } else {\r\n                // render a single axis indicator\r\n                c.moveTo(body.position.x, body.position.y);\r\n                c.lineTo((body.vertices[0].x + body.vertices[body.vertices.length-1].x) / 2, \r\n                         (body.vertices[0].y + body.vertices[body.vertices.length-1].y) / 2);\r\n            }\r\n        }\r\n\r\n        if (options.wireframes) {\r\n            c.strokeStyle = 'indianred';\r\n        } else {\r\n            c.strokeStyle = 'rgba(0,0,0,0.3)';\r\n        }\r\n\r\n        c.lineWidth = 1;\r\n        c.stroke();\r\n    };\r\n\r\n    /**\r\n     * Draws body positions\r\n     * @private\r\n     * @method bodyPositions\r\n     * @param {engine} engine\r\n     * @param {body[]} bodies\r\n     * @param {RenderingContext} context\r\n     */\r\n    Render.bodyPositions = function(engine, bodies, context) {\r\n        var c = context,\r\n            render = engine.render,\r\n            options = render.options,\r\n            body,\r\n            i;\r\n\r\n        c.beginPath();\r\n\r\n        // render current positions\r\n        for (i = 0; i < bodies.length; i++) {\r\n            body = bodies[i];\r\n            if (body.render.visible) {\r\n                c.arc(body.position.x, body.position.y, 3, 0, 2 * Math.PI, false);\r\n                c.closePath();\r\n            }\r\n        }\r\n\r\n        if (options.wireframes) {\r\n            c.fillStyle = 'indianred';\r\n        } else {\r\n            c.fillStyle = 'rgba(0,0,0,0.5)';\r\n        }\r\n        c.fill();\r\n\r\n        c.beginPath();\r\n\r\n        // render previous positions\r\n        for (i = 0; i < bodies.length; i++) {\r\n            body = bodies[i];\r\n            if (body.render.visible) {\r\n                c.arc(body.positionPrev.x, body.positionPrev.y, 2, 0, 2 * Math.PI, false);\r\n                c.closePath();\r\n            }\r\n        }\r\n\r\n        c.fillStyle = 'rgba(255,165,0,0.8)';\r\n        c.fill();\r\n    };\r\n\r\n    /**\r\n     * Draws body velocity\r\n     * @private\r\n     * @method bodyVelocity\r\n     * @param {engine} engine\r\n     * @param {body[]} bodies\r\n     * @param {RenderingContext} context\r\n     */\r\n    Render.bodyVelocity = function(engine, bodies, context) {\r\n        var c = context;\r\n\r\n        c.beginPath();\r\n\r\n        for (var i = 0; i < bodies.length; i++) {\r\n            var body = bodies[i];\r\n\r\n            if (!body.render.visible)\r\n                continue;\r\n\r\n            c.moveTo(body.position.x, body.position.y);\r\n            c.lineTo(body.position.x + (body.position.x - body.positionPrev.x) * 2, body.position.y + (body.position.y - body.positionPrev.y) * 2);\r\n        }\r\n\r\n        c.lineWidth = 3;\r\n        c.strokeStyle = 'cornflowerblue';\r\n        c.stroke();\r\n    };\r\n\r\n    /**\r\n     * Draws body ids\r\n     * @private\r\n     * @method bodyIds\r\n     * @param {engine} engine\r\n     * @param {body[]} bodies\r\n     * @param {RenderingContext} context\r\n     */\r\n    Render.bodyIds = function(engine, bodies, context) {\r\n        var c = context;\r\n\r\n        for (var i = 0; i < bodies.length; i++) {\r\n            var body = bodies[i];\r\n\r\n            if (!body.render.visible)\r\n                continue;\r\n\r\n            c.font = \"12px Arial\";\r\n            c.fillStyle = 'rgba(255,255,255,0.5)';\r\n            c.fillText(body.id, body.position.x + 10, body.position.y - 10);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Description\r\n     * @private\r\n     * @method collisions\r\n     * @param {engine} engine\r\n     * @param {pair[]} pairs\r\n     * @param {RenderingContext} context\r\n     */\r\n    Render.collisions = function(engine, pairs, context) {\r\n        var c = context,\r\n            options = engine.render.options,\r\n            pair,\r\n            collision,\r\n            i,\r\n            j;\r\n\r\n        c.beginPath();\r\n\r\n        // render collision positions\r\n        for (i = 0; i < pairs.length; i++) {\r\n            pair = pairs[i];\r\n            collision = pair.collision;\r\n            for (j = 0; j < pair.activeContacts.length; j++) {\r\n                var contact = pair.activeContacts[j],\r\n                    vertex = contact.vertex;\r\n                c.rect(vertex.x - 1.5, vertex.y - 1.5, 3.5, 3.5);\r\n            }\r\n        }\r\n\r\n        if (options.wireframes) {\r\n            c.fillStyle = 'rgba(255,255,255,0.7)';\r\n        } else {\r\n            c.fillStyle = 'orange';\r\n        }\r\n        c.fill();\r\n\r\n        c.beginPath();\r\n            \r\n        // render collision normals\r\n        for (i = 0; i < pairs.length; i++) {\r\n            pair = pairs[i];\r\n            collision = pair.collision;\r\n\r\n            if (pair.activeContacts.length > 0) {\r\n                var normalPosX = pair.activeContacts[0].vertex.x,\r\n                    normalPosY = pair.activeContacts[0].vertex.y;\r\n\r\n                if (pair.activeContacts.length === 2) {\r\n                    normalPosX = (pair.activeContacts[0].vertex.x + pair.activeContacts[1].vertex.x) / 2;\r\n                    normalPosY = (pair.activeContacts[0].vertex.y + pair.activeContacts[1].vertex.y) / 2;\r\n                }\r\n                \r\n                c.moveTo(normalPosX - collision.normal.x * 8, normalPosY - collision.normal.y * 8);\r\n                c.lineTo(normalPosX, normalPosY);\r\n            }\r\n        }\r\n\r\n        if (options.wireframes) {\r\n            c.strokeStyle = 'rgba(255,165,0,0.7)';\r\n        } else {\r\n            c.strokeStyle = 'orange';\r\n        }\r\n\r\n        c.lineWidth = 1;\r\n        c.stroke();\r\n    };\r\n\r\n    /**\r\n     * Description\r\n     * @private\r\n     * @method grid\r\n     * @param {engine} engine\r\n     * @param {grid} grid\r\n     * @param {RenderingContext} context\r\n     */\r\n    Render.grid = function(engine, grid, context) {\r\n        var c = context,\r\n            options = engine.render.options;\r\n\r\n        if (options.wireframes) {\r\n            c.strokeStyle = 'rgba(255,180,0,0.1)';\r\n        } else {\r\n            c.strokeStyle = 'rgba(255,180,0,0.5)';\r\n        }\r\n\r\n        c.beginPath();\r\n\r\n        var bucketKeys = Common.keys(grid.buckets);\r\n\r\n        for (var i = 0; i < bucketKeys.length; i++) {\r\n            var bucketId = bucketKeys[i];\r\n\r\n            if (grid.buckets[bucketId].length < 2)\r\n                continue;\r\n\r\n            var region = bucketId.split(',');\r\n            c.rect(0.5 + parseInt(region[0], 10) * grid.bucketWidth, \r\n                    0.5 + parseInt(region[1], 10) * grid.bucketHeight, \r\n                    grid.bucketWidth, \r\n                    grid.bucketHeight);\r\n        }\r\n\r\n        c.lineWidth = 1;\r\n        c.stroke();\r\n    };\r\n\r\n    /**\r\n     * Description\r\n     * @private\r\n     * @method inspector\r\n     * @param {inspector} inspector\r\n     * @param {RenderingContext} context\r\n     */\r\n    Render.inspector = function(inspector, context) {\r\n        var engine = inspector.engine,\r\n            selected = inspector.selected,\r\n            render = engine.render,\r\n            options = render.options,\r\n            bounds;\r\n\r\n        if (options.hasBounds) {\r\n            var boundsWidth = render.bounds.max.x - render.bounds.min.x,\r\n                boundsHeight = render.bounds.max.y - render.bounds.min.y,\r\n                boundsScaleX = boundsWidth / render.options.width,\r\n                boundsScaleY = boundsHeight / render.options.height;\r\n            \r\n            context.scale(1 / boundsScaleX, 1 / boundsScaleY);\r\n            context.translate(-render.bounds.min.x, -render.bounds.min.y);\r\n        }\r\n\r\n        for (var i = 0; i < selected.length; i++) {\r\n            var item = selected[i].data;\r\n\r\n            context.translate(0.5, 0.5);\r\n            context.lineWidth = 1;\r\n            context.strokeStyle = 'rgba(255,165,0,0.9)';\r\n            context.setLineDash([1,2]);\r\n\r\n            switch (item.type) {\r\n\r\n            case 'body':\r\n\r\n                // render body selections\r\n                bounds = item.bounds;\r\n                context.beginPath();\r\n                context.rect(Math.floor(bounds.min.x - 3), Math.floor(bounds.min.y - 3), \r\n                             Math.floor(bounds.max.x - bounds.min.x + 6), Math.floor(bounds.max.y - bounds.min.y + 6));\r\n                context.closePath();\r\n                context.stroke();\r\n\r\n                break;\r\n\r\n            case 'constraint':\r\n\r\n                // render constraint selections\r\n                var point = item.pointA;\r\n                if (item.bodyA)\r\n                    point = item.pointB;\r\n                context.beginPath();\r\n                context.arc(point.x, point.y, 10, 0, 2 * Math.PI);\r\n                context.closePath();\r\n                context.stroke();\r\n\r\n                break;\r\n\r\n            }\r\n\r\n            context.setLineDash([0]);\r\n            context.translate(-0.5, -0.5);\r\n        }\r\n\r\n        // render selection region\r\n        if (inspector.selectStart !== null) {\r\n            context.translate(0.5, 0.5);\r\n            context.lineWidth = 1;\r\n            context.strokeStyle = 'rgba(255,165,0,0.6)';\r\n            context.fillStyle = 'rgba(255,165,0,0.1)';\r\n            bounds = inspector.selectBounds;\r\n            context.beginPath();\r\n            context.rect(Math.floor(bounds.min.x), Math.floor(bounds.min.y), \r\n                         Math.floor(bounds.max.x - bounds.min.x), Math.floor(bounds.max.y - bounds.min.y));\r\n            context.closePath();\r\n            context.stroke();\r\n            context.fill();\r\n            context.translate(-0.5, -0.5);\r\n        }\r\n\r\n        if (options.hasBounds)\r\n            context.setTransform(1, 0, 0, 1, 0, 0);\r\n    };\r\n\r\n    /**\r\n     * Description\r\n     * @method _createCanvas\r\n     * @private\r\n     * @param {} width\r\n     * @param {} height\r\n     * @return canvas\r\n     */\r\n    var _createCanvas = function(width, height) {\r\n        var canvas = document.createElement('canvas');\r\n        canvas.width = width;\r\n        canvas.height = height;\r\n        canvas.oncontextmenu = function() { return false; };\r\n        canvas.onselectstart = function() { return false; };\r\n        return canvas;\r\n    };\r\n\r\n    /**\r\n     * Gets the pixel ratio of the canvas.\r\n     * @method _getPixelRatio\r\n     * @private\r\n     * @param {HTMLElement} canvas\r\n     * @return {Number} pixel ratio\r\n     */\r\n    var _getPixelRatio = function(canvas) {\r\n        var context = canvas.getContext('2d'),\r\n            devicePixelRatio = window.devicePixelRatio || 1,\r\n            backingStorePixelRatio = context.webkitBackingStorePixelRatio || context.mozBackingStorePixelRatio\r\n                                      || context.msBackingStorePixelRatio || context.oBackingStorePixelRatio\r\n                                      || context.backingStorePixelRatio || 1;\r\n\r\n        return devicePixelRatio / backingStorePixelRatio;\r\n    };\r\n\r\n    /**\r\n     * Gets the requested texture (an Image) via its path\r\n     * @method _getTexture\r\n     * @private\r\n     * @param {render} render\r\n     * @param {string} imagePath\r\n     * @return {Image} texture\r\n     */\r\n    var _getTexture = function(render, imagePath) {\r\n        var image = render.textures[imagePath];\r\n\r\n        if (image)\r\n            return image;\r\n\r\n        image = render.textures[imagePath] = new Image();\r\n        image.src = imagePath;\r\n\r\n        return image;\r\n    };\r\n\r\n    /**\r\n     * Applies the background to the canvas using CSS.\r\n     * @method applyBackground\r\n     * @private\r\n     * @param {render} render\r\n     * @param {string} background\r\n     */\r\n    var _applyBackground = function(render, background) {\r\n        var cssBackground = background;\r\n\r\n        if (/(jpg|gif|png)$/.test(background))\r\n            cssBackground = 'url(' + background + ')';\r\n\r\n        render.canvas.style.background = cssBackground;\r\n        render.canvas.style.backgroundSize = \"contain\";\r\n        render.currentBackground = background;\r\n    };\r\n\r\n    /*\r\n    *\r\n    *  Properties Documentation\r\n    *\r\n    */\r\n\r\n    /**\r\n     * A back-reference to the `Matter.Render` module.\r\n     *\r\n     * @property controller\r\n     * @type render\r\n     */\r\n\r\n    /**\r\n     * A reference to the element where the canvas is to be inserted (if `render.canvas` has not been specified)\r\n     *\r\n     * @property element\r\n     * @type HTMLElement\r\n     * @default null\r\n     */\r\n\r\n    /**\r\n     * The canvas element to render to. If not specified, one will be created if `render.element` has been specified.\r\n     *\r\n     * @property canvas\r\n     * @type HTMLCanvasElement\r\n     * @default null\r\n     */\r\n\r\n    /**\r\n     * The configuration options of the renderer.\r\n     *\r\n     * @property options\r\n     * @type {}\r\n     */\r\n\r\n    /**\r\n     * The target width in pixels of the `render.canvas` to be created.\r\n     *\r\n     * @property options.width\r\n     * @type number\r\n     * @default 800\r\n     */\r\n\r\n    /**\r\n     * The target height in pixels of the `render.canvas` to be created.\r\n     *\r\n     * @property options.height\r\n     * @type number\r\n     * @default 600\r\n     */\r\n\r\n    /**\r\n     * A flag that specifies if `render.bounds` should be used when rendering.\r\n     *\r\n     * @property options.hasBounds\r\n     * @type boolean\r\n     * @default false\r\n     */\r\n\r\n    /**\r\n     * A `Bounds` object that specifies the drawing view region. \r\n     * Rendering will be automatically transformed and scaled to fit within the canvas size (`render.options.width` and `render.options.height`).\r\n     * This allows for creating views that can pan or zoom around the scene.\r\n     * You must also set `render.options.hasBounds` to `true` to enable bounded rendering.\r\n     *\r\n     * @property bounds\r\n     * @type bounds\r\n     */\r\n\r\n    /**\r\n     * The 2d rendering context from the `render.canvas` element.\r\n     *\r\n     * @property context\r\n     * @type CanvasRenderingContext2D\r\n     */\r\n\r\n    /**\r\n     * The sprite texture cache.\r\n     *\r\n     * @property textures\r\n     * @type {}\r\n     */\r\n\r\n})();\r\n\r\n\r\n;   // End src/render/Render.js\r\n\r\n\r\n// Begin src/render/RenderPixi.js\r\n\r\n/**\r\n* See [Demo.js](https://github.com/liabru/matter-js/blob/master/demo/js/Demo.js) \r\n* and [DemoMobile.js](https://github.com/liabru/matter-js/blob/master/demo/js/DemoMobile.js) for usage examples.\r\n*\r\n* @class RenderPixi\r\n*/\r\n\r\nvar RenderPixi = {};\r\n\r\n(function() {\r\n    \r\n    /**\r\n     * Creates a new Pixi.js WebGL renderer\r\n     * @method create\r\n     * @param {object} options\r\n     * @return {RenderPixi} A new renderer\r\n     */\r\n    RenderPixi.create = function(options) {\r\n        var defaults = {\r\n            controller: RenderPixi,\r\n            element: null,\r\n            canvas: null,\r\n            options: {\r\n                width: 800,\r\n                height: 600,\r\n                background: '#fafafa',\r\n                wireframeBackground: '#222',\r\n                hasBounds: false,\r\n                enabled: true,\r\n                wireframes: true,\r\n                showSleeping: true,\r\n                showDebug: false,\r\n                showBroadphase: false,\r\n                showBounds: false,\r\n                showVelocity: false,\r\n                showCollisions: false,\r\n                showAxes: false,\r\n                showPositions: false,\r\n                showAngleIndicator: false,\r\n                showIds: false,\r\n                showShadows: false\r\n            }\r\n        };\r\n\r\n        var render = Common.extend(defaults, options),\r\n            transparent = !render.options.wireframes && render.options.background === 'transparent';\r\n\r\n        // init pixi\r\n        render.context = new PIXI.WebGLRenderer(render.options.width, render.options.height, render.canvas, transparent, true);\r\n        render.canvas = render.context.view;\r\n        render.container = new PIXI.DisplayObjectContainer();\r\n        render.stage = new PIXI.Stage();\r\n        render.stage.addChild(render.container);\r\n        render.bounds = render.bounds || { \r\n            min: { \r\n                x: 0,\r\n                y: 0\r\n            }, \r\n            max: { \r\n                x: render.options.width,\r\n                y: render.options.height\r\n            }\r\n        };\r\n\r\n        // caches\r\n        render.textures = {};\r\n        render.sprites = {};\r\n        render.primitives = {};\r\n\r\n        // use a sprite batch for performance\r\n        render.spriteBatch = new PIXI.SpriteBatch();\r\n        render.container.addChild(render.spriteBatch);\r\n\r\n        // insert canvas\r\n        if (Common.isElement(render.element)) {\r\n            render.element.appendChild(render.canvas);\r\n        } else {\r\n            Common.log('No \"render.element\" passed, \"render.canvas\" was not inserted into document.', 'warn');\r\n        }\r\n\r\n        // prevent menus on canvas\r\n        render.canvas.oncontextmenu = function() { return false; };\r\n        render.canvas.onselectstart = function() { return false; };\r\n\r\n        return render;\r\n    };\r\n\r\n    /**\r\n     * Clears the scene graph\r\n     * @method clear\r\n     * @param {RenderPixi} render\r\n     */\r\n    RenderPixi.clear = function(render) {\r\n        var container = render.container,\r\n            spriteBatch = render.spriteBatch;\r\n\r\n        // clear stage container\r\n        while (container.children[0]) { \r\n            container.removeChild(container.children[0]); \r\n        }\r\n\r\n        // clear sprite batch\r\n        while (spriteBatch.children[0]) { \r\n            spriteBatch.removeChild(spriteBatch.children[0]); \r\n        }\r\n\r\n        var bgSprite = render.sprites['bg-0'];\r\n\r\n        // clear caches\r\n        render.textures = {};\r\n        render.sprites = {};\r\n        render.primitives = {};\r\n\r\n        // set background sprite\r\n        render.sprites['bg-0'] = bgSprite;\r\n        if (bgSprite)\r\n            spriteBatch.addChildAt(bgSprite, 0);\r\n\r\n        // add sprite batch back into container\r\n        render.container.addChild(render.spriteBatch);\r\n\r\n        // reset background state\r\n        render.currentBackground = null;\r\n\r\n        // reset bounds transforms\r\n        container.scale.set(1, 1);\r\n        container.position.set(0, 0);\r\n    };\r\n\r\n    /**\r\n     * Sets the background of the canvas \r\n     * @method setBackground\r\n     * @param {RenderPixi} render\r\n     * @param {string} background\r\n     */\r\n    RenderPixi.setBackground = function(render, background) {\r\n        if (render.currentBackground !== background) {\r\n            var isColor = background.indexOf && background.indexOf('#') !== -1,\r\n                bgSprite = render.sprites['bg-0'];\r\n\r\n            if (isColor) {\r\n                // if solid background color\r\n                var color = Common.colorToNumber(background);\r\n                render.stage.setBackgroundColor(color);\r\n\r\n                // remove background sprite if existing\r\n                if (bgSprite)\r\n                    render.spriteBatch.removeChild(bgSprite); \r\n            } else {\r\n                // initialise background sprite if needed\r\n                if (!bgSprite) {\r\n                    var texture = _getTexture(render, background);\r\n\r\n                    bgSprite = render.sprites['bg-0'] = new PIXI.Sprite(texture);\r\n                    bgSprite.position.x = 0;\r\n                    bgSprite.position.y = 0;\r\n                    render.spriteBatch.addChildAt(bgSprite, 0);\r\n                }\r\n            }\r\n\r\n            render.currentBackground = background;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Description\r\n     * @method world\r\n     * @param {engine} engine\r\n     */\r\n    RenderPixi.world = function(engine) {\r\n        var render = engine.render,\r\n            world = engine.world,\r\n            context = render.context,\r\n            stage = render.stage,\r\n            container = render.container,\r\n            options = render.options,\r\n            bodies = Composite.allBodies(world),\r\n            allConstraints = Composite.allConstraints(world),\r\n            constraints = [],\r\n            i;\r\n\r\n        if (options.wireframes) {\r\n            RenderPixi.setBackground(render, options.wireframeBackground);\r\n        } else {\r\n            RenderPixi.setBackground(render, options.background);\r\n        }\r\n\r\n        // handle bounds\r\n        var boundsWidth = render.bounds.max.x - render.bounds.min.x,\r\n            boundsHeight = render.bounds.max.y - render.bounds.min.y,\r\n            boundsScaleX = boundsWidth / render.options.width,\r\n            boundsScaleY = boundsHeight / render.options.height;\r\n\r\n        if (options.hasBounds) {\r\n            // Hide bodies that are not in view\r\n            for (i = 0; i < bodies.length; i++) {\r\n                var body = bodies[i];\r\n                body.render.sprite.visible = Bounds.overlaps(body.bounds, render.bounds);\r\n            }\r\n\r\n            // filter out constraints that are not in view\r\n            for (i = 0; i < allConstraints.length; i++) {\r\n                var constraint = allConstraints[i],\r\n                    bodyA = constraint.bodyA,\r\n                    bodyB = constraint.bodyB,\r\n                    pointAWorld = constraint.pointA,\r\n                    pointBWorld = constraint.pointB;\r\n\r\n                if (bodyA) pointAWorld = Vector.add(bodyA.position, constraint.pointA);\r\n                if (bodyB) pointBWorld = Vector.add(bodyB.position, constraint.pointB);\r\n\r\n                if (!pointAWorld || !pointBWorld)\r\n                    continue;\r\n\r\n                if (Bounds.contains(render.bounds, pointAWorld) || Bounds.contains(render.bounds, pointBWorld))\r\n                    constraints.push(constraint);\r\n            }\r\n\r\n            // transform the view\r\n            container.scale.set(1 / boundsScaleX, 1 / boundsScaleY);\r\n            container.position.set(-render.bounds.min.x * (1 / boundsScaleX), -render.bounds.min.y * (1 / boundsScaleY));\r\n        } else {\r\n            constraints = allConstraints;\r\n        }\r\n\r\n        for (i = 0; i < bodies.length; i++)\r\n            RenderPixi.body(engine, bodies[i]);\r\n\r\n        for (i = 0; i < constraints.length; i++)\r\n            RenderPixi.constraint(engine, constraints[i]);\r\n\r\n        context.render(stage);\r\n    };\r\n\r\n\r\n    /**\r\n     * Description\r\n     * @method constraint\r\n     * @param {engine} engine\r\n     * @param {constraint} constraint\r\n     */\r\n    RenderPixi.constraint = function(engine, constraint) {\r\n        var render = engine.render,\r\n            bodyA = constraint.bodyA,\r\n            bodyB = constraint.bodyB,\r\n            pointA = constraint.pointA,\r\n            pointB = constraint.pointB,\r\n            container = render.container,\r\n            constraintRender = constraint.render,\r\n            primitiveId = 'c-' + constraint.id,\r\n            primitive = render.primitives[primitiveId];\r\n\r\n        // initialise constraint primitive if not existing\r\n        if (!primitive)\r\n            primitive = render.primitives[primitiveId] = new PIXI.Graphics();\r\n\r\n        // don't render if constraint does not have two end points\r\n        if (!constraintRender.visible || !constraint.pointA || !constraint.pointB) {\r\n            primitive.clear();\r\n            return;\r\n        }\r\n\r\n        // add to scene graph if not already there\r\n        if (Common.indexOf(container.children, primitive) === -1)\r\n            container.addChild(primitive);\r\n\r\n        // render the constraint on every update, since they can change dynamically\r\n        primitive.clear();\r\n        primitive.beginFill(0, 0);\r\n        primitive.lineStyle(constraintRender.lineWidth, Common.colorToNumber(constraintRender.strokeStyle), 1);\r\n        \r\n        if (bodyA) {\r\n            primitive.moveTo(bodyA.position.x + pointA.x, bodyA.position.y + pointA.y);\r\n        } else {\r\n            primitive.moveTo(pointA.x, pointA.y);\r\n        }\r\n\r\n        if (bodyB) {\r\n            primitive.lineTo(bodyB.position.x + pointB.x, bodyB.position.y + pointB.y);\r\n        } else {\r\n            primitive.lineTo(pointB.x, pointB.y);\r\n        }\r\n\r\n        primitive.endFill();\r\n    };\r\n    \r\n    /**\r\n     * Description\r\n     * @method body\r\n     * @param {engine} engine\r\n     * @param {body} body\r\n     */\r\n    RenderPixi.body = function(engine, body) {\r\n        var render = engine.render,\r\n            bodyRender = body.render;\r\n\r\n        if (!bodyRender.visible)\r\n            return;\r\n\r\n        if (bodyRender.sprite && bodyRender.sprite.texture) {\r\n            var spriteId = 'b-' + body.id,\r\n                sprite = render.sprites[spriteId],\r\n                spriteBatch = render.spriteBatch;\r\n\r\n            // initialise body sprite if not existing\r\n            if (!sprite)\r\n                sprite = render.sprites[spriteId] = _createBodySprite(render, body);\r\n\r\n            // add to scene graph if not already there\r\n            if (Common.indexOf(spriteBatch.children, sprite) === -1)\r\n                spriteBatch.addChild(sprite);\r\n\r\n            // update body sprite\r\n            sprite.position.x = body.position.x;\r\n            sprite.position.y = body.position.y;\r\n            sprite.rotation = body.angle;\r\n            sprite.scale.x = bodyRender.sprite.xScale || 1;\r\n            sprite.scale.y = bodyRender.sprite.yScale || 1;\r\n        } else {\r\n            var primitiveId = 'b-' + body.id,\r\n                primitive = render.primitives[primitiveId],\r\n                container = render.container;\r\n\r\n            // initialise body primitive if not existing\r\n            if (!primitive) {\r\n                primitive = render.primitives[primitiveId] = _createBodyPrimitive(render, body);\r\n                primitive.initialAngle = body.angle;\r\n            }\r\n\r\n            // add to scene graph if not already there\r\n            if (Common.indexOf(container.children, primitive) === -1)\r\n                container.addChild(primitive);\r\n\r\n            // update body primitive\r\n            primitive.position.x = body.position.x;\r\n            primitive.position.y = body.position.y;\r\n            primitive.rotation = body.angle - primitive.initialAngle;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Creates a body sprite\r\n     * @method _createBodySprite\r\n     * @private\r\n     * @param {RenderPixi} render\r\n     * @param {body} body\r\n     * @return {PIXI.Sprite} sprite\r\n     */\r\n    var _createBodySprite = function(render, body) {\r\n        var bodyRender = body.render,\r\n            texturePath = bodyRender.sprite.texture,\r\n            texture = _getTexture(render, texturePath),\r\n            sprite = new PIXI.Sprite(texture);\r\n\r\n        sprite.anchor.x = 0.5;\r\n        sprite.anchor.y = 0.5;\r\n\r\n        return sprite;\r\n    };\r\n\r\n    /**\r\n     * Creates a body primitive\r\n     * @method _createBodyPrimitive\r\n     * @private\r\n     * @param {RenderPixi} render\r\n     * @param {body} body\r\n     * @return {PIXI.Graphics} graphics\r\n     */\r\n    var _createBodyPrimitive = function(render, body) {\r\n        var bodyRender = body.render,\r\n            options = render.options,\r\n            primitive = new PIXI.Graphics();\r\n\r\n        primitive.clear();\r\n\r\n        if (!options.wireframes) {\r\n            primitive.beginFill(Common.colorToNumber(bodyRender.fillStyle), 1);\r\n            primitive.lineStyle(body.render.lineWidth, Common.colorToNumber(bodyRender.strokeStyle), 1);\r\n        } else {\r\n            primitive.beginFill(0, 0);\r\n            primitive.lineStyle(1, Common.colorToNumber('#bbb'), 1);\r\n        }\r\n\r\n        primitive.moveTo(body.vertices[0].x - body.position.x, body.vertices[0].y - body.position.y);\r\n\r\n        for (var j = 1; j < body.vertices.length; j++) {\r\n            primitive.lineTo(body.vertices[j].x - body.position.x, body.vertices[j].y - body.position.y);\r\n        }\r\n\r\n        primitive.lineTo(body.vertices[0].x - body.position.x, body.vertices[0].y - body.position.y);\r\n\r\n        primitive.endFill();\r\n\r\n        // angle indicator\r\n        if (options.showAngleIndicator || options.showAxes) {\r\n            primitive.beginFill(0, 0);\r\n\r\n            if (options.wireframes) {\r\n                primitive.lineStyle(1, Common.colorToNumber('#CD5C5C'), 1);\r\n            } else {\r\n                primitive.lineStyle(1, Common.colorToNumber(body.render.strokeStyle));\r\n            }\r\n\r\n            primitive.moveTo(0, 0);\r\n            primitive.lineTo(((body.vertices[0].x + body.vertices[body.vertices.length-1].x) / 2) - body.position.x, \r\n                             ((body.vertices[0].y + body.vertices[body.vertices.length-1].y) / 2) - body.position.y);\r\n\r\n            primitive.endFill();\r\n        }\r\n\r\n        return primitive;\r\n    };\r\n\r\n    /**\r\n     * Gets the requested texture (a PIXI.Texture) via its path\r\n     * @method _getTexture\r\n     * @private\r\n     * @param {RenderPixi} render\r\n     * @param {string} imagePath\r\n     * @return {PIXI.Texture} texture\r\n     */\r\n    var _getTexture = function(render, imagePath) {\r\n        var texture = render.textures[imagePath];\r\n\r\n        if (!texture)\r\n            texture = render.textures[imagePath] = PIXI.Texture.fromImage(imagePath);\r\n\r\n        return texture;\r\n    };\r\n\r\n})();\r\n\r\n\r\n;   // End src/render/RenderPixi.js\r\n\r\n\r\n// aliases\r\n\r\nWorld.add = Composite.add;\r\nWorld.remove = Composite.remove;\r\nWorld.addComposite = Composite.addComposite;\r\nWorld.addBody = Composite.addBody;\r\nWorld.addConstraint = Composite.addConstraint;\r\nWorld.clear = Composite.clear;\r\n\r\nEngine.run = Runner.run;\r\n\r\n// exports\r\n\r\nMatter.Body = Body;\r\nMatter.Composite = Composite;\r\nMatter.World = World;\r\nMatter.Contact = Contact;\r\nMatter.Detector = Detector;\r\nMatter.Grid = Grid;\r\nMatter.Pairs = Pairs;\r\nMatter.Pair = Pair;\r\nMatter.Resolver = Resolver;\r\nMatter.SAT = SAT;\r\nMatter.Constraint = Constraint;\r\nMatter.MouseConstraint = MouseConstraint;\r\nMatter.Common = Common;\r\nMatter.Engine = Engine;\r\nMatter.Metrics = Metrics;\r\nMatter.Mouse = Mouse;\r\nMatter.Sleeping = Sleeping;\r\nMatter.Bodies = Bodies;\r\nMatter.Composites = Composites;\r\nMatter.Axes = Axes;\r\nMatter.Bounds = Bounds;\r\nMatter.Vector = Vector;\r\nMatter.Vertices = Vertices;\r\nMatter.Render = Render;\r\nMatter.RenderPixi = RenderPixi;\r\nMatter.Events = Events;\r\nMatter.Query = Query;\r\nMatter.Runner = Runner;\r\n\r\n// CommonJS module\r\nif (typeof exports !== 'undefined') {\r\n    if (typeof module !== 'undefined' && module.exports) {\r\n        exports = module.exports = Matter;\r\n    }\r\n    exports.Matter = Matter;\r\n}\r\n\r\n// AMD module\r\nif (typeof define === 'function' && define.amd) {\r\n    define('Matter', [], function () {\r\n        return Matter;\r\n    });\r\n}\r\n\r\n// browser\r\nif (typeof window === 'object' && typeof window.document === 'object') {\r\n    window.Matter = Matter;\r\n}\r\n\r\n// End Matter namespace closure\r\n\r\n})();\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/matter-js/build/matter.js\n ** module id = 8\n ** module chunks = 0\n **/","import assign from 'lodash/object/assign';\r\nimport Entity from './Entity';\r\nimport {Composite} from 'matter';\r\n\r\nconst World = {};\r\n\r\nWorld.create = function(state = {}) {\r\n  const world = Entity.create(assign({\r\n    label: 'TIWorld',\r\n    gravity: {x: 0, y: 1},\r\n    bounds: { \r\n        min: {x: 0, y: 0}, \r\n        max: {x: 800, y: 600} \r\n    }\r\n  }, state));\r\n\r\n  return world;\r\n}\r\n\r\nWorld.allEntities = function(world) {\r\n  return Composite.allComposites(world);\r\n};\r\n\r\nexport default World;\n\n\n/** WEBPACK FOOTER **\n ** d:/Projects/titan-2d/lib/World.js\n **/","import {requestAnimFrame, cancelAnimFrame} from 'Common';\r\nimport assign from 'lodash/object/assign';\r\n\r\nconst FPS = 60;\r\nconst DELTA_SAMPLE_SIZE = FPS;\r\nconst DELTA = 1000 / FPS;\r\n\r\nconst Runner = {};\r\n\r\nRunner.create = function(state, tick, preTick = runner => runner) {\r\n    let counterTimestamp = 0;\r\n    let frameCounter = 0;\r\n    let deltaHistory = [];\r\n    let timePrev;\r\n    let timeScalePrev = 1;\r\n\r\n    const runner = assign({\r\n        fps: FPS,\r\n        timestamp: 0,\r\n        delta: DELTA,\r\n        correction: 1,\r\n        deltaMin: 1000 / FPS,\r\n        deltaMax: 1000 / (FPS * 0.5),\r\n        timeScale: 1,\r\n        isFixed: false,\r\n        frameRequestId: 0,\r\n        enabled: true,\r\n        frameCount: 0\r\n    }, state);\r\n\r\n    function step(time) {\r\n        let delta;\r\n        let correction = 1;\r\n\r\n        runner.frameRequestId = requestAnimFrame(step);\r\n\r\n        if (!runner.enabled) {\r\n            return;\r\n        }\r\n\r\n        preTick(runner);\r\n\r\n        if (runner.isFixed) {\r\n            // fixed timestep\r\n            delta = runner.delta;\r\n        } else {\r\n            // dynamic timestep based on wall clock between calls\r\n            delta = (time - timePrev) || runner.delta;\r\n            timePrev = time;\r\n\r\n            // optimistically filter delta over a few frames, to improve stability\r\n            deltaHistory.push(delta);\r\n            deltaHistory = deltaHistory.slice(-DELTA_SAMPLE_SIZE);\r\n            delta = Math.min.apply(null, deltaHistory);\r\n            \r\n            // limit delta\r\n            delta = delta < runner.deltaMin ? runner.deltaMin : delta;\r\n            delta = delta > runner.deltaMax ? runner.deltaMax : delta;\r\n\r\n            // time correction for delta\r\n            correction = delta / runner.delta;\r\n\r\n            // update engine timing object\r\n            runner.delta = delta;\r\n        }\r\n\r\n        // time correction for time scaling\r\n        if (timeScalePrev !== 0) {\r\n            correction *= runner.timeScale / timeScalePrev;\r\n        }\r\n\r\n        if (runner.timeScale === 0) {\r\n            correction = 0;\r\n        }\r\n\r\n        timeScalePrev = runner.timeScale;\r\n        \r\n        // fps counter\r\n        frameCounter += 1;\r\n        if (time - counterTimestamp >= 1000) {\r\n            runner.fps = frameCounter * ((time - counterTimestamp) / 1000);\r\n            counterTimestamp = time;\r\n            frameCounter = 0;\r\n        }\r\n\r\n        runner.frameCount += 1;\r\n\r\n        tick(delta, correction, runner);\r\n    }\r\n\r\n    runner.frameRequestId = requestAnimFrame(step);\r\n\r\n    return runner;\r\n};\r\n\r\nRunner.destroy = function(runner) {\r\n    cancelAnimFrame(runner.frameRequestId);\r\n};\r\n\r\nexport default Runner;\n\n\n/** WEBPACK FOOTER **\n ** d:/Projects/titan-2d/lib/Runner.js\n **/","/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\n// css base code, injected by the css-loader\r\nmodule.exports = function() {\r\n\tvar list = [];\r\n\r\n\t// return the list of modules as css string\r\n\tlist.toString = function toString() {\r\n\t\tvar result = [];\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar item = this[i];\r\n\t\t\tif(item[2]) {\r\n\t\t\t\tresult.push(\"@media \" + item[2] + \"{\" + item[1] + \"}\");\r\n\t\t\t} else {\r\n\t\t\t\tresult.push(item[1]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result.join(\"\");\r\n\t};\r\n\r\n\t// import a list of modules into the list\r\n\tlist.i = function(modules, mediaQuery) {\r\n\t\tif(typeof modules === \"string\")\r\n\t\t\tmodules = [[null, modules, \"\"]];\r\n\t\tvar alreadyImportedModules = {};\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar id = this[i][0];\r\n\t\t\tif(typeof id === \"number\")\r\n\t\t\t\talreadyImportedModules[id] = true;\r\n\t\t}\r\n\t\tfor(i = 0; i < modules.length; i++) {\r\n\t\t\tvar item = modules[i];\r\n\t\t\t// skip already imported module\r\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\r\n\t\t\t//  when a module is imported multiple times with different media queries.\r\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\r\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\r\n\t\t\t\tif(mediaQuery && !item[2]) {\r\n\t\t\t\t\titem[2] = mediaQuery;\r\n\t\t\t\t} else if(mediaQuery) {\r\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\r\n\t\t\t\t}\r\n\t\t\t\tlist.push(item);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\treturn list;\r\n};\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/css-loader/lib/css-base.js\n ** module id = 11\n ** module chunks = 0\n **/","var baseValues = require('../internal/baseValues'),\n    keys = require('./keys');\n\n/**\n * Creates an array of the own enumerable property values of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property values.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.values(new Foo);\n * // => [1, 2] (iteration order is not guaranteed)\n *\n * _.values('hi');\n * // => ['h', 'i']\n */\nfunction values(object) {\n  return baseValues(object, keys(object));\n}\n\nmodule.exports = values;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/object/values.js\n ** module id = 12\n ** module chunks = 0\n **/","var assignWith = require('../internal/assignWith'),\n    baseAssign = require('../internal/baseAssign'),\n    createAssigner = require('../internal/createAssigner');\n\n/**\n * Assigns own enumerable properties of source object(s) to the destination\n * object. Subsequent sources overwrite property assignments of previous sources.\n * If `customizer` is provided it is invoked to produce the assigned values.\n * The `customizer` is bound to `thisArg` and invoked with five arguments:\n * (objectValue, sourceValue, key, object, source).\n *\n * **Note:** This method mutates `object` and is based on\n * [`Object.assign`](https://people.mozilla.org/~jorendorff/es6-draft.html#sec-object.assign).\n *\n *\n * @static\n * @memberOf _\n * @alias extend\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @param {Function} [customizer] The function to customize assigned values.\n * @param {*} [thisArg] The `this` binding of `customizer`.\n * @returns {Object} Returns `object`.\n * @example\n *\n * _.assign({ 'user': 'barney' }, { 'age': 40 }, { 'user': 'fred' });\n * // => { 'user': 'fred', 'age': 40 }\n *\n * // using a customizer callback\n * var defaults = _.partialRight(_.assign, function(value, other) {\n *   return _.isUndefined(value) ? other : value;\n * });\n *\n * defaults({ 'user': 'barney' }, { 'age': 36 }, { 'user': 'fred' });\n * // => { 'user': 'barney', 'age': 36 }\n */\nvar assign = createAssigner(function(object, source, customizer) {\n  return customizer\n    ? assignWith(object, source, customizer)\n    : baseAssign(object, source);\n});\n\nmodule.exports = assign;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/object/assign.js\n ** module id = 13\n ** module chunks = 0\n **/","const Common = {};\r\n\r\nCommon.now = function() {\r\n    // http://stackoverflow.com/questions/221294/how-do-you-get-a-timestamp-in-javascript\r\n    // https://gist.github.com/davidwaterston/2982531\r\n    const perf = window.performance;\r\n\r\n    if (perf) {\r\n        perf.now = perf.now || perf.webkitNow || perf.msNow || perf.oNow || perf.mozNow;\r\n        return +(perf.now());\r\n    }\r\n    \r\n    return +(new Date());\r\n}\r\n\r\nCommon.requestAnimFrame = window.requestAnimationFrame || window.webkitRequestAnimationFrame\r\n    || window.mozRequestAnimationFrame || window.msRequestAnimationFrame \r\n    || function(cb) { window.setTimeout(() => cb(now()), DELTA); };\r\n\r\nCommon.cancelAnimFrame = window.cancelAnimationFrame || window.mozCancelAnimationFrame \r\n    || window.webkitCancelAnimationFrame || window.msCancelAnimationFrame;\r\n\r\nexport default Common;\n\n\n/** WEBPACK FOOTER **\n ** d:/Projects/titan-2d/lib/Common.js\n **/","var isLength = require('../internal/isLength'),\n    isNative = require('../lang/isNative'),\n    isObject = require('../lang/isObject'),\n    shimKeys = require('../internal/shimKeys');\n\n/* Native method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = isNative(nativeKeys = Object.keys) && nativeKeys;\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](https://people.mozilla.org/~jorendorff/es6-draft.html#sec-object.keys)\n * for more details.\n *\n * @static\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nvar keys = !nativeKeys ? shimKeys : function(object) {\n  if (object) {\n    var Ctor = object.constructor,\n        length = object.length;\n  }\n  if ((typeof Ctor == 'function' && Ctor.prototype === object) ||\n      (typeof object != 'function' && isLength(length))) {\n    return shimKeys(object);\n  }\n  return isObject(object) ? nativeKeys(object) : [];\n};\n\nmodule.exports = keys;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/object/keys.js\n ** module id = 15\n ** module chunks = 0\n **/","/**\n * The base implementation of `_.values` and `_.valuesIn` which creates an\n * array of `object` property values corresponding to the property names\n * of `props`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array} props The property names to get values for.\n * @returns {Object} Returns the array of property values.\n */\nfunction baseValues(object, props) {\n  var index = -1,\n      length = props.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = object[props[index]];\n  }\n  return result;\n}\n\nmodule.exports = baseValues;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/internal/baseValues.js\n ** module id = 16\n ** module chunks = 0\n **/","var baseCopy = require('./baseCopy'),\n    getSymbols = require('./getSymbols'),\n    isNative = require('../lang/isNative'),\n    keys = require('../object/keys');\n\n/** Native method references. */\nvar preventExtensions = isNative(Object.preventExtensions = Object.preventExtensions) && preventExtensions;\n\n/** Used as `baseAssign`. */\nvar nativeAssign = (function() {\n  // Avoid `Object.assign` in Firefox 34-37 which have an early implementation\n  // with a now defunct try/catch behavior. See https://bugzilla.mozilla.org/show_bug.cgi?id=1103344\n  // for more details.\n  //\n  // Use `Object.preventExtensions` on a plain object instead of simply using\n  // `Object('x')` because Chrome and IE fail to throw an error when attempting\n  // to assign values to readonly indexes of strings in strict mode.\n  var object = { '1': 0 },\n      func = preventExtensions && isNative(func = Object.assign) && func;\n\n  try { func(preventExtensions(object), 'xo'); } catch(e) {}\n  return !object[1] && func;\n}());\n\n/**\n * The base implementation of `_.assign` without support for argument juggling,\n * multiple sources, and `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nvar baseAssign = nativeAssign || function(object, source) {\n  return source == null\n    ? object\n    : baseCopy(source, getSymbols(source), baseCopy(source, keys(source), object));\n};\n\nmodule.exports = baseAssign;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/internal/baseAssign.js\n ** module id = 17\n ** module chunks = 0\n **/","var bindCallback = require('./bindCallback'),\n    isIterateeCall = require('./isIterateeCall'),\n    restParam = require('../function/restParam');\n\n/**\n * Creates a function that assigns properties of source object(s) to a given\n * destination object.\n *\n * **Note:** This function is used to create `_.assign`, `_.defaults`, and `_.merge`.\n *\n * @private\n * @param {Function} assigner The function to assign values.\n * @returns {Function} Returns the new assigner function.\n */\nfunction createAssigner(assigner) {\n  return restParam(function(object, sources) {\n    var index = -1,\n        length = object == null ? 0 : sources.length,\n        customizer = length > 2 && sources[length - 2],\n        guard = length > 2 && sources[2],\n        thisArg = length > 1 && sources[length - 1];\n\n    if (typeof customizer == 'function') {\n      customizer = bindCallback(customizer, thisArg, 5);\n      length -= 2;\n    } else {\n      customizer = typeof thisArg == 'function' ? thisArg : null;\n      length -= (customizer ? 1 : 0);\n    }\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n      customizer = length < 3 ? null : customizer;\n      length = 1;\n    }\n    while (++index < length) {\n      var source = sources[index];\n      if (source) {\n        assigner(object, source, customizer);\n      }\n    }\n    return object;\n  });\n}\n\nmodule.exports = createAssigner;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/internal/createAssigner.js\n ** module id = 18\n ** module chunks = 0\n **/","var getSymbols = require('./getSymbols'),\n    keys = require('../object/keys');\n\n/** Used for native method references. */\nvar arrayProto = Array.prototype;\n\n/** Native method references. */\nvar push = arrayProto.push;\n\n/**\n * A specialized version of `_.assign` for customizing assigned values without\n * support for argument juggling, multiple sources, and `this` binding `customizer`\n * functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {Function} customizer The function to customize assigned values.\n * @returns {Object} Returns `object`.\n */\nfunction assignWith(object, source, customizer) {\n  var props = keys(source);\n  push.apply(props, getSymbols(source));\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index],\n        value = object[key],\n        result = customizer(value, source[key], key, object, source);\n\n    if ((result === result ? (result !== value) : (value === value)) ||\n        (value === undefined && !(key in object))) {\n      object[key] = result;\n    }\n  }\n  return object;\n}\n\nmodule.exports = assignWith;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/internal/assignWith.js\n ** module id = 19\n ** module chunks = 0\n **/","/**\n * Used as the [maximum length](https://people.mozilla.org/~jorendorff/es6-draft.html#sec-number.max_safe_integer)\n * of an array-like value.\n */\nvar MAX_SAFE_INTEGER = Math.pow(2, 53) - 1;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This function is based on [`ToLength`](https://people.mozilla.org/~jorendorff/es6-draft.html#sec-tolength).\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n */\nfunction isLength(value) {\n  return typeof value == 'number' && value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nmodule.exports = isLength;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/internal/isLength.js\n ** module id = 20\n ** module chunks = 0\n **/","var escapeRegExp = require('../string/escapeRegExp'),\n    isObjectLike = require('../internal/isObjectLike');\n\n/** `Object#toString` result references. */\nvar funcTag = '[object Function]';\n\n/** Used to detect host constructors (Safari > 5). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for native method references. */\nvar objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar fnToString = Function.prototype.toString;\n\n/**\n * Used to resolve the [`toStringTag`](https://people.mozilla.org/~jorendorff/es6-draft.html#sec-object.prototype.tostring)\n * of values.\n */\nvar objToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  escapeRegExp(objToString)\n  .replace(/toString|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * Checks if `value` is a native function.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function, else `false`.\n * @example\n *\n * _.isNative(Array.prototype.push);\n * // => true\n *\n * _.isNative(_);\n * // => false\n */\nfunction isNative(value) {\n  if (value == null) {\n    return false;\n  }\n  if (objToString.call(value) == funcTag) {\n    return reIsNative.test(fnToString.call(value));\n  }\n  return isObjectLike(value) && reIsHostCtor.test(value);\n}\n\nmodule.exports = isNative;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/lang/isNative.js\n ** module id = 21\n ** module chunks = 0\n **/","/**\n * Checks if `value` is the [language type](https://es5.github.io/#x8) of `Object`.\n * (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(1);\n * // => false\n */\nfunction isObject(value) {\n  // Avoid a V8 JIT bug in Chrome 19-20.\n  // See https://code.google.com/p/v8/issues/detail?id=2291 for more details.\n  var type = typeof value;\n  return type == 'function' || (!!value && type == 'object');\n}\n\nmodule.exports = isObject;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/lang/isObject.js\n ** module id = 22\n ** module chunks = 0\n **/","var isArguments = require('../lang/isArguments'),\n    isArray = require('../lang/isArray'),\n    isIndex = require('./isIndex'),\n    isLength = require('./isLength'),\n    keysIn = require('../object/keysIn'),\n    support = require('../support');\n\n/** Used for native method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A fallback implementation of `Object.keys` which creates an array of the\n * own enumerable property names of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction shimKeys(object) {\n  var props = keysIn(object),\n      propsLength = props.length,\n      length = propsLength && object.length;\n\n  var allowIndexes = length && isLength(length) &&\n    (isArray(object) || (support.nonEnumArgs && isArguments(object)));\n\n  var index = -1,\n      result = [];\n\n  while (++index < propsLength) {\n    var key = props[index];\n    if ((allowIndexes && isIndex(key, length)) || hasOwnProperty.call(object, key)) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = shimKeys;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/internal/shimKeys.js\n ** module id = 23\n ** module chunks = 0\n **/","/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property names to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @returns {Object} Returns `object`.\n */\nfunction baseCopy(source, props, object) {\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n    object[key] = source[key];\n  }\n  return object;\n}\n\nmodule.exports = baseCopy;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/internal/baseCopy.js\n ** module id = 24\n ** module chunks = 0\n **/","var constant = require('../utility/constant'),\n    isNative = require('../lang/isNative'),\n    toObject = require('./toObject');\n\n/** Native method references. */\nvar getOwnPropertySymbols = isNative(getOwnPropertySymbols = Object.getOwnPropertySymbols) && getOwnPropertySymbols;\n\n/**\n * Creates an array of the own symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !getOwnPropertySymbols ? constant([]) : function(object) {\n  return getOwnPropertySymbols(toObject(object));\n};\n\nmodule.exports = getSymbols;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/internal/getSymbols.js\n ** module id = 25\n ** module chunks = 0\n **/","var isLength = require('../internal/isLength'),\n    isObjectLike = require('../internal/isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/** Used for native method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the [`toStringTag`](https://people.mozilla.org/~jorendorff/es6-draft.html#sec-object.prototype.tostring)\n * of values.\n */\nvar objToString = objectProto.toString;\n\n/**\n * Checks if `value` is classified as an `arguments` object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  var length = isObjectLike(value) ? value.length : undefined;\n  return isLength(length) && objToString.call(value) == argsTag;\n}\n\nmodule.exports = isArguments;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/lang/isArguments.js\n ** module id = 26\n ** module chunks = 0\n **/","var isArguments = require('../lang/isArguments'),\n    isArray = require('../lang/isArray'),\n    isIndex = require('../internal/isIndex'),\n    isLength = require('../internal/isLength'),\n    isObject = require('../lang/isObject'),\n    support = require('../support');\n\n/** Used for native method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  if (object == null) {\n    return [];\n  }\n  if (!isObject(object)) {\n    object = Object(object);\n  }\n  var length = object.length;\n  length = (length && isLength(length) &&\n    (isArray(object) || (support.nonEnumArgs && isArguments(object))) && length) || 0;\n\n  var Ctor = object.constructor,\n      index = -1,\n      isProto = typeof Ctor == 'function' && Ctor.prototype === object,\n      result = Array(length),\n      skipIndexes = length > 0;\n\n  while (++index < length) {\n    result[index] = (index + '');\n  }\n  for (var key in object) {\n    if (!(skipIndexes && isIndex(key, length)) &&\n        !(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = keysIn;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/object/keysIn.js\n ** module id = 27\n ** module chunks = 0\n **/","/** Used for native method references. */\nvar objectProto = Object.prototype;\n\n/** Used to detect DOM support. */\nvar document = (document = global.window) && document.document;\n\n/** Native method references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * An object environment feature flags.\n *\n * @static\n * @memberOf _\n * @type Object\n */\nvar support = {};\n\n(function(x) {\n  var Ctor = function() { this.x = x; },\n      object = { '0': x, 'length': x },\n      props = [];\n\n  Ctor.prototype = { 'valueOf': x, 'y': x };\n  for (var key in new Ctor) { props.push(key); }\n\n  /**\n   * Detect if functions can be decompiled by `Function#toString`\n   * (all but Firefox OS certified apps, older Opera mobile browsers, and\n   * the PlayStation 3; forced `false` for Windows 8 apps).\n   *\n   * @memberOf _.support\n   * @type boolean\n   */\n  support.funcDecomp = /\\bthis\\b/.test(function() { return this; });\n\n  /**\n   * Detect if `Function#name` is supported (all but IE).\n   *\n   * @memberOf _.support\n   * @type boolean\n   */\n  support.funcNames = typeof Function.name == 'string';\n\n  /**\n   * Detect if the DOM is supported.\n   *\n   * @memberOf _.support\n   * @type boolean\n   */\n  try {\n    support.dom = document.createDocumentFragment().nodeType === 11;\n  } catch(e) {\n    support.dom = false;\n  }\n\n  /**\n   * Detect if `arguments` object indexes are non-enumerable.\n   *\n   * In Firefox < 4, IE < 9, PhantomJS, and Safari < 5.1 `arguments` object\n   * indexes are non-enumerable. Chrome < 25 and Node.js < 0.11.0 treat\n   * `arguments` object indexes as non-enumerable and fail `hasOwnProperty`\n   * checks for indexes that exceed the number of function parameters and\n   * whose associated argument values are `0`.\n   *\n   * @memberOf _.support\n   * @type boolean\n   */\n  try {\n    support.nonEnumArgs = !propertyIsEnumerable.call(arguments, 1);\n  } catch(e) {\n    support.nonEnumArgs = true;\n  }\n}(1, 0));\n\nmodule.exports = support;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/support.js\n ** module id = 28\n ** module chunks = 0\n **/","var isLength = require('../internal/isLength'),\n    isNative = require('./isNative'),\n    isObjectLike = require('../internal/isObjectLike');\n\n/** `Object#toString` result references. */\nvar arrayTag = '[object Array]';\n\n/** Used for native method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the [`toStringTag`](https://people.mozilla.org/~jorendorff/es6-draft.html#sec-object.prototype.tostring)\n * of values.\n */\nvar objToString = objectProto.toString;\n\n/* Native method references for those with the same name as other `lodash` methods. */\nvar nativeIsArray = isNative(nativeIsArray = Array.isArray) && nativeIsArray;\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(function() { return arguments; }());\n * // => false\n */\nvar isArray = nativeIsArray || function(value) {\n  return isObjectLike(value) && isLength(value.length) && objToString.call(value) == arrayTag;\n};\n\nmodule.exports = isArray;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/lang/isArray.js\n ** module id = 29\n ** module chunks = 0\n **/","/**\n * Used as the [maximum length](https://people.mozilla.org/~jorendorff/es6-draft.html#sec-number.max_safe_integer)\n * of an array-like value.\n */\nvar MAX_SAFE_INTEGER = Math.pow(2, 53) - 1;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  value = +value;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return value > -1 && value % 1 == 0 && value < length;\n}\n\nmodule.exports = isIndex;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/internal/isIndex.js\n ** module id = 30\n ** module chunks = 0\n **/","/**\n * Checks if `value` is object-like.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/internal/isObjectLike.js\n ** module id = 31\n ** module chunks = 0\n **/","var baseToString = require('../internal/baseToString');\n\n/**\n * Used to match `RegExp` [special characters](http://www.regular-expressions.info/characters.html#special).\n * In addition to special characters the forward slash is escaped to allow for\n * easier `eval` use and `Function` compilation.\n */\nvar reRegExpChars = /[.*+?^${}()|[\\]\\/\\\\]/g,\n    reHasRegExpChars = RegExp(reRegExpChars.source);\n\n/**\n * Escapes the `RegExp` special characters \"\\\", \"/\", \"^\", \"$\", \".\", \"|\", \"?\",\n * \"*\", \"+\", \"(\", \")\", \"[\", \"]\", \"{\" and \"}\" in `string`.\n *\n * @static\n * @memberOf _\n * @category String\n * @param {string} [string=''] The string to escape.\n * @returns {string} Returns the escaped string.\n * @example\n *\n * _.escapeRegExp('[lodash](https://lodash.com/)');\n * // => '\\[lodash\\]\\(https:\\/\\/lodash\\.com\\/\\)'\n */\nfunction escapeRegExp(string) {\n  string = baseToString(string);\n  return (string && reHasRegExpChars.test(string))\n    ? string.replace(reRegExpChars, '\\\\$&')\n    : string;\n}\n\nmodule.exports = escapeRegExp;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/string/escapeRegExp.js\n ** module id = 32\n ** module chunks = 0\n **/","var identity = require('../utility/identity');\n\n/**\n * A specialized version of `baseCallback` which only supports `this` binding\n * and specifying the number of arguments to provide to `func`.\n *\n * @private\n * @param {Function} func The function to bind.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {number} [argCount] The number of arguments to provide to `func`.\n * @returns {Function} Returns the callback.\n */\nfunction bindCallback(func, thisArg, argCount) {\n  if (typeof func != 'function') {\n    return identity;\n  }\n  if (thisArg === undefined) {\n    return func;\n  }\n  switch (argCount) {\n    case 1: return function(value) {\n      return func.call(thisArg, value);\n    };\n    case 3: return function(value, index, collection) {\n      return func.call(thisArg, value, index, collection);\n    };\n    case 4: return function(accumulator, value, index, collection) {\n      return func.call(thisArg, accumulator, value, index, collection);\n    };\n    case 5: return function(value, other, key, object, source) {\n      return func.call(thisArg, value, other, key, object, source);\n    };\n  }\n  return function() {\n    return func.apply(thisArg, arguments);\n  };\n}\n\nmodule.exports = bindCallback;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/internal/bindCallback.js\n ** module id = 33\n ** module chunks = 0\n **/","var getLength = require('./getLength'),\n    isIndex = require('./isIndex'),\n    isLength = require('./isLength'),\n    isObject = require('../lang/isObject');\n\n/**\n * Checks if the provided arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call, else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number') {\n    var length = getLength(object),\n        prereq = isLength(length) && isIndex(index, length);\n  } else {\n    prereq = type == 'string' && index in object;\n  }\n  if (prereq) {\n    var other = object[index];\n    return value === value ? (value === other) : (other !== other);\n  }\n  return false;\n}\n\nmodule.exports = isIterateeCall;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/internal/isIterateeCall.js\n ** module id = 34\n ** module chunks = 0\n **/","/**\n * Creates a function that returns `value`.\n *\n * @static\n * @memberOf _\n * @category Utility\n * @param {*} value The value to return from the new function.\n * @returns {Function} Returns the new function.\n * @example\n *\n * var object = { 'user': 'fred' };\n * var getter = _.constant(object);\n *\n * getter() === object;\n * // => true\n */\nfunction constant(value) {\n  return function() {\n    return value;\n  };\n}\n\nmodule.exports = constant;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/utility/constant.js\n ** module id = 35\n ** module chunks = 0\n **/","/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Native method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * Creates a function that invokes `func` with the `this` binding of the\n * created function and arguments from `start` and beyond provided as an array.\n *\n * **Note:** This method is based on the [rest parameter](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/rest_parameters).\n *\n * @static\n * @memberOf _\n * @category Function\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n * @example\n *\n * var say = _.restParam(function(what, names) {\n *   return what + ' ' + _.initial(names).join(', ') +\n *     (_.size(names) > 1 ? ', & ' : '') + _.last(names);\n * });\n *\n * say('hello', 'fred', 'barney', 'pebbles');\n * // => 'hello fred, barney, & pebbles'\n */\nfunction restParam(func, start) {\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  start = nativeMax(start === undefined ? (func.length - 1) : (+start || 0), 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        rest = Array(length);\n\n    while (++index < length) {\n      rest[index] = args[start + index];\n    }\n    switch (start) {\n      case 0: return func.call(this, rest);\n      case 1: return func.call(this, args[0], rest);\n      case 2: return func.call(this, args[0], args[1], rest);\n    }\n    var otherArgs = Array(start + 1);\n    index = -1;\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = rest;\n    return func.apply(this, otherArgs);\n  };\n}\n\nmodule.exports = restParam;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/function/restParam.js\n ** module id = 36\n ** module chunks = 0\n **/","var isObject = require('../lang/isObject');\n\n/**\n * Converts `value` to an object if it is not one.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {Object} Returns the object.\n */\nfunction toObject(value) {\n  return isObject(value) ? value : Object(value);\n}\n\nmodule.exports = toObject;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/internal/toObject.js\n ** module id = 37\n ** module chunks = 0\n **/","/**\n * Converts `value` to a string if it is not one. An empty string is returned\n * for `null` or `undefined` values.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  if (typeof value == 'string') {\n    return value;\n  }\n  return value == null ? '' : (value + '');\n}\n\nmodule.exports = baseToString;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/internal/baseToString.js\n ** module id = 38\n ** module chunks = 0\n **/","/**\n * This method returns the first argument provided to it.\n *\n * @static\n * @memberOf _\n * @category Utility\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'user': 'fred' };\n *\n * _.identity(object) === object;\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nmodule.exports = identity;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/utility/identity.js\n ** module id = 39\n ** module chunks = 0\n **/","var baseProperty = require('./baseProperty');\n\n/**\n * Gets the \"length\" property value of `object`.\n *\n * **Note:** This function is used to avoid a [JIT bug](https://bugs.webkit.org/show_bug.cgi?id=142792)\n * in Safari on iOS 8.1 ARM64.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {*} Returns the \"length\" value.\n */\nvar getLength = baseProperty('length');\n\nmodule.exports = getLength;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/internal/getLength.js\n ** module id = 40\n ** module chunks = 0\n **/","/**\n * The base implementation of `_.property` without support for deep paths.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @returns {Function} Returns the new function.\n */\nfunction baseProperty(key) {\n  return function(object) {\n    return object == null ? undefined : object[key];\n  };\n}\n\nmodule.exports = baseProperty;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/internal/baseProperty.js\n ** module id = 41\n ** module chunks = 0\n **/"],"sourceRoot":""}